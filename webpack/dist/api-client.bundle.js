var wireWebApiClient=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=55)}([function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCode=void 0,i(n(59),t),i(n(16),t),i(n(60),t),i(n(220),t),i(n(221),t),i(n(222),t),i(n(229),t),i(n(230),t),i(n(231),t),i(n(232),t);var o=n(53);Object.defineProperty(t,"StatusCode",{enumerable:!0,get:function(){return o.StatusCodes}})},function(e,t,n){"use strict";var r=n(26),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";(function(e){var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(66),r.base64=n(67),r.EventEmitter=n(68),r.float=n(69),r.inquire=n(70),r.utf8=n(71),r.pool=n(72),r.LongBits=n(73),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(9))},function(module,exports,__webpack_require__){var e;window,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r,i=n(1)(),o=n(3),s=n(5),a=n(8)();i.prefixColors=["#F2777A","#F99157","#FFCC66","#99CC99","#66CCCC","#6699CC","#CC99CC"],i._setPrefixRegExps=function(){try{a.localStorage&&"string"==typeof a.localStorage.getItem("debug")&&(i._prefixRegExps=[],a.localStorage.getItem("debug").split(",").forEach((function(e){var t="enable";"-"===(e=e.trim())[0]&&(e=e.substr(1),t="disable");var n=i._prepareRegExpForPrefixSearch(e);i._prefixRegExps.push({type:t,regExp:n})})))}catch(e){}},i._getNextPrefixColor=(r=0,function(){return r+=1,i.prefixColors[r%i.prefixColors.length]}),i.prototype._getDecoratedPrefix=function(){var e=[];return s()?(e.push("%c"+this.opts.prefix+"%c "),e.push("color:"+this.opts.prefixColor+"; font-weight:bold;","")):e.push("["+this.opts.prefix+"] "),e},i.prototype._prepareOutput=function(e){var t,n=this._getDecoratedPrefix();return"string"==typeof e[0]?this.opts.markdown&&s()?(t=o.parse(e[0]),n[0]=n[0]+t.text,n=n.concat(t.styles)):n[0]=n[0]+e[0]:n.push(e[0]),1<e.length&&(n=n.concat(e.slice(1))),n},i._setPrefixRegExps(),e.exports=i},function(e,t,n){var r=n(2);e.exports=function(){function e(t,n){return this instanceof e?e._isPrefixAlreadyInUse(t)?e._getInstanceByPrefix(t):(this.opts=e._normalizeOpts(t,n),this.state=e._getInitialState(this.opts),e._decorateLoggerMethods(this),e._instances.push(this),this):new e(t,n)}return e.transports=[],e._instances=[],e._prefixRegExps=[],e._prepareRegExpForPrefixSearch=function(e){return new RegExp("^"+e.replace(/\*/g,".*?")+"$")},e._isPrefixAlreadyInUse=function(t){return e._instances.some((function(e){return e.opts.prefix===t}))},e._getInstanceByPrefix=function(t){return e._instances.filter((function(e){return e.opts.prefix===t}))[0]},e._normalizeOpts=function(t,n){if("string"!=typeof t)throw new TypeError("prefix must be a string");var r=void 0===(n=n||{}).markdown||Boolean(n.markdown),i=n.prefixColor||e._getNextPrefixColor();return{logger:n.logger||console,markdown:r,plaintext:Boolean(n.plaintext),prefix:t,prefixColor:i}},e._getInitialState=function(t){return{isEnabled:e._getEnableState(t)}},e._getEnableState=function(t){var n=!1;return e._prefixRegExps.forEach((function(e){"enable"===e.type&&e.regExp.test(t.prefix)?n=!0:"disable"===e.type&&e.regExp.test(t.prefix)&&(n=!1)})),n},e._decorateLoggerMethods=function(t){var n=t.opts.logger,i=Object.keys(n).filter((function(e){return"function"==typeof n[e]}));0===i.length&&(i=["debug","log","warn","error","info"]),i.forEach((function(i){t[i]=function(){var t=r(arguments),o=this.opts.prefix;if(e.transports.length){var s="["+o+"] "+t.filter((function(e){return"object"!=typeof e})).join(" ");e.transports.forEach(function(e){e({state:this.state,instance:o,level:i,args:t,msg:s})}.bind(this))}if(this.state.isEnabled){var a=this._prepareOutput(t,i);n[i].apply(n,a)}}}))},e}},function(e,t){e.exports=function(e){return Array.prototype.slice.call(e,0)}},function(e,t,n){var r=[];function i(e){return function(t){return r.push(e),r.push(""),"%c"+t+"%c"}}var o=new(n(4))({renderer:{"*":i("font-weight:bold;"),_:i("font-style:italic;"),"`":i("background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;")}});e.exports={parse:function(e){var t={text:o.parse(e),styles:[].concat(r)};return r.length=0,t}}},function(e,t){var n=/([_*`\\]|[^_*`\\]+)/g,r=/[_*`]/;function i(e){this.renderer=e.renderer}function o(e){return r.test(e)}i.prototype.parse=function(e){if(""===e)return"";var t,r,i,s=e.match(n),a=this.renderer,c="",u=[],l={},d=0;function f(e){for(var n="";t&&t.tag!==e;)n=t.tag+t.text+n,l[t.tag]=!1,t=u.pop();return n}for(;i=s[d];){if(r="",d++,o(i))if(l[i])r=f(i),r=a[t.tag](t.text+r),l[i]=!1,t=u.pop();else{var p="";if("`"===i){var h=s.indexOf(i,d);-1!==h&&(c+=f(),p=s.slice(d,h).join(""),d=h)}t&&u.push(t),l[i]=!0,t={tag:i,text:p}}else if("\\"===(r=i)){var E=s[d];(o(E)||"\\"===E)&&(r=E,d++)}r&&(t?t.text+=r:c+=r,r="")}return c+f()},e.exports=i},function(e,t,n){var r=n(6),i=n(7);e.exports=function(){return r()||i()}},function(e,t){e.exports=function(){try{return"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent)}catch(e){return!1}}},function(e,t){e.exports=function(){try{return/firefox\/(\d+)/i.test(navigator.userAgent)}catch(e){return!1}}},function(e,t,n){(function(t){function n(e,t){return"object"==typeof e&&e.self===e&&e||"object"==typeof t&&t.global===t&&t||this}e.exports=n.bind(this,self,t),e.exports.getGlobal=n}).call(this,n(9))},function(ob,pb){var qb;qb=function(){return this}();try{qb=qb||Function("return this")()||eval("this")}catch(ob){"object"==typeof window&&(qb=window)}ob.exports=qb}])},module.exports=e()},function(e,t,n){e.exports=n(102)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(120),t),i(n(121),t),i(n(122),t),i(n(123),t),i(n(124),t),i(n(125),t),i(n(126),t),i(n(127),t),i(n(128),t),i(n(129),t),i(n(130),t),i(n(131),t),i(n(132),t),i(n(133),t),i(n(134),t),i(n(135),t),i(n(136),t),i(n(158),t),i(n(36),t),i(n(159),t),i(n(160),t),i(n(161),t)},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s,a;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):O(i,i.length)}function E(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function O(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=O(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):E.call(e,t)},a.prototype.listenerCount=E,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonConfig=void 0,t.CommonConfig=o(n(34)),s(n(137),t),s(n(142),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.AUTH_TABLE_NAME=t.AUTH_COOKIE_KEY=t.AUTH_ACCESS_TOKEN_KEY=void 0,t.AUTH_ACCESS_TOKEN_KEY="access-token",t.AUTH_COOKIE_KEY="cookie",t.AUTH_TABLE_NAME="authentication",i(n(56),t),i(n(57),t),i(n(58),t),i(n(47),t),i(n(243),t),i(n(244),t),i(n(245),t),i(n(48),t),i(n(246),t),i(n(247),t),i(n(248),t),i(n(249),t),i(n(250),t),i(n(251),t)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(101),t),i(n(11),t),i(n(162),t),i(n(163),t),i(n(164),t),i(n(165),t),i(n(166),t)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TeamAPI=void 0;const i=r(n(4)),o=n(0),s=n(5);class a{constructor(e){this.client=e}async postTeam(e){const t={data:e,method:"post",url:""+a.URL.TEAMS};return(await this.client.sendJSON(t)).headers.location}async putTeam(e,t){const n={data:t,method:"put",url:`${a.URL.TEAMS}/${e}`};await this.client.sendJSON(n)}async getTeams(){const e={method:"get",url:""+a.URL.TEAMS};return(await this.client.sendJSON(e)).data}async getTeam(e){const t={method:"get",url:`${a.URL.TEAMS}/${e}`};return(await this.client.sendJSON(t)).data}async deleteTeam(e,t,n){const r={data:Object.assign({password:t},n&&{verification_code:n}),method:"delete",url:`${a.URL.TEAMS}/${e}`};await this.client.sendJSON(r)}async getTeamSize(e){const t=i.default.CancelToken.source(),n={cancelToken:t.token,method:"get",url:`${a.URL.TEAMS}/${e}/${a.URL.SIZE}`};return{cancel:()=>t.cancel(o.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{return(await this.client.sendJSON(n)).data}catch(e){if(e.message===o.SyntheticErrorLabel.REQUEST_CANCELLED)throw new s.RequestCancellationError("Team size request got cancelled");throw e}})()}}async postLead(e){const t={data:e,method:"post",url:`${a.URL.CONSENT}/${a.URL.MARKETO}/${a.URL.LEAD}`};return(await this.client.sendJSON(t)).data}async putLead(e){const t={data:e,method:"put",url:`${a.URL.CONSENT}/${a.URL.MARKETO}/${a.URL.LEAD}`};return(await this.client.sendJSON(t)).data}}t.TeamAPI=a,a.URL={SIZE:"size",TEAMS:"/teams",CONSENT:"/consent",MARKETO:"marketo",LEAD:"lead"}},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(107),o=n(28),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=n(29)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(s)})),e.exports=u}).call(this,n(13))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function E(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=E,i.addListener=E,i.once=E,i.off=E,i.removeListener=E,i.removeAllListeners=E,i.emit=E,i.prependListener=E,i.prependOnceListener=E,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Priority=void 0,function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=5]="MEDIUM",e[e.HIGH=9]="HIGH"}(t.Priority||(t.Priority={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(279),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyntheticErrorLabel=t.BackendErrorLabel=void 0,function(e){e.ACCESS_DENIED="access-denied",e.BAD_REQUEST="bad-request",e.BAD_GATEWAY="bad-gateway",e.CLIENT_ERROR="client-error",e.SERVER_ERROR="server-error",e.INSUFFICIENT_PERMISSIONS="insufficient-permissions",e.INTERNAL_ERROR="internal-error",e.INVALID_OPERATION="invalid-op",e.INVALID_PAYLOAD="invalid-payload",e.INVALID_PERMISSIONS="invalid-permissions",e.NOT_FOUND="not-found",e.OPERATION_DENIED="operation-denied",e.QUEUE_FULL="queue-full",e.UNAUTHORIZED="unauthorized",e.BLACKLISTED_EMAIL="blacklisted-email",e.BLACKLISTED_PHONE="blacklisted-phone",e.DOMAIN_BLOCKED_FOR_REGISTRATION="domain-blocked-for-registration",e.INVALID_CODE="invalid-code",e.INVALID_CREDENTIALS="invalid-credentials",e.INVALID_EMAIL="invalid-email",e.INVALID_INVITATION_CODE="invalid-invitation-code",e.INVALID_PHONE="invalid-phone",e.PHONE_EXISTS="phone-exists",e.KEY_EXISTS="key-exists",e.MISSING_AUTH="missing-auth",e.PASSWORD_EXISTS="password-exists",e.PENDING_ACTIVATION="pending-activation",e.PENDING_LOGIN="pending-login",e.SUSPENDED_ACCOUNT="suspended",e.CODE_AUTHENTICATION_REQUIRED="code-authentication-required",e.CODE_AUTHENTICATION_FAILED="code-authentication-failed",e.PASSWORD_AUTHENTICATION_FAILED="password-authentication-failed",e.TOO_MANY_CLIENTS="too-many-clients",e.UNKNOWN_CLIENT="unknown-client",e.CLIENT_CAPABILITY_REMOVED="client-feature-cannot-be-removed",e.TOO_MANY_MEMBERS="too-many-members",e.NO_CONVERSATION="no-conversation",e.NO_CONVERSATION_CODE="no-conversation-code",e.NOT_CONNECTED="not-connected",e.HANDLE_EXISTS="handle-exists",e.INVALID_HANDLE="invalid-handle",e.NO_OTHER_OWNER="no-other-owner",e.NO_SELF_DELETE_FOR_TEAM_OWNER="no-self-delete-for-team-owner",e.CANNOT_DELETE_OWN_IDP="cannot-delete-own-idp",e.NO_TEAM="no-team",e.NO_TEAM_MEMBER="no-team-member",e.TOO_MANY_TEAM_MEMBERS="too-many-team-members",e.INVITE_EMAIL_EXISTS="email-exists",e.BINDING_EXISTS="binding-exists",e.BINDING_TEAM="binding-team",e.NON_BINDING_TEAM="non-binding-team",e.NON_BINDING_TEAM_MEMBERS="non-binding-team-members",e.INVALID_TEAM_STATUS_UPDATE="invalid-team-status-update",e.NO_MANAGED_CONVERSATION="no-managed-team-conv",e.NO_ADD_TO_MANAGED="no-add-to-managed",e.ACCOUNT_SUSPENDED="suspended",e.FEATURE_LOCKED="feature-locked",e.APP_LOCK_INVALID_TIMEOUT="inactivity-timeout-too-low",e.EXPIRED_CARD="expired_card",e.CUSTOM_BACKEND_NOT_FOUND="custom-backend-not-found",e.LEGAL_HOLD_MISSING_CONSENT="missing-legalhold-consent",e.SERVICE_DISABLED="service-disabled",e.TOO_MANY_SERVICES="too-many-bots",e.FEDERATION_NOT_ALLOWED="federation-denied",e.FEDERATION_NOT_AVAILABLE="federation-not-available",e.FEDERATION_BACKEND_NOT_FOUND="srv-record-not-found"}(t.BackendErrorLabel||(t.BackendErrorLabel={})),function(e){e.ALREADY_INVITED="already-invited",e.FORBIDDEN_PHONE_NUMBER="forbidden-phone-number",e.HANDLE_TOO_SHORT="handle-too-short",e.INVALID_PHONE_NUMBER="invalid-phone-number",e.REQUEST_CANCELLED="request-cancelled",e.SERVICE_NOT_FOUND="service-not-found",e.SSO_GENERIC_ERROR="generic-sso-error",e.SSO_NO_SSO_CODE="no-sso-code-found",e.SSO_USER_CANCELLED_ERROR="user-cancelled-sso-error",e.INVITATION_NOT_FOUND="invitation-not-found",e.INVITATION_MULTIPLE_FOUND="invitation-multiple-found",e.UNKNOWN="unknown-error"}(t.SyntheticErrorLabel||(t.SyntheticErrorLabel={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(61),t),i(n(62),t),i(n(63),t),i(n(80),t),i(n(23),t),i(n(81),t),i(n(82),t),i(n(83),t),i(n(22),t),i(n(84),t),i(n(85),t),i(n(86),t),i(n(87),t),i(n(88),t),i(n(89),t),i(n(90),t),i(n(91),t),i(n(92),t),i(n(93),t),i(n(94),t),i(n(95),t),i(n(96),t),i(n(97),t)},function(e,t,n){"use strict";var r,i,o,s=n(64),a=s.Reader,c=s.Writer,u=s.util,l=s.roots.default||(s.roots.default={});l.proteus=((o={}).UserId=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=u.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),t.uint32(10).bytes(e.uuid),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.UserId;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.uuid=e.bytes();break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("uuid"))throw u.ProtocolError("missing required 'uuid'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":e.uuid&&"number"==typeof e.uuid.length||u.isString(e.uuid)?null:"uuid: buffer expected"},e.fromObject=function(e){if(e instanceof l.proteus.UserId)return e;var t=new l.proteus.UserId;return null!=e.uuid&&("string"==typeof e.uuid?u.base64.decode(e.uuid,t.uuid=u.newBuffer(u.base64.length(e.uuid)),0):e.uuid.length&&(t.uuid=e.uuid)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.uuid="":(n.uuid=[],t.bytes!==Array&&(n.uuid=u.newBuffer(n.uuid)))),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=t.bytes===String?u.base64.encode(e.uuid,0,e.uuid.length):t.bytes===Array?Array.prototype.slice.call(e.uuid):e.uuid),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.QualifiedUserId=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.id="",e.prototype.domain="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),t.uint32(10).string(e.id),t.uint32(18).string(e.domain),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.QualifiedUserId;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.id=e.string();break;case 2:r.domain=e.string();break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("id"))throw u.ProtocolError("missing required 'id'",{instance:r});if(!r.hasOwnProperty("domain"))throw u.ProtocolError("missing required 'domain'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":u.isString(e.id)?u.isString(e.domain)?null:"domain: string expected":"id: string expected"},e.fromObject=function(e){if(e instanceof l.proteus.QualifiedUserId)return e;var t=new l.proteus.QualifiedUserId;return null!=e.id&&(t.id=String(e.id)),null!=e.domain&&(t.domain=String(e.domain)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.id="",n.domain=""),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.ClientId=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.client=u.Long?u.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),t.uint32(8).uint64(e.client),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientId;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.client=e.uint64();break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("client"))throw u.ProtocolError("missing required 'client'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":u.isInteger(e.client)||e.client&&u.isInteger(e.client.low)&&u.isInteger(e.client.high)?null:"client: integer|Long expected"},e.fromObject=function(e){if(e instanceof l.proteus.ClientId)return e;var t=new l.proteus.ClientId;return null!=e.client&&(u.Long?(t.client=u.Long.fromValue(e.client)).unsigned=!0:"string"==typeof e.client?t.client=parseInt(e.client,10):"number"==typeof e.client?t.client=e.client:"object"==typeof e.client&&(t.client=new u.LongBits(e.client.low>>>0,e.client.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(u.Long){var r=new u.Long(0,0,!0);n.client=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.client=t.longs===String?"0":0;return null!=e.client&&e.hasOwnProperty("client")&&("number"==typeof e.client?n.client=t.longs===String?String(e.client):e.client:n.client=t.longs===String?u.Long.prototype.toString.call(e.client):t.longs===Number?new u.LongBits(e.client.low>>>0,e.client.high>>>0).toNumber(!0):e.client),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.ClientEntry=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.client=null,e.prototype.text=u.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),l.proteus.ClientId.encode(e.client,t.uint32(10).fork()).ldelim(),t.uint32(18).bytes(e.text),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientEntry;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.client=l.proteus.ClientId.decode(e,e.uint32());break;case 2:r.text=e.bytes();break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("client"))throw u.ProtocolError("missing required 'client'",{instance:r});if(!r.hasOwnProperty("text"))throw u.ProtocolError("missing required 'text'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t=l.proteus.ClientId.verify(e.client);return t?"client."+t:e.text&&"number"==typeof e.text.length||u.isString(e.text)?null:"text: buffer expected"},e.fromObject=function(e){if(e instanceof l.proteus.ClientEntry)return e;var t=new l.proteus.ClientEntry;if(null!=e.client){if("object"!=typeof e.client)throw TypeError(".proteus.ClientEntry.client: object expected");t.client=l.proteus.ClientId.fromObject(e.client)}return null!=e.text&&("string"==typeof e.text?u.base64.decode(e.text,t.text=u.newBuffer(u.base64.length(e.text)),0):e.text.length&&(t.text=e.text)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.client=null,t.bytes===String?n.text="":(n.text=[],t.bytes!==Array&&(n.text=u.newBuffer(n.text)))),null!=e.client&&e.hasOwnProperty("client")&&(n.client=l.proteus.ClientId.toObject(e.client,t)),null!=e.text&&e.hasOwnProperty("text")&&(n.text=t.bytes===String?u.base64.encode(e.text,0,e.text.length):t.bytes===Array?Array.prototype.slice.call(e.text):e.text),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.UserEntry=function(){function e(e){if(this.clients=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user=null,e.prototype.clients=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),l.proteus.UserId.encode(e.user,t.uint32(10).fork()).ldelim(),null!=e.clients&&e.clients.length)for(var n=0;n<e.clients.length;++n)l.proteus.ClientEntry.encode(e.clients[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.UserEntry;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.user=l.proteus.UserId.decode(e,e.uint32());break;case 2:r.clients&&r.clients.length||(r.clients=[]),r.clients.push(l.proteus.ClientEntry.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("user"))throw u.ProtocolError("missing required 'user'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(n=l.proteus.UserId.verify(e.user))return"user."+n;if(null!=e.clients&&e.hasOwnProperty("clients")){if(!Array.isArray(e.clients))return"clients: array expected";for(var t=0;t<e.clients.length;++t){var n;if(n=l.proteus.ClientEntry.verify(e.clients[t]))return"clients."+n}}return null},e.fromObject=function(e){if(e instanceof l.proteus.UserEntry)return e;var t=new l.proteus.UserEntry;if(null!=e.user){if("object"!=typeof e.user)throw TypeError(".proteus.UserEntry.user: object expected");t.user=l.proteus.UserId.fromObject(e.user)}if(e.clients){if(!Array.isArray(e.clients))throw TypeError(".proteus.UserEntry.clients: array expected");t.clients=[];for(var n=0;n<e.clients.length;++n){if("object"!=typeof e.clients[n])throw TypeError(".proteus.UserEntry.clients: object expected");t.clients[n]=l.proteus.ClientEntry.fromObject(e.clients[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.clients=[]),t.defaults&&(n.user=null),null!=e.user&&e.hasOwnProperty("user")&&(n.user=l.proteus.UserId.toObject(e.user,t)),e.clients&&e.clients.length){n.clients=[];for(var r=0;r<e.clients.length;++r)n.clients[r]=l.proteus.ClientEntry.toObject(e.clients[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.QualifiedUserEntry=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.domain="",e.prototype.entries=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),t.uint32(10).string(e.domain),null!=e.entries&&e.entries.length)for(var n=0;n<e.entries.length;++n)l.proteus.UserEntry.encode(e.entries[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.QualifiedUserEntry;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.domain=e.string();break;case 2:r.entries&&r.entries.length||(r.entries=[]),r.entries.push(l.proteus.UserEntry.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("domain"))throw u.ProtocolError("missing required 'domain'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!u.isString(e.domain))return"domain: string expected";if(null!=e.entries&&e.hasOwnProperty("entries")){if(!Array.isArray(e.entries))return"entries: array expected";for(var t=0;t<e.entries.length;++t){var n=l.proteus.UserEntry.verify(e.entries[t]);if(n)return"entries."+n}}return null},e.fromObject=function(e){if(e instanceof l.proteus.QualifiedUserEntry)return e;var t=new l.proteus.QualifiedUserEntry;if(null!=e.domain&&(t.domain=String(e.domain)),e.entries){if(!Array.isArray(e.entries))throw TypeError(".proteus.QualifiedUserEntry.entries: array expected");t.entries=[];for(var n=0;n<e.entries.length;++n){if("object"!=typeof e.entries[n])throw TypeError(".proteus.QualifiedUserEntry.entries: object expected");t.entries[n]=l.proteus.UserEntry.fromObject(e.entries[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.entries=[]),t.defaults&&(n.domain=""),null!=e.domain&&e.hasOwnProperty("domain")&&(n.domain=e.domain),e.entries&&e.entries.length){n.entries=[];for(var r=0;r<e.entries.length;++r)n.entries[r]=l.proteus.UserEntry.toObject(e.entries[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.Priority=(r={},(i=Object.create(r))[r[1]="LOW_PRIORITY"]=1,i[r[2]="HIGH_PRIORITY"]=2,i),o.NewOtrMessage=function(){function e(e){if(this.recipients=[],this.reportMissing=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sender=null,e.prototype.recipients=u.emptyArray,e.prototype.nativePush=!0,e.prototype.blob=u.newBuffer([]),e.prototype.nativePriority=1,e.prototype.transient=!1,e.prototype.reportMissing=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),l.proteus.ClientId.encode(e.sender,t.uint32(10).fork()).ldelim(),null!=e.recipients&&e.recipients.length)for(var n=0;n<e.recipients.length;++n)l.proteus.UserEntry.encode(e.recipients[n],t.uint32(18).fork()).ldelim();if(null!=e.nativePush&&Object.hasOwnProperty.call(e,"nativePush")&&t.uint32(24).bool(e.nativePush),null!=e.blob&&Object.hasOwnProperty.call(e,"blob")&&t.uint32(34).bytes(e.blob),null!=e.nativePriority&&Object.hasOwnProperty.call(e,"nativePriority")&&t.uint32(40).int32(e.nativePriority),null!=e.transient&&Object.hasOwnProperty.call(e,"transient")&&t.uint32(48).bool(e.transient),null!=e.reportMissing&&e.reportMissing.length)for(n=0;n<e.reportMissing.length;++n)l.proteus.UserId.encode(e.reportMissing[n],t.uint32(58).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.NewOtrMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sender=l.proteus.ClientId.decode(e,e.uint32());break;case 2:r.recipients&&r.recipients.length||(r.recipients=[]),r.recipients.push(l.proteus.UserEntry.decode(e,e.uint32()));break;case 3:r.nativePush=e.bool();break;case 4:r.blob=e.bytes();break;case 5:r.nativePriority=e.int32();break;case 6:r.transient=e.bool();break;case 7:r.reportMissing&&r.reportMissing.length||(r.reportMissing=[]),r.reportMissing.push(l.proteus.UserId.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("sender"))throw u.ProtocolError("missing required 'sender'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(n=l.proteus.ClientId.verify(e.sender))return"sender."+n;if(null!=e.recipients&&e.hasOwnProperty("recipients")){if(!Array.isArray(e.recipients))return"recipients: array expected";for(var t=0;t<e.recipients.length;++t)if(n=l.proteus.UserEntry.verify(e.recipients[t]))return"recipients."+n}if(null!=e.nativePush&&e.hasOwnProperty("nativePush")&&"boolean"!=typeof e.nativePush)return"nativePush: boolean expected";if(null!=e.blob&&e.hasOwnProperty("blob")&&!(e.blob&&"number"==typeof e.blob.length||u.isString(e.blob)))return"blob: buffer expected";if(null!=e.nativePriority&&e.hasOwnProperty("nativePriority"))switch(e.nativePriority){default:return"nativePriority: enum value expected";case 1:case 2:}if(null!=e.transient&&e.hasOwnProperty("transient")&&"boolean"!=typeof e.transient)return"transient: boolean expected";if(null!=e.reportMissing&&e.hasOwnProperty("reportMissing")){if(!Array.isArray(e.reportMissing))return"reportMissing: array expected";for(t=0;t<e.reportMissing.length;++t){var n;if(n=l.proteus.UserId.verify(e.reportMissing[t]))return"reportMissing."+n}}return null},e.fromObject=function(e){if(e instanceof l.proteus.NewOtrMessage)return e;var t=new l.proteus.NewOtrMessage;if(null!=e.sender){if("object"!=typeof e.sender)throw TypeError(".proteus.NewOtrMessage.sender: object expected");t.sender=l.proteus.ClientId.fromObject(e.sender)}if(e.recipients){if(!Array.isArray(e.recipients))throw TypeError(".proteus.NewOtrMessage.recipients: array expected");t.recipients=[];for(var n=0;n<e.recipients.length;++n){if("object"!=typeof e.recipients[n])throw TypeError(".proteus.NewOtrMessage.recipients: object expected");t.recipients[n]=l.proteus.UserEntry.fromObject(e.recipients[n])}}switch(null!=e.nativePush&&(t.nativePush=Boolean(e.nativePush)),null!=e.blob&&("string"==typeof e.blob?u.base64.decode(e.blob,t.blob=u.newBuffer(u.base64.length(e.blob)),0):e.blob.length&&(t.blob=e.blob)),e.nativePriority){case"LOW_PRIORITY":case 1:t.nativePriority=1;break;case"HIGH_PRIORITY":case 2:t.nativePriority=2}if(null!=e.transient&&(t.transient=Boolean(e.transient)),e.reportMissing){if(!Array.isArray(e.reportMissing))throw TypeError(".proteus.NewOtrMessage.reportMissing: array expected");for(t.reportMissing=[],n=0;n<e.reportMissing.length;++n){if("object"!=typeof e.reportMissing[n])throw TypeError(".proteus.NewOtrMessage.reportMissing: object expected");t.reportMissing[n]=l.proteus.UserId.fromObject(e.reportMissing[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.recipients=[],n.reportMissing=[]),t.defaults&&(n.sender=null,n.nativePush=!0,t.bytes===String?n.blob="":(n.blob=[],t.bytes!==Array&&(n.blob=u.newBuffer(n.blob))),n.nativePriority=t.enums===String?"LOW_PRIORITY":1,n.transient=!1),null!=e.sender&&e.hasOwnProperty("sender")&&(n.sender=l.proteus.ClientId.toObject(e.sender,t)),e.recipients&&e.recipients.length){n.recipients=[];for(var r=0;r<e.recipients.length;++r)n.recipients[r]=l.proteus.UserEntry.toObject(e.recipients[r],t)}if(null!=e.nativePush&&e.hasOwnProperty("nativePush")&&(n.nativePush=e.nativePush),null!=e.blob&&e.hasOwnProperty("blob")&&(n.blob=t.bytes===String?u.base64.encode(e.blob,0,e.blob.length):t.bytes===Array?Array.prototype.slice.call(e.blob):e.blob),null!=e.nativePriority&&e.hasOwnProperty("nativePriority")&&(n.nativePriority=t.enums===String?l.proteus.Priority[e.nativePriority]:e.nativePriority),null!=e.transient&&e.hasOwnProperty("transient")&&(n.transient=e.transient),e.reportMissing&&e.reportMissing.length)for(n.reportMissing=[],r=0;r<e.reportMissing.length;++r)n.reportMissing[r]=l.proteus.UserId.toObject(e.reportMissing[r],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.QualifiedNewOtrMessage=function(){function e(e){if(this.recipients=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.sender=null,e.prototype.recipients=u.emptyArray,e.prototype.nativePush=!0,e.prototype.blob=u.newBuffer([]),e.prototype.nativePriority=1,e.prototype.transient=!1,e.prototype.reportAll=null,e.prototype.ignoreAll=null,e.prototype.reportOnly=null,e.prototype.ignoreOnly=null,Object.defineProperty(e.prototype,"clientMismatchStrategy",{get:u.oneOfGetter(t=["reportAll","ignoreAll","reportOnly","ignoreOnly"]),set:u.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),l.proteus.ClientId.encode(e.sender,t.uint32(10).fork()).ldelim(),null!=e.recipients&&e.recipients.length)for(var n=0;n<e.recipients.length;++n)l.proteus.QualifiedUserEntry.encode(e.recipients[n],t.uint32(18).fork()).ldelim();return null!=e.nativePush&&Object.hasOwnProperty.call(e,"nativePush")&&t.uint32(24).bool(e.nativePush),null!=e.blob&&Object.hasOwnProperty.call(e,"blob")&&t.uint32(34).bytes(e.blob),null!=e.nativePriority&&Object.hasOwnProperty.call(e,"nativePriority")&&t.uint32(40).int32(e.nativePriority),null!=e.transient&&Object.hasOwnProperty.call(e,"transient")&&t.uint32(48).bool(e.transient),null!=e.reportAll&&Object.hasOwnProperty.call(e,"reportAll")&&l.proteus.ClientMismatchStrategy.ReportAll.encode(e.reportAll,t.uint32(58).fork()).ldelim(),null!=e.ignoreAll&&Object.hasOwnProperty.call(e,"ignoreAll")&&l.proteus.ClientMismatchStrategy.IgnoreAll.encode(e.ignoreAll,t.uint32(66).fork()).ldelim(),null!=e.reportOnly&&Object.hasOwnProperty.call(e,"reportOnly")&&l.proteus.ClientMismatchStrategy.ReportOnly.encode(e.reportOnly,t.uint32(74).fork()).ldelim(),null!=e.ignoreOnly&&Object.hasOwnProperty.call(e,"ignoreOnly")&&l.proteus.ClientMismatchStrategy.IgnoreOnly.encode(e.ignoreOnly,t.uint32(82).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.QualifiedNewOtrMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sender=l.proteus.ClientId.decode(e,e.uint32());break;case 2:r.recipients&&r.recipients.length||(r.recipients=[]),r.recipients.push(l.proteus.QualifiedUserEntry.decode(e,e.uint32()));break;case 3:r.nativePush=e.bool();break;case 4:r.blob=e.bytes();break;case 5:r.nativePriority=e.int32();break;case 6:r.transient=e.bool();break;case 7:r.reportAll=l.proteus.ClientMismatchStrategy.ReportAll.decode(e,e.uint32());break;case 8:r.ignoreAll=l.proteus.ClientMismatchStrategy.IgnoreAll.decode(e,e.uint32());break;case 9:r.reportOnly=l.proteus.ClientMismatchStrategy.ReportOnly.decode(e,e.uint32());break;case 10:r.ignoreOnly=l.proteus.ClientMismatchStrategy.IgnoreOnly.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("sender"))throw u.ProtocolError("missing required 'sender'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(r=l.proteus.ClientId.verify(e.sender))return"sender."+r;if(null!=e.recipients&&e.hasOwnProperty("recipients")){if(!Array.isArray(e.recipients))return"recipients: array expected";for(var n=0;n<e.recipients.length;++n)if(r=l.proteus.QualifiedUserEntry.verify(e.recipients[n]))return"recipients."+r}if(null!=e.nativePush&&e.hasOwnProperty("nativePush")&&"boolean"!=typeof e.nativePush)return"nativePush: boolean expected";if(null!=e.blob&&e.hasOwnProperty("blob")&&!(e.blob&&"number"==typeof e.blob.length||u.isString(e.blob)))return"blob: buffer expected";if(null!=e.nativePriority&&e.hasOwnProperty("nativePriority"))switch(e.nativePriority){default:return"nativePriority: enum value expected";case 1:case 2:}if(null!=e.transient&&e.hasOwnProperty("transient")&&"boolean"!=typeof e.transient)return"transient: boolean expected";if(null!=e.reportAll&&e.hasOwnProperty("reportAll")&&(t.clientMismatchStrategy=1,r=l.proteus.ClientMismatchStrategy.ReportAll.verify(e.reportAll)))return"reportAll."+r;if(null!=e.ignoreAll&&e.hasOwnProperty("ignoreAll")){if(1===t.clientMismatchStrategy)return"clientMismatchStrategy: multiple values";if(t.clientMismatchStrategy=1,r=l.proteus.ClientMismatchStrategy.IgnoreAll.verify(e.ignoreAll))return"ignoreAll."+r}if(null!=e.reportOnly&&e.hasOwnProperty("reportOnly")){if(1===t.clientMismatchStrategy)return"clientMismatchStrategy: multiple values";if(t.clientMismatchStrategy=1,r=l.proteus.ClientMismatchStrategy.ReportOnly.verify(e.reportOnly))return"reportOnly."+r}if(null!=e.ignoreOnly&&e.hasOwnProperty("ignoreOnly")){if(1===t.clientMismatchStrategy)return"clientMismatchStrategy: multiple values";var r;if(t.clientMismatchStrategy=1,r=l.proteus.ClientMismatchStrategy.IgnoreOnly.verify(e.ignoreOnly))return"ignoreOnly."+r}return null},e.fromObject=function(e){if(e instanceof l.proteus.QualifiedNewOtrMessage)return e;var t=new l.proteus.QualifiedNewOtrMessage;if(null!=e.sender){if("object"!=typeof e.sender)throw TypeError(".proteus.QualifiedNewOtrMessage.sender: object expected");t.sender=l.proteus.ClientId.fromObject(e.sender)}if(e.recipients){if(!Array.isArray(e.recipients))throw TypeError(".proteus.QualifiedNewOtrMessage.recipients: array expected");t.recipients=[];for(var n=0;n<e.recipients.length;++n){if("object"!=typeof e.recipients[n])throw TypeError(".proteus.QualifiedNewOtrMessage.recipients: object expected");t.recipients[n]=l.proteus.QualifiedUserEntry.fromObject(e.recipients[n])}}switch(null!=e.nativePush&&(t.nativePush=Boolean(e.nativePush)),null!=e.blob&&("string"==typeof e.blob?u.base64.decode(e.blob,t.blob=u.newBuffer(u.base64.length(e.blob)),0):e.blob.length&&(t.blob=e.blob)),e.nativePriority){case"LOW_PRIORITY":case 1:t.nativePriority=1;break;case"HIGH_PRIORITY":case 2:t.nativePriority=2}if(null!=e.transient&&(t.transient=Boolean(e.transient)),null!=e.reportAll){if("object"!=typeof e.reportAll)throw TypeError(".proteus.QualifiedNewOtrMessage.reportAll: object expected");t.reportAll=l.proteus.ClientMismatchStrategy.ReportAll.fromObject(e.reportAll)}if(null!=e.ignoreAll){if("object"!=typeof e.ignoreAll)throw TypeError(".proteus.QualifiedNewOtrMessage.ignoreAll: object expected");t.ignoreAll=l.proteus.ClientMismatchStrategy.IgnoreAll.fromObject(e.ignoreAll)}if(null!=e.reportOnly){if("object"!=typeof e.reportOnly)throw TypeError(".proteus.QualifiedNewOtrMessage.reportOnly: object expected");t.reportOnly=l.proteus.ClientMismatchStrategy.ReportOnly.fromObject(e.reportOnly)}if(null!=e.ignoreOnly){if("object"!=typeof e.ignoreOnly)throw TypeError(".proteus.QualifiedNewOtrMessage.ignoreOnly: object expected");t.ignoreOnly=l.proteus.ClientMismatchStrategy.IgnoreOnly.fromObject(e.ignoreOnly)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.recipients=[]),t.defaults&&(n.sender=null,n.nativePush=!0,t.bytes===String?n.blob="":(n.blob=[],t.bytes!==Array&&(n.blob=u.newBuffer(n.blob))),n.nativePriority=t.enums===String?"LOW_PRIORITY":1,n.transient=!1),null!=e.sender&&e.hasOwnProperty("sender")&&(n.sender=l.proteus.ClientId.toObject(e.sender,t)),e.recipients&&e.recipients.length){n.recipients=[];for(var r=0;r<e.recipients.length;++r)n.recipients[r]=l.proteus.QualifiedUserEntry.toObject(e.recipients[r],t)}return null!=e.nativePush&&e.hasOwnProperty("nativePush")&&(n.nativePush=e.nativePush),null!=e.blob&&e.hasOwnProperty("blob")&&(n.blob=t.bytes===String?u.base64.encode(e.blob,0,e.blob.length):t.bytes===Array?Array.prototype.slice.call(e.blob):e.blob),null!=e.nativePriority&&e.hasOwnProperty("nativePriority")&&(n.nativePriority=t.enums===String?l.proteus.Priority[e.nativePriority]:e.nativePriority),null!=e.transient&&e.hasOwnProperty("transient")&&(n.transient=e.transient),null!=e.reportAll&&e.hasOwnProperty("reportAll")&&(n.reportAll=l.proteus.ClientMismatchStrategy.ReportAll.toObject(e.reportAll,t),t.oneofs&&(n.clientMismatchStrategy="reportAll")),null!=e.ignoreAll&&e.hasOwnProperty("ignoreAll")&&(n.ignoreAll=l.proteus.ClientMismatchStrategy.IgnoreAll.toObject(e.ignoreAll,t),t.oneofs&&(n.clientMismatchStrategy="ignoreAll")),null!=e.reportOnly&&e.hasOwnProperty("reportOnly")&&(n.reportOnly=l.proteus.ClientMismatchStrategy.ReportOnly.toObject(e.reportOnly,t),t.oneofs&&(n.clientMismatchStrategy="reportOnly")),null!=e.ignoreOnly&&e.hasOwnProperty("ignoreOnly")&&(n.ignoreOnly=l.proteus.ClientMismatchStrategy.IgnoreOnly.toObject(e.ignoreOnly,t),t.oneofs&&(n.clientMismatchStrategy="ignoreOnly")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o.ClientMismatchStrategy=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientMismatchStrategy;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.proteus.ClientMismatchStrategy?e:new l.proteus.ClientMismatchStrategy},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.ReportAll=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientMismatchStrategy.ReportAll;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.proteus.ClientMismatchStrategy.ReportAll?e:new l.proteus.ClientMismatchStrategy.ReportAll},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),e.IgnoreAll=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=c.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientMismatchStrategy.IgnoreAll;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.proteus.ClientMismatchStrategy.IgnoreAll?e:new l.proteus.ClientMismatchStrategy.IgnoreAll},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),e.ReportOnly=function(){function e(e){if(this.userIds=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.userIds=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),null!=e.userIds&&e.userIds.length)for(var n=0;n<e.userIds.length;++n)l.proteus.QualifiedUserId.encode(e.userIds[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientMismatchStrategy.ReportOnly;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.userIds&&r.userIds.length||(r.userIds=[]),r.userIds.push(l.proteus.QualifiedUserId.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.userIds&&e.hasOwnProperty("userIds")){if(!Array.isArray(e.userIds))return"userIds: array expected";for(var t=0;t<e.userIds.length;++t){var n=l.proteus.QualifiedUserId.verify(e.userIds[t]);if(n)return"userIds."+n}}return null},e.fromObject=function(e){if(e instanceof l.proteus.ClientMismatchStrategy.ReportOnly)return e;var t=new l.proteus.ClientMismatchStrategy.ReportOnly;if(e.userIds){if(!Array.isArray(e.userIds))throw TypeError(".proteus.ClientMismatchStrategy.ReportOnly.userIds: array expected");t.userIds=[];for(var n=0;n<e.userIds.length;++n){if("object"!=typeof e.userIds[n])throw TypeError(".proteus.ClientMismatchStrategy.ReportOnly.userIds: object expected");t.userIds[n]=l.proteus.QualifiedUserId.fromObject(e.userIds[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.userIds=[]),e.userIds&&e.userIds.length){n.userIds=[];for(var r=0;r<e.userIds.length;++r)n.userIds[r]=l.proteus.QualifiedUserId.toObject(e.userIds[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),e.IgnoreOnly=function(){function e(e){if(this.userIds=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.userIds=u.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),null!=e.userIds&&e.userIds.length)for(var n=0;n<e.userIds.length;++n)l.proteus.QualifiedUserId.encode(e.userIds[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.ClientMismatchStrategy.IgnoreOnly;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.userIds&&r.userIds.length||(r.userIds=[]),r.userIds.push(l.proteus.QualifiedUserId.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.userIds&&e.hasOwnProperty("userIds")){if(!Array.isArray(e.userIds))return"userIds: array expected";for(var t=0;t<e.userIds.length;++t){var n=l.proteus.QualifiedUserId.verify(e.userIds[t]);if(n)return"userIds."+n}}return null},e.fromObject=function(e){if(e instanceof l.proteus.ClientMismatchStrategy.IgnoreOnly)return e;var t=new l.proteus.ClientMismatchStrategy.IgnoreOnly;if(e.userIds){if(!Array.isArray(e.userIds))throw TypeError(".proteus.ClientMismatchStrategy.IgnoreOnly.userIds: array expected");t.userIds=[];for(var n=0;n<e.userIds.length;++n){if("object"!=typeof e.userIds[n])throw TypeError(".proteus.ClientMismatchStrategy.IgnoreOnly.userIds: object expected");t.userIds[n]=l.proteus.QualifiedUserId.fromObject(e.userIds[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.userIds=[]),e.userIds&&e.userIds.length){n.userIds=[];for(var r=0;r<e.userIds.length;++r)n.userIds[r]=l.proteus.QualifiedUserId.toObject(e.userIds[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),e}(),o.OtrAssetMeta=function(){function e(e){if(this.recipients=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sender=null,e.prototype.recipients=u.emptyArray,e.prototype.isInline=!1,e.prototype.nativePush=!0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=c.create()),l.proteus.ClientId.encode(e.sender,t.uint32(10).fork()).ldelim(),null!=e.recipients&&e.recipients.length)for(var n=0;n<e.recipients.length;++n)l.proteus.UserEntry.encode(e.recipients[n],t.uint32(18).fork()).ldelim();return null!=e.isInline&&Object.hasOwnProperty.call(e,"isInline")&&t.uint32(24).bool(e.isInline),null!=e.nativePush&&Object.hasOwnProperty.call(e,"nativePush")&&t.uint32(32).bool(e.nativePush),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.proteus.OtrAssetMeta;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sender=l.proteus.ClientId.decode(e,e.uint32());break;case 2:r.recipients&&r.recipients.length||(r.recipients=[]),r.recipients.push(l.proteus.UserEntry.decode(e,e.uint32()));break;case 3:r.isInline=e.bool();break;case 4:r.nativePush=e.bool();break;default:e.skipType(7&i)}}if(!r.hasOwnProperty("sender"))throw u.ProtocolError("missing required 'sender'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof a||(e=new a(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(n=l.proteus.ClientId.verify(e.sender))return"sender."+n;if(null!=e.recipients&&e.hasOwnProperty("recipients")){if(!Array.isArray(e.recipients))return"recipients: array expected";for(var t=0;t<e.recipients.length;++t){var n;if(n=l.proteus.UserEntry.verify(e.recipients[t]))return"recipients."+n}}return null!=e.isInline&&e.hasOwnProperty("isInline")&&"boolean"!=typeof e.isInline?"isInline: boolean expected":null!=e.nativePush&&e.hasOwnProperty("nativePush")&&"boolean"!=typeof e.nativePush?"nativePush: boolean expected":null},e.fromObject=function(e){if(e instanceof l.proteus.OtrAssetMeta)return e;var t=new l.proteus.OtrAssetMeta;if(null!=e.sender){if("object"!=typeof e.sender)throw TypeError(".proteus.OtrAssetMeta.sender: object expected");t.sender=l.proteus.ClientId.fromObject(e.sender)}if(e.recipients){if(!Array.isArray(e.recipients))throw TypeError(".proteus.OtrAssetMeta.recipients: array expected");t.recipients=[];for(var n=0;n<e.recipients.length;++n){if("object"!=typeof e.recipients[n])throw TypeError(".proteus.OtrAssetMeta.recipients: object expected");t.recipients[n]=l.proteus.UserEntry.fromObject(e.recipients[n])}}return null!=e.isInline&&(t.isInline=Boolean(e.isInline)),null!=e.nativePush&&(t.nativePush=Boolean(e.nativePush)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.recipients=[]),t.defaults&&(n.sender=null,n.isInline=!1,n.nativePush=!0),null!=e.sender&&e.hasOwnProperty("sender")&&(n.sender=l.proteus.ClientId.toObject(e.sender,t)),e.recipients&&e.recipients.length){n.recipients=[];for(var r=0;r<e.recipients.length;++r)n.recipients[r]=l.proteus.UserEntry.toObject(e.recipients[r],t)}return null!=e.isInline&&e.hasOwnProperty("isInline")&&(n.isInline=e.isInline),null!=e.nativePush&&e.hasOwnProperty("nativePush")&&(n.nativePush=e.nativePush),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e}(),o),e.exports=l},function(e,t,n){"use strict";e.exports=d;var r,i=n(2),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var f=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function E(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function O(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=f(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},h.prototype=Object.create(c.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(E,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(E,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(E,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(O,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(O,4,t.lo)._push(O,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=f(),r._configure()}},function(e,t,n){"use strict";e.exports=c;var r,i=n(2),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function f(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=d(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(79),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConversationRoleName=void 0,function(e){e.WIRE_ADMIN="wire_admin",e.WIRE_MEMBER="wire_member"}(t.DefaultConversationRoleName||(t.DefaultConversationRoleName={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationFullError=t.ConversationCodeNotFoundError=t.ConversationLegalholdMissingConsentError=t.ConversationOperationError=t.ConversationIsUnknownError=t.ConversationError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationError"}}t.ConversationError=i;t.ConversationIsUnknownError=class extends i{constructor(e,t=r.BackendErrorLabel.CLIENT_ERROR,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationIsUnknownError"}};t.ConversationOperationError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_OPERATION,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationOperationError"}};t.ConversationLegalholdMissingConsentError=class extends i{constructor(e,t=r.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT,n=r.StatusCode.PRECONDITION_FAILED){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationLegalholdConsentNeededError"}};t.ConversationCodeNotFoundError=class extends i{constructor(e,t=r.BackendErrorLabel.NO_CONVERSATION_CODE,n=r.StatusCode.NOT_FOUND){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationCodeNotFoundError"}};t.ConversationFullError=class extends i{constructor(e,t=r.BackendErrorLabel.TOO_MANY_MEMBERS,n=r.StatusCode.NOT_FOUND){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationFullError"}}},function(e,t,n){"use strict";function r(e){return Array.from(new Set(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.filterFalsy=t.flatten=t.removeDuplicates=t.getIntersection=t.getDifference=t.getDeduplicatedUnion=t.chunk=void 0,t.chunk=function(e,t){const n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(e.slice(r,r+t));return n},t.getDeduplicatedUnion=function(e,t){return r(e.concat(t))},t.getDifference=function(e,t){return e.filter(e=>!t.includes(e))},t.getIntersection=function(e,t){return e.filter(e=>t.includes(e))},t.removeDuplicates=r;t.flatten=e=>[].concat(...e),t.filterFalsy=function(e){return Boolean(e)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceNotFoundError=t.InvalidInvitationCodeError=t.InviteEmailInUseError=t.TeamError=t.ServiceAPI=t.PaymentAPI=t.TeamAPI=t.Role=t.Permissions=t.MemberAPI=t.LegalHoldAPI=t.TeamInvitationAPI=void 0;var o=n(98);Object.defineProperty(t,"TeamInvitationAPI",{enumerable:!0,get:function(){return o.TeamInvitationAPI}});var s=n(169);Object.defineProperty(t,"LegalHoldAPI",{enumerable:!0,get:function(){return s.LegalHoldAPI}});var a=n(174);Object.defineProperty(t,"MemberAPI",{enumerable:!0,get:function(){return a.MemberAPI}}),Object.defineProperty(t,"Permissions",{enumerable:!0,get:function(){return a.Permissions}}),Object.defineProperty(t,"Role",{enumerable:!0,get:function(){return a.Role}});var c=n(10);Object.defineProperty(t,"TeamAPI",{enumerable:!0,get:function(){return c.TeamAPI}});var u=n(181);Object.defineProperty(t,"PaymentAPI",{enumerable:!0,get:function(){return u.PaymentAPI}});var l=n(194);Object.defineProperty(t,"ServiceAPI",{enumerable:!0,get:function(){return l.ServiceAPI}});var d=n(200);Object.defineProperty(t,"TeamError",{enumerable:!0,get:function(){return d.TeamError}}),Object.defineProperty(t,"InviteEmailInUseError",{enumerable:!0,get:function(){return d.InviteEmailInUseError}}),Object.defineProperty(t,"InvalidInvitationCodeError",{enumerable:!0,get:function(){return d.InvalidInvitationCodeError}}),Object.defineProperty(t,"ServiceNotFoundError",{enumerable:!0,get:function(){return d.ServiceNotFoundError}}),i(n(201),t),i(n(208),t),i(n(212),t),i(n(40),t),i(n(217),t)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(1);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(1),i=n(108),o=n(109),s=n(27),a=n(110),c=n(113),u=n(114),l=n(30);e.exports=function(e){return new Promise((function(t,n){var d=e.data,f=e.headers,p=e.responseType;r.isFormData(d)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",O=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(E+":"+O)}var y=a(e.baseURL,e.url);function _(){if(h){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,o={data:p&&"text"!==p&&"json"!==p?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};i(t,n,o),h=null}}if(h.open(e.method.toUpperCase(),s(y,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,"onloadend"in h?h.onloadend=_:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(_)},h.onabort=function(){h&&(n(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||u(y))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;S&&(f[e.xsrfHeaderName]=S)}"setRequestHeader"in h&&r.forEach(f,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),p&&"json"!==p&&(h.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),d||(d=null),h.send(d)}))}},function(e,t,n){"use strict";var r=n(28);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(o,u),r.forEach(s,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(a,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=i.concat(o).concat(s).concat(a),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(d,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEAMS_SUPPORTED_LANGUAGES=t.TEAMS_DEFAULT_LANGUAGE=t.WEBSITE_SUPPORTED_LANGUAGES=t.WEBSITE_DEFAULT_LANGUAGE=t.ACCOUNT_PAGES_SUPPORTED_LANGUAGES=t.ACCOUNT_PAGES_DEFAULT_LANGUAGE=t.LANGUAGE_QUERY_PARAMETER=t.WEBAPP_SUPPORTED_BROWSERS=t.BROWSER=void 0,t.BROWSER={CHROME:"chrome",CHROMIUM:"chromium",EDGE:"edge",ELECTRON:"electron",FIREFOX:"firefox",IE:"ie",MS_EDGE:"microsoft edge",OPERA:"opera",SAFARI:"safari"},t.WEBAPP_SUPPORTED_BROWSERS={[t.BROWSER.CHROME]:{major:56,minor:0},[t.BROWSER.CHROMIUM]:{major:56,minor:0},[t.BROWSER.FIREFOX]:{major:60,minor:0},[t.BROWSER.EDGE]:{major:15,minor:0},[t.BROWSER.MS_EDGE]:{major:15,minor:0},[t.BROWSER.ELECTRON]:{major:1,minor:6},[t.BROWSER.OPERA]:{major:43,minor:0}},t.LANGUAGE_QUERY_PARAMETER="hl",t.ACCOUNT_PAGES_DEFAULT_LANGUAGE="en-US",t.ACCOUNT_PAGES_SUPPORTED_LANGUAGES=[t.ACCOUNT_PAGES_DEFAULT_LANGUAGE,"de-DE"],t.WEBSITE_DEFAULT_LANGUAGE="en",t.WEBSITE_SUPPORTED_LANGUAGES=[t.WEBSITE_DEFAULT_LANGUAGE,"de"],t.TEAMS_DEFAULT_LANGUAGE="en",t.TEAMS_SUPPORTED_LANGUAGES=[t.TEAMS_DEFAULT_LANGUAGE,"de"]},function(e,t,n){"use strict";function r(e){return Math.floor(Math.random()*(e+1))}Object.defineProperty(t,"__esModule",{value:!0}),t.randomInt=t.randomArrayElement=void 0,t.randomArrayElement=function(e){return e[r(e.length-1)]},t.randomInt=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestCancellationError=t.UnconnectedUserError=t.UserIsUnknownError=t.UserError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="UserError"}}t.UserError=i;t.UserIsUnknownError=class extends i{constructor(e,t=r.BackendErrorLabel.CLIENT_ERROR,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="UserIsUnknownError"}};t.UnconnectedUserError=class extends i{constructor(e,t=r.BackendErrorLabel.NOT_CONNECTED,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="UnconnectedUserError"}};t.RequestCancellationError=class extends i{constructor(e,t=r.SyntheticErrorLabel.REQUEST_CANCELLED,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestCancellationError"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvitationMultipleError=t.InvitationNotFoundError=t.InvitationPhoneExistsError=t.InvitationEmailExistsError=t.InvitationInvalidPhoneError=t.InvitationInvalidEmailError=t.InvitationError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationError"}}t.InvitationError=i;t.InvitationInvalidEmailError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_EMAIL,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationInvalidEmailError"}};t.InvitationInvalidPhoneError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_PHONE,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationInvalidPhoneError"}};t.InvitationEmailExistsError=class extends i{constructor(e,t=r.BackendErrorLabel.INVITE_EMAIL_EXISTS,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationEmailExistsError"}};t.InvitationPhoneExistsError=class extends i{constructor(e,t=r.BackendErrorLabel.PHONE_EXISTS,n=r.StatusCode.CONFLICT){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationPhoneExistsError"}};t.InvitationNotFoundError=class extends i{constructor(e,t=r.SyntheticErrorLabel.INVITATION_NOT_FOUND,n=r.StatusCode.NOT_FOUND){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationNotFoundError"}};t.InvitationMultipleError=class extends i{constructor(e,t=r.SyntheticErrorLabel.INVITATION_MULTIPLE_FOUND,n=r.StatusCode.CONFLICT){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvitationMultipleError"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combinePermissions=t.hasPermissions=t.Permissions=void 0,function(e){e[e.CREATE_CONVERSATION=1]="CREATE_CONVERSATION",e[e.DELETE_CONVERSATION=2]="DELETE_CONVERSATION",e[e.ADD_TEAM_MEMBER=4]="ADD_TEAM_MEMBER",e[e.REMOVE_TEAM_MEMBER=8]="REMOVE_TEAM_MEMBER",e[e.ADD_CONVERSATION_MEMBER=16]="ADD_CONVERSATION_MEMBER",e[e.REMOVE_CONVERSATION_MEMBER=32]="REMOVE_CONVERSATION_MEMBER",e[e.GET_BILLING=64]="GET_BILLING",e[e.SET_BILLING=128]="SET_BILLING",e[e.SET_TEAM_DATA=256]="SET_TEAM_DATA",e[e.GET_MEMBER_PERMISSIONS=512]="GET_MEMBER_PERMISSIONS",e[e.GET_TEAM_CONVERSATIONS=1024]="GET_TEAM_CONVERSATIONS",e[e.DELETE_TEAM=2048]="DELETE_TEAM",e[e.SET_MEMBER_PERMISSIONS=4096]="SET_MEMBER_PERMISSIONS"}(t.Permissions||(t.Permissions={}));t.hasPermissions=(e,t)=>Number.isSafeInteger(e)&&e>0&&(e&t)===t;t.combinePermissions=e=>e.reduce((e,t)=>e|t,0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(214),t),i(n(215),t),i(n(216),t),i(n(41),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureLockedError=t.InvalidAppLockTimeoutError=t.FeatureError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,i.prototype),this.name="FeatureError"}}t.FeatureError=i;class o extends i{constructor(e,t=r.BackendErrorLabel.APP_LOCK_INVALID_TIMEOUT,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,o.prototype),this.name="InvalidAppLockTimeoutError"}}t.InvalidAppLockTimeoutError=o;class s extends i{constructor(e,t=r.BackendErrorLabel.FEATURE_LOCKED,n=r.StatusCode.CONFLICT){super(e,t,n),Object.setPrototypeOf(this,s.prototype),this.name="FeatureLockedError"}}t.FeatureLockedError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;const r=n(14);t.Item=class{constructor(){this.fn=()=>{},this.priority=r.Priority.MEDIUM,this.reject=()=>{},this.resolve=()=>{},this.retry=1/0,this.timestamp=0}toString(){return`\n    label=${this.label},\n    priority=${this.priority},\n    timestamp=${this.timestamp},\n    retry=${this.retry},\n    fn=${this.fn.toString().replace(/(\r\n|\n|\r|\s+)/gm," ")},`}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(225),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendRequestWithCookie=t.retrieveCookie=void 0;t.retrieveCookie=e=>Promise.resolve(e.data);t.sendRequestWithCookie=(e,t)=>e._sendRequest(t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(233),t),i(n(234),t),i(n(235),t),i(n(236),t),i(n(46),t),i(n(237),t),i(n(238),t),i(n(239),t),i(n(240),t),i(n(241),t),i(n(242),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCapabilityRemovedError=t.ClientError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ClientError"}}t.ClientError=i;t.ClientCapabilityRemovedError=class extends i{constructor(e,t=r.BackendErrorLabel.CLIENT_CAPABILITY_REMOVED,n=r.StatusCode.CONFLICT){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ClientCapabilityRemovedError"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordExistsError=t.ForbiddenPhoneNumberError=t.InvalidPhoneNumberError=t.MissingCookieError=t.InvalidTokenError=t.TokenExpiredError=t.IdentifierExistsError=t.SuspendedAccountError=t.InvalidCredentialsError=t.LoginTooFrequentError=t.AuthenticationError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="AuthenticationError"}}t.AuthenticationError=i;t.LoginTooFrequentError=class extends i{constructor(e,t=r.BackendErrorLabel.CLIENT_ERROR,n=r.StatusCode.TOO_MANY_REQUESTS){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="LoginTooFrequentError"}};t.InvalidCredentialsError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_CREDENTIALS,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvalidCredentialsError"}};t.SuspendedAccountError=class extends i{constructor(e,t=r.BackendErrorLabel.SUSPENDED_ACCOUNT,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="SuspendedAccountError"}};t.IdentifierExistsError=class extends i{constructor(e,t=r.BackendErrorLabel.KEY_EXISTS,n=r.StatusCode.CONFLICT){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="IdentifierExistsError"}};t.TokenExpiredError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_CREDENTIALS,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="TokenExpiredError"}};t.InvalidTokenError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_CREDENTIALS,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvalidTokenError"}};t.MissingCookieError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_CREDENTIALS,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="MissingCookieError"}};t.InvalidPhoneNumberError=class extends i{constructor(e,t=r.SyntheticErrorLabel.INVALID_PHONE_NUMBER,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvalidPhoneNumberError"}};t.ForbiddenPhoneNumberError=class extends i{constructor(e,t=r.SyntheticErrorLabel.FORBIDDEN_PHONE_NUMBER,n=r.StatusCode.FORBIDDEN){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ForbiddenPhoneNumberError"}};t.PasswordExistsError=class extends i{constructor(e,t=r.BackendErrorLabel.PASSWORD_EXISTS,n=r.StatusCode.UNAUTHORIZED){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="PasswordExistsError"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CookieStore=void 0;const r=n(7),i=n(6);var o;!function(e){e.COOKIE_REFRESH="CookieStore.TOPIC.COOKIE_REFRESH"}(o||(o={}));class s{static getCookie(){return s.cookie}static emit(){r.Runtime.isNode()&&s.emitter.emit(s.TOPIC.COOKIE_REFRESH,s.cookie)}static setCookie(e){s.cookie=e,s.emit()}static deleteCookie(){s.cookie=void 0,s.emit()}}t.CookieStore=s,s.emitter=new i.EventEmitter,s.TOPIC=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetRetentionPolicy=void 0,function(e){e.ETERNAL="eternal",e.ETERNAL_INFREQUENT_ACCESS="eternal-infrequent_access",e.EXPIRING="expiring",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(t.AssetRetentionPolicy||(t.AssetRetentionPolicy={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.concatToBuffer=t.base64MD5FromBuffer=t.bufferToString=void 0;const s=o(n(256));t.bufferToString=e=>{let t="";const n=new Uint8Array(e);for(let e=0;e<n.length;e++)t+=String.fromCharCode(n[e]);return t};t.base64MD5FromBuffer=e=>window.btoa(s.ArrayBuffer.hash(e,!0));t.concatToBuffer=(...e)=>new Blob(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidToken=t.isValidUUID=void 0;t.isValidUUID=e=>/^[A-Za-z0-9-]+$/.test(e);t.isValidToken=e=>/^[A-Za-z0-9+/=_\-]+$/.test(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionLegalholdMissingConsentError=t.ConnectionError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConnectionError"}}t.ConnectionError=i;t.ConnectionLegalholdMissingConsentError=class extends i{constructor(e,t=r.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT,n=r.StatusCode.PRECONDITION_FAILED){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConnectionLegalholdConsentNeededError"}}},function(e,t,n){"use strict";n.r(t),n.d(t,"getStatusCode",(function(){return ae})),n.d(t,"getReasonPhrase",(function(){return se})),n.d(t,"getStatusText",(function(){return le})),n.d(t,"StatusCodes",(function(){return ce})),n.d(t,"ReasonPhrases",(function(){return ue})),n.d(t,"ACCEPTED",(function(){return r})),n.d(t,"BAD_GATEWAY",(function(){return i})),n.d(t,"BAD_REQUEST",(function(){return o})),n.d(t,"CONFLICT",(function(){return s})),n.d(t,"CONTINUE",(function(){return a})),n.d(t,"CREATED",(function(){return c})),n.d(t,"EXPECTATION_FAILED",(function(){return u})),n.d(t,"FAILED_DEPENDENCY",(function(){return l})),n.d(t,"FORBIDDEN",(function(){return d})),n.d(t,"GATEWAY_TIMEOUT",(function(){return f})),n.d(t,"GONE",(function(){return p})),n.d(t,"HTTP_VERSION_NOT_SUPPORTED",(function(){return h})),n.d(t,"IM_A_TEAPOT",(function(){return E})),n.d(t,"INSUFFICIENT_SPACE_ON_RESOURCE",(function(){return O})),n.d(t,"INSUFFICIENT_STORAGE",(function(){return y})),n.d(t,"INTERNAL_SERVER_ERROR",(function(){return _})),n.d(t,"LENGTH_REQUIRED",(function(){return S})),n.d(t,"LOCKED",(function(){return g})),n.d(t,"METHOD_FAILURE",(function(){return b})),n.d(t,"METHOD_NOT_ALLOWED",(function(){return R})),n.d(t,"MOVED_PERMANENTLY",(function(){return m})),n.d(t,"MOVED_TEMPORARILY",(function(){return v})),n.d(t,"MULTI_STATUS",(function(){return T})),n.d(t,"MULTIPLE_CHOICES",(function(){return I})),n.d(t,"NETWORK_AUTHENTICATION_REQUIRED",(function(){return A})),n.d(t,"NO_CONTENT",(function(){return N})),n.d(t,"NON_AUTHORITATIVE_INFORMATION",(function(){return L})),n.d(t,"NOT_ACCEPTABLE",(function(){return C})),n.d(t,"NOT_FOUND",(function(){return P})),n.d(t,"NOT_IMPLEMENTED",(function(){return w})),n.d(t,"NOT_MODIFIED",(function(){return U})),n.d(t,"OK",(function(){return M})),n.d(t,"PARTIAL_CONTENT",(function(){return D})),n.d(t,"PAYMENT_REQUIRED",(function(){return j})),n.d(t,"PERMANENT_REDIRECT",(function(){return k})),n.d(t,"PRECONDITION_FAILED",(function(){return $})),n.d(t,"PRECONDITION_REQUIRED",(function(){return B})),n.d(t,"PROCESSING",(function(){return x})),n.d(t,"PROXY_AUTHENTICATION_REQUIRED",(function(){return F})),n.d(t,"REQUEST_HEADER_FIELDS_TOO_LARGE",(function(){return G})),n.d(t,"REQUEST_TIMEOUT",(function(){return V})),n.d(t,"REQUEST_TOO_LONG",(function(){return H})),n.d(t,"REQUEST_URI_TOO_LONG",(function(){return J})),n.d(t,"REQUESTED_RANGE_NOT_SATISFIABLE",(function(){return W})),n.d(t,"RESET_CONTENT",(function(){return K})),n.d(t,"SEE_OTHER",(function(){return Y})),n.d(t,"SERVICE_UNAVAILABLE",(function(){return q})),n.d(t,"SWITCHING_PROTOCOLS",(function(){return Q})),n.d(t,"TEMPORARY_REDIRECT",(function(){return X})),n.d(t,"TOO_MANY_REQUESTS",(function(){return z})),n.d(t,"UNAUTHORIZED",(function(){return Z})),n.d(t,"UNPROCESSABLE_ENTITY",(function(){return ee})),n.d(t,"UNSUPPORTED_MEDIA_TYPE",(function(){return te})),n.d(t,"USE_PROXY",(function(){return ne}));var r=202,i=502,o=400,s=409,a=100,c=201,u=417,l=424,d=403,f=504,p=410,h=505,E=418,O=419,y=507,_=500,S=411,g=423,b=420,R=405,m=301,v=302,T=207,I=300,A=511,N=204,L=203,C=406,P=404,w=501,U=304,M=200,D=206,j=402,k=308,$=412,B=428,x=102,F=407,G=431,V=408,H=413,J=414,W=416,K=205,Y=303,q=503,Q=101,X=307,z=429,Z=401,ee=422,te=415,ne=305,re={ACCEPTED:r,BAD_GATEWAY:i,BAD_REQUEST:o,CONFLICT:s,CONTINUE:a,CREATED:c,EXPECTATION_FAILED:u,FORBIDDEN:d,GATEWAY_TIMEOUT:f,GONE:p,HTTP_VERSION_NOT_SUPPORTED:h,IM_A_TEAPOT:E,INSUFFICIENT_SPACE_ON_RESOURCE:O,INSUFFICIENT_STORAGE:y,INTERNAL_SERVER_ERROR:_,LENGTH_REQUIRED:S,LOCKED:g,METHOD_FAILURE:b,METHOD_NOT_ALLOWED:R,MOVED_PERMANENTLY:m,MOVED_TEMPORARILY:v,MULTI_STATUS:T,MULTIPLE_CHOICES:I,NETWORK_AUTHENTICATION_REQUIRED:A,NO_CONTENT:N,NON_AUTHORITATIVE_INFORMATION:L,NOT_ACCEPTABLE:C,NOT_FOUND:P,NOT_IMPLEMENTED:w,NOT_MODIFIED:U,OK:M,PARTIAL_CONTENT:D,PAYMENT_REQUIRED:j,PERMANENT_REDIRECT:k,PRECONDITION_FAILED:$,PRECONDITION_REQUIRED:B,PROCESSING:x,PROXY_AUTHENTICATION_REQUIRED:F,REQUEST_HEADER_FIELDS_TOO_LARGE:G,REQUEST_TIMEOUT:V,REQUEST_TOO_LONG:H,REQUEST_URI_TOO_LONG:J,REQUESTED_RANGE_NOT_SATISFIABLE:W,RESET_CONTENT:K,SEE_OTHER:Y,SERVICE_UNAVAILABLE:q,SWITCHING_PROTOCOLS:Q,TEMPORARY_REDIRECT:X,TOO_MANY_REQUESTS:z,UNAUTHORIZED:Z,UNPROCESSABLE_ENTITY:ee,UNSUPPORTED_MEDIA_TYPE:te,USE_PROXY:ne},ie={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Internal Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",451:"Unavailable For Legal Reasons",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy"},oe={Accepted:202,"Bad Gateway":502,"Bad Request":400,Conflict:409,Continue:100,Created:201,"Expectation Failed":417,"Failed Dependency":424,Forbidden:403,"Gateway Timeout":504,Gone:410,"HTTP Version Not Supported":505,"I'm a teapot":418,"Insufficient Space on Resource":419,"Insufficient Storage":507,"Internal Server Error":500,"Length Required":411,Locked:423,"Method Failure":420,"Method Not Allowed":405,"Moved Permanently":301,"Moved Temporarily":302,"Multi-Status":207,"Multiple Choices":300,"Network Authentication Required":511,"No Content":204,"Non Authoritative Information":203,"Not Acceptable":406,"Not Found":404,"Not Implemented":501,"Not Modified":304,OK:200,"Partial Content":206,"Payment Required":402,"Permanent Redirect":308,"Precondition Failed":412,"Precondition Required":428,Processing:102,"Proxy Authentication Required":407,"Request Header Fields Too Large":431,"Request Timeout":408,"Request Entity Too Large":413,"Request-URI Too Long":414,"Requested Range Not Satisfiable":416,"Reset Content":205,"See Other":303,"Service Unavailable":503,"Switching Protocols":101,"Temporary Redirect":307,"Too Many Requests":429,Unauthorized:401,"Unavailable For Legal Reasons":451,"Unprocessable Entity":422,"Unsupported Media Type":415,"Use Proxy":305};function se(e){var t=ie[e.toString()];if(!t)throw new Error("Status code does not exist: "+e);return t}function ae(e){var t=oe[e];if(!t)throw new Error("Reason phrase does not exist: "+e);return t}var ce,ue,le=se;!function(e){e[e.ACCEPTED=202]="ACCEPTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.CONFLICT=409]="CONFLICT",e[e.CONTINUE=100]="CONTINUE",e[e.CREATED=201]="CREATED",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.GONE=410]="GONE",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.IM_A_TEAPOT=418]="IM_A_TEAPOT",e[e.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.LOCKED=423]="LOCKED",e[e.METHOD_FAILURE=420]="METHOD_FAILURE",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.OK=200]="OK",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.PROCESSING=102]="PROCESSING",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",e[e.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.USE_PROXY=305]="USE_PROXY"}(ce||(ce={})),function(e){e.ACCEPTED="Accepted",e.BAD_GATEWAY="Bad Gateway",e.BAD_REQUEST="Bad Request",e.CONFLICT="Conflict",e.CONTINUE="Continue",e.CREATED="Created",e.EXPECTATION_FAILED="Expectation Failed",e.FAILED_DEPENDENCY="Failed Dependency",e.FORBIDDEN="Forbidden",e.GATEWAY_TIMEOUT="Gateway Timeout",e.GONE="Gone",e.HTTP_VERSION_NOT_SUPPORTED="HTTP Version Not Supported",e.IM_A_TEAPOT="I'm a teapot",e.INSUFFICIENT_SPACE_ON_RESOURCE="Insufficient Space on Resource",e.INSUFFICIENT_STORAGE="Insufficient Storage",e.INTERNAL_SERVER_ERROR="Internal Server Error",e.LENGTH_REQUIRED="Length Required",e.LOCKED="Locked",e.METHOD_FAILURE="Method Failure",e.METHOD_NOT_ALLOWED="Method Not Allowed",e.MOVED_PERMANENTLY="Moved Permanently",e.MOVED_TEMPORARILY="Moved Temporarily",e.MULTI_STATUS="Multi-Status",e.MULTIPLE_CHOICES="Multiple Choices",e.NETWORK_AUTHENTICATION_REQUIRED="Network Authentication Required",e.NO_CONTENT="No Content",e.NON_AUTHORITATIVE_INFORMATION="Non Authoritative Information",e.NOT_ACCEPTABLE="Not Acceptable",e.NOT_FOUND="Not Found",e.NOT_IMPLEMENTED="Not Implemented",e.NOT_MODIFIED="Not Modified",e.OK="OK",e.PARTIAL_CONTENT="Partial Content",e.PAYMENT_REQUIRED="Payment Required",e.PERMANENT_REDIRECT="Permanent Redirect",e.PRECONDITION_FAILED="Precondition Failed",e.PRECONDITION_REQUIRED="Precondition Required",e.PROCESSING="Processing",e.PROXY_AUTHENTICATION_REQUIRED="Proxy Authentication Required",e.REQUEST_HEADER_FIELDS_TOO_LARGE="Request Header Fields Too Large",e.REQUEST_TIMEOUT="Request Timeout",e.REQUEST_TOO_LONG="Request Entity Too Large",e.REQUEST_URI_TOO_LONG="Request-URI Too Long",e.REQUESTED_RANGE_NOT_SATISFIABLE="Requested Range Not Satisfiable",e.RESET_CONTENT="Reset Content",e.SEE_OTHER="See Other",e.SERVICE_UNAVAILABLE="Service Unavailable",e.SWITCHING_PROTOCOLS="Switching Protocols",e.TEMPORARY_REDIRECT="Temporary Redirect",e.TOO_MANY_REQUESTS="Too Many Requests",e.UNAUTHORIZED="Unauthorized",e.UNAVAILABLE_FOR_LEGAL_REASONS="Unavailable For Legal Reasons",e.UNPROCESSABLE_ENTITY="Unprocessable Entity",e.UNSUPPORTED_MEDIA_TYPE="Unsupported Media Type",e.USE_PROXY="Use Proxy"}(ue||(ue={}));var de=function(){return(de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};t.default=de(de({},re),{getStatusCode:ae,getStatusText:le})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.APIClient=void 0;const i=n(6),o=r(n(3)),s=n(8),a=n(252),c=n(254),u=n(259),l=n(261),d=n(45),f=n(263),p=n(17),h=n(48),E=n(270),O=n(0),y=n(275),_=n(43),S=n(15),g=n(283),b=n(294),R=n(300),m=n(25),v=n(5),T=n(302),I=n(307),A=n(308),{version:N}=n(309);var L;!function(e){e.ACCESS_TOKEN_REFRESH="APIClient.TOPIC.ACCESS_TOKEN_REFRESH",e.COOKIE_REFRESH="APIClient.TOPIC.COOKIE_REFRESH",e.ON_LOGOUT="APIClient.TOPIC.ON_LOGOUT"}(L||(L={}));const C={urls:u.Backend.PRODUCTION};class P extends i.EventEmitter{constructor(e){super(),this.config=Object.assign(Object.assign({},C),e),this.accessTokenStore=new s.AccessTokenStore,this.accessTokenStore.on(s.AccessTokenStore.TOPIC.ACCESS_TOKEN_REFRESH,e=>this.emit(P.TOPIC.ACCESS_TOKEN_REFRESH,e)),h.CookieStore.emitter.on(h.CookieStore.TOPIC.COOKIE_REFRESH,e=>this.emit(P.TOPIC.COOKIE_REFRESH,e)),this.logger=(0,o.default)("@wireapp/api-client/Client",{logger:console,markdown:!1});const t=new O.HttpClient(this.config,this.accessTokenStore),n=new S.WebSocketClient(this.config.urls.ws,t),r=async e=>{try{await this.logout({skipLogoutRequest:!0})}finally{this.emit(P.TOPIC.ON_LOGOUT,e)}};n.on(S.WebSocketClient.TOPIC.ON_INVALID_TOKEN,r),t.on(O.HttpClient.TOPIC.ON_INVALID_TOKEN,r),this.transport={http:t,ws:n},this.backendFeatures=this.computeBackendFeatures(0),this.api=this.configureApis(this.backendFeatures)}configureApis(e){this.logger.info("configuring APIs with config",e);const t=new c.AssetAPI(this.transport.http,e);return{account:new a.AccountAPI(this.transport.http),asset:t,auth:new s.AuthAPI(this.transport.http),services:new R.ServicesAPI(this.transport.http,t),broadcast:new l.BroadcastAPI(this.transport.http),client:new d.ClientAPI(this.transport.http),connection:new f.ConnectionAPI(this.transport.http,e),conversation:new p.ConversationAPI(this.transport.http,e),giphy:new E.GiphyAPI(this.transport.http),notification:new y.NotificationAPI(this.transport.http),self:new g.SelfAPI(this.transport.http),serviceProvider:new b.ServiceProviderAPI(this.transport.http),teams:{conversation:new m.TeamConversationAPI(this.transport.http),feature:new m.FeatureAPI(this.transport.http),identityProvider:new m.IdentityProviderAPI(this.transport.http),invitation:new m.TeamInvitationAPI(this.transport.http),legalhold:new m.LegalHoldAPI(this.transport.http),member:new m.MemberAPI(this.transport.http),payment:new m.PaymentAPI(this.transport.http),billing:new m.BillingAPI(this.transport.http),scim:new A.ScimAPI(this.transport.http),search:new T.TeamSearchAPI(this.transport.http),service:new m.ServiceAPI(this.transport.http),team:new m.TeamAPI(this.transport.http)},user:new v.UserAPI(this.transport.http,e)}}computeBackendFeatures(e,t){return{version:e,federationEndpoints:e>0,isFederated:(null==t?void 0:t.federation)||!1}}async useVersion(e){var t;if(1===e.length&&0===e[0])return this.computeBackendFeatures(0);let n={supported:[0]};try{n=(await this.transport.http.sendRequest({url:"/api-version"})).data}catch(e){}const r=null!==(t=n.development)&&void 0!==t?t:[],i=n.supported.concat(r).sort().reverse().find(t=>e.includes(t));if(void 0===i)throw new Error(`Backend does not support requested versions [${e.join(", ")}] (supported versions ${n.supported.join(", ")})`);return this.backendFeatures=this.computeBackendFeatures(i,n),this.transport.http.useVersion(this.backendFeatures.version),this.api=this.configureApis(this.backendFeatures),this.backendFeatures}async init(e=d.ClientType.NONE,t){h.CookieStore.setCookie(t);const n=await this.transport.http.refreshAccessToken(),r=await this.createContext(n.user,e);return await this.accessTokenStore.updateToken(n),r}async login(e){this.context&&await this.logout();const t=await this.api.auth.postLogin(e);return this.logger.info(`Saved initial access token. It will expire in "${t.expires_in}" seconds.`,_.ObfuscationUtil.obfuscateAccessToken(t)),await this.accessTokenStore.updateToken(t),this.createContext(t.user,e.clientType)}async loginWithToken(e,t=d.ClientType.NONE){const{userId:n}=(0,I.parseAccessToken)(e),r={access_token:e,expires_in:1,token_type:"Bearer",user:n};return await this.accessTokenStore.updateToken(r),this.createContext(n,t)}async register(e,t=d.ClientType.PERMANENT){this.context&&await this.logout();const n=await this.api.auth.postRegister(e);return await this.createContext(n.id,t),this.init(t,h.CookieStore.getCookie())}async logout(e={skipLogoutRequest:!1}){try{this.disconnect("Closed by client logout"),e.skipLogoutRequest||await this.api.auth.postLogout()}catch(e){this.logger.warn(e)}h.CookieStore.deleteCookie(),await this.accessTokenStore.delete(),delete this.context}connect(e){var t;return this.transport.ws.connect(null===(t=this.context)||void 0===t?void 0:t.clientId,e)}async createContext(e,t){var n;let r=void 0;try{r=null===(n=(await this.api.self.getSelf()).qualified_id)||void 0===n?void 0:n.domain,this.logger.info(`Got self domain "${r}"`)}catch(e){this.logger.warn("Could not get self user:",e.message)}return this.context=this.context?Object.assign(Object.assign({},this.context),{clientType:t,domain:r}):{clientType:t,userId:e,domain:r},this.context}disconnect(e){this.transport.ws.disconnect(e)}get clientId(){var e;return(null===(e=this.context)||void 0===e?void 0:e.clientId)||void 0}get userId(){var e;return(null===(e=this.context)||void 0===e?void 0:e.userId)||void 0}get domain(){var e;return(null===(e=this.context)||void 0===e?void 0:e.domain)||void 0}get validatedUserId(){if(this.userId)return this.userId;throw new Error("No valid user ID.")}get validatedClientId(){if(this.clientId)return this.clientId;throw new Error("No valid client ID.")}}t.APIClient=P,P.BACKEND=u.Backend,P.TOPIC=L,P.VERSION=N},function(e,t,n){"use strict";n.r(t);var r=n(54),i=n(15);window.wireExports={APIClient:r.APIClient,WebSocketClient:i.WebSocketClient}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenStore=void 0;const i=n(6),o=r(n(3));var s;!function(e){e.ACCESS_TOKEN_REFRESH="AccessTokenStore.TOPIC.ACCESS_TOKEN_REFRESH"}(s||(s={}));class a extends i.EventEmitter{constructor(){super(),this.logger=(0,o.default)("@wireapp/api-client/AccessTokenStore",{logger:console,markdown:!1})}async delete(){this.logger.log("Deleting local access token"),this.accessToken=void 0,this.tokenExpirationDate=void 0}async updateToken(e){return this.accessToken!==e&&(this.logger.log("Saving local access token"),this.tokenExpirationDate=Date.now()+1e3*e.expires_in,this.accessToken=e,this.emit(a.TOPIC.ACCESS_TOKEN_REFRESH,this.accessToken)),this.accessToken}}t.AccessTokenStore=a,a.TOPIC=s},function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthAPI=void 0;const i=n(0),o=n(45),s=n(47),a=n(44);class c{constructor(e){this.client=e}getCookies(e){const t={method:"get",params:{},url:c.URL.COOKIES};return e&&(t.params.labels=e.join(",")),this.client.sendRequest(t)}async postCookiesRemove(e,t,n){const r={data:{ids:n,labels:t,password:e},method:"post",url:`${c.URL.COOKIES}/${c.URL.REMOVE}`,withCredentials:!0};await this.client.sendJSON(r)}async postLogin(e){const{verificationCode:t}=e,n=r(e,["verificationCode"]),i={data:Object.assign(Object.assign(Object.assign({},n),t&&{verification_code:t}),{clientType:void 0,password:e.password?String(e.password):void 0}),method:"post",params:{persist:e.clientType===o.ClientType.PERMANENT},url:c.URL.LOGIN,withCredentials:!0},s=await this.client.sendJSON(i);return(0,a.retrieveCookie)(s)}async postLoginSend(e){const t={data:Object.assign(Object.assign({},{force:!1}),e),method:"post",url:`${c.URL.LOGIN}/${c.URL.SEND}`};try{return(await this.client.sendJSON(t)).data}catch(e){const t=e;switch(t.label){case i.BackendErrorLabel.BAD_REQUEST:throw new s.InvalidPhoneNumberError(t.message);case i.BackendErrorLabel.INVALID_PHONE:case i.BackendErrorLabel.UNAUTHORIZED:throw new s.ForbiddenPhoneNumberError(t.message);case i.BackendErrorLabel.PASSWORD_EXISTS:throw new s.PasswordExistsError(t.message)}throw e}}async postLogout(){const e={method:"post",url:`${c.URL.ACCESS}/${c.URL.LOGOUT}`,withCredentials:!0};await(0,a.sendRequestWithCookie)(this.client,e)}async postRegister(e){const t={data:e,method:"post",url:c.URL.REGISTER,withCredentials:!0},n=await this.client.sendJSON(t);return(0,a.retrieveCookie)(n)}async putEmail(e){const t={data:e,method:"put",url:`${c.URL.ACCESS}/${c.URL.SELF}/${c.URL.EMAIL}`,withCredentials:!0};await this.client.sendJSON(t)}async headInitiateLogin(e){const t={method:"head",url:`${c.URL.SSO}/${c.URL.INITIATE_LOGIN}/${e}`};await this.client.sendJSON(t)}}t.AuthAPI=c,c.URL={ACCESS:"/access",COOKIES:"/cookies",EMAIL:"email",INITIATE_LOGIN:"initiate-login",LOGIN:"/login",LOGOUT:"logout",REGISTER:"/register",REMOVE:"remove",SELF:"self",SEND:"send",SSO:"/sso"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackendError=void 0;const r=n(16);class i extends Error{constructor(e,t=r.SyntheticErrorLabel.UNKNOWN,n){super(e),this.code=n,this.label=t,this.message=e,Object.setPrototypeOf(this,new.target.prototype)}}t.BackendError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackendErrorMapper=void 0;const r=n(8),i=n(17),o=n(25),s=n(5),a=n(0);class c{static get ERRORS(){return{[a.StatusCode.BAD_REQUEST]:{[a.BackendErrorLabel.CLIENT_ERROR]:{"Error in $: Failed reading: satisfy":new a.BackendError("Wrong set of parameters."),"[path] 'cnv' invalid: Failed reading: Invalid UUID":new i.ConversationIsUnknownError("Conversation ID is unknown."),"[path] 'usr' invalid: Failed reading: Invalid UUID":new s.UserIsUnknownError("User ID is unknown.")},[a.BackendErrorLabel.INVALID_INVITATION_CODE]:{"Invalid invitation code.":new o.InvalidInvitationCodeError("Invalid invitation code.")}},[a.StatusCode.FORBIDDEN]:{[a.BackendErrorLabel.INVALID_CREDENTIALS]:{"Authentication failed.":new r.InvalidCredentialsError("Authentication failed because of invalid credentials."),"Invalid token":new r.InvalidTokenError("Authentication failed because the token is invalid."),"Missing cookie":new r.MissingCookieError("Authentication failed because the cookie is missing."),"Token expired":new r.TokenExpiredError("Authentication failed because the token is expired.")},[a.BackendErrorLabel.NOT_CONNECTED]:{"Users are not connected":new s.UnconnectedUserError("Users are not connected.")},[a.BackendErrorLabel.INVALID_OPERATION]:{"invalid operation for 1:1 conversations":new i.ConversationOperationError("Cannot leave 1:1 conversation.")},[a.BackendErrorLabel.SUSPENDED_ACCOUNT]:{"Account suspended.":new r.SuspendedAccountError("Account suspended.")}},[a.StatusCode.TOO_MANY_REQUESTS]:{[a.BackendErrorLabel.CLIENT_ERROR]:{"Logins too frequent":new r.LoginTooFrequentError("Logins too frequent. User login temporarily disabled.")}},[a.StatusCode.CONFLICT]:{[a.BackendErrorLabel.INVITE_EMAIL_EXISTS]:{"The given e-mail address is in use.":new o.InviteEmailInUseError("The given e-mail address is in use.")},[a.BackendErrorLabel.KEY_EXISTS]:{"The given e-mail address or phone number is in use.":new r.IdentifierExistsError("The given e-mail address or phone number is in use.")}},[a.StatusCode.NOT_FOUND]:{[a.BackendErrorLabel.NOT_FOUND]:{"Service not found":new o.ServiceNotFoundError("Service not found")}}}}static map(e){try{const t=c.ERRORS[Number(e.code)][e.label][e.message];return t||e}catch(t){return e}}}t.BackendErrorMapper=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONVERSATION_ACCESS=t.ACCESS_ROLE_V2=t.CONVERSATION_ACCESS_ROLE=t.CONVERSATION_TYPE=void 0,function(e){e[e.REGULAR=0]="REGULAR",e[e.SELF=1]="SELF",e[e.ONE_TO_ONE=2]="ONE_TO_ONE",e[e.CONNECT=3]="CONNECT"}(t.CONVERSATION_TYPE||(t.CONVERSATION_TYPE={})),function(e){e.ACTIVATED="activated",e.NON_ACTIVATED="non_activated",e.PRIVATE="private",e.TEAM="team"}(t.CONVERSATION_ACCESS_ROLE||(t.CONVERSATION_ACCESS_ROLE={})),function(e){e.TEAM_MEMBER="team_member",e.SERVICE="service",e.NON_TEAM_MEMBER="non_team_member",e.GUEST="guest"}(t.ACCESS_ROLE_V2||(t.ACCESS_ROLE_V2={})),function(e){e.CODE="code",e.INVITE="invite",e.LINK="link",e.PRIVATE="private"}(t.CONVERSATION_ACCESS||(t.CONVERSATION_ACCESS={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationAPI=void 0;const r=n(18),i=n(21),o=n(22),s=n(0),a=n(23),c=n(24);class u{constructor(e,t){this.client=e,this.backendFeatures=t}async deleteConversationCode(e){const t={method:"delete",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.CODE}`};return(await this.client.sendJSON(t)).data}deleteBot(e,t){return this.deleteService(e,t)}async deleteService(e,t){const n={method:"delete",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.BOTS}/${t}`};await this.client.sendJSON(n)}async deleteMember(e,t){const n="string"==typeof e?{id:e,domain:""}:e,r="string"==typeof t?{id:t,domain:""}:t,i=this.backendFeatures.federationEndpoints&&n.domain&&r.domain?`${u.URL.CONVERSATIONS}/${n.id}/${u.URL.MEMBERS}/${r.id}`:`${u.URL.CONVERSATIONS}/${n.domain}/${n.id}/${u.URL.MEMBERS}/${r.domain}/${r.id}`;return(await this.client.sendJSON({method:"delete",url:i})).data}getAllConversations(){let e=[];const t=async n=>{const{conversations:r,has_more:i}=await this.getConversations(n,u.MAX_CHUNK_SIZE);if(r.length&&(e=e.concat(r)),i){const e=r.pop();if(e)return t(e.id)}return e};return t()}async getConversationCode(e){const t={method:"GET",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.CODE}`};return(await this.client.sendJSON(t)).data}async getConversationGuestLinkFeature(e){const t={method:"get",url:`${u.URL.CONVERSATIONS}/${e}/features/conversationGuestLinks`};return(await this.client.sendJSON(t)).data}async getConversation(e){return this.backendFeatures.federationEndpoints&&"string"!=typeof e?this.getConversation_v2(e):this.getConversation_v1("string"==typeof e?e:e.id)}async getConversation_v1(e){const t={method:"get",url:`${u.URL.CONVERSATIONS}/${e}`};return(await this.client.sendJSON(t)).data}async getConversation_v2(e){const{id:t,domain:n}=e,r={method:"get",url:`${u.URL.CONVERSATIONS}/${n}/${t}`};return(await this.client.sendJSON(r)).data}async getQualifiedConversationIds(e=0){const t={data:{},method:"post",url:`${u.URL.CONVERSATIONS}/${u.URL.LIST_IDS}`};e>0&&(t.data.size=e);const n=[],r=async e=>{e&&(t.data.paging_state=e);const{data:i}=await this.client.sendJSON(t),{qualified_conversations:o,has_more:s,paging_state:a}=i;return n.push(...o),s?r(a):n};return r()}async getConversationIds(e,t){const n={method:"get",params:{size:e,start:t},url:`${u.URL.CONVERSATIONS}/${u.URL.IDS}`};return(await this.client.sendJSON(n)).data}getConversations(e,t=u.MAX_CHUNK_SIZE){return this._getConversations(e,void 0,t)}async getConversationsByQualifiedIds(e){var t,n,r,i,o,s;const a=(0,c.chunk)(e,u.MAX_CHUNK_SIZE);let l={found:[],failed:[],not_found:[]};for(const e of a){const a={data:{qualified_ids:e},method:"post",url:this.backendFeatures.version>=2?`${u.URL.CONVERSATIONS}/${u.URL.LIST}`:`${u.URL.CONVERSATIONS}/${u.URL.LIST}/${u.URL.V2}`},{data:c}=await this.client.sendJSON(a);l={found:null===(t=l.found)||void 0===t?void 0:t.concat(null!==(n=c.found)&&void 0!==n?n:[]),not_found:null===(r=l.not_found)||void 0===r?void 0:r.concat(null!==(i=c.not_found)&&void 0!==i?i:[]),failed:null===(o=l.failed)||void 0===o?void 0:o.concat(null!==(s=c.failed)&&void 0!==s?s:[])}}return l}async getConversationList(){if(!this.backendFeatures.federationEndpoints)return{found:await this.getAllConversations()};const e=await this.getQualifiedConversationIds();return await this.getConversationsByQualifiedIds(e)}async getConversationsByIds(e){let t=[];const n=async e=>{const{conversations:t}=await this._getConversations(void 0,e,u.MAX_CHUNK_SIZE);return t};for(let r=0;r<e.length;r+=u.MAX_CHUNK_SIZE){const i=e.slice(r,r+u.MAX_CHUNK_SIZE);if(i.length){const e=await n(i);e.length&&(t=t.concat(e))}}return t}async _getConversations(e,t,n=u.MAX_CHUNK_SIZE){const r={method:"get",params:{size:n,start:e},url:u.URL.CONVERSATIONS};t&&(r.params.ids=t.join(","));return(await this.client.sendJSON(r)).data}async getRoles(e){const t={method:"get",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.ROLES}`};return(await this.client.sendJSON(t)).data}async getMembershipProperties(e){const t={method:"get",url:`${u.URL.CONVERSATIONS}/${e}/self`};return(await this.client.sendJSON(t)).data}async post1to1(e){const t={data:e,method:"post",url:u.URL.CONVERSATIONS+"/one2one"};await this.client.sendJSON(t)}async postAddMembers(e,t){const n={data:t,method:"post",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.MEMBERS}`};try{return(await this.client.sendJSON(n)).data}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT:throw new a.ConversationLegalholdMissingConsentError(t.message)}throw e}}postBot(e,t,n){return this.postService(e,t,n)}async postService(e,t,n){const r={data:{provider:t,service:n},method:"post",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.BOTS}`};return(await this.client.sendJSON(r)).data}async postConversation(e){const t={data:e,method:"post",url:u.URL.CONVERSATIONS};try{return(await this.client.sendJSON(t)).data}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT:throw new a.ConversationLegalholdMissingConsentError(t.message)}throw e}}async postConversationCodeRequest(e){const t={method:"post",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.CODE}`};return(await this.client.sendJSON(t)).data}async postConversationCodeCheck(e){const t={data:e,method:"post",url:`${u.URL.CONVERSATIONS}${u.URL.CODE_CHECK}`};try{await this.client.sendJSON(t)}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.NO_CONVERSATION_CODE:throw new a.ConversationCodeNotFoundError(t.message)}throw e}}async postJoinByCode(e){const t={data:e,method:"post",url:`${u.URL.CONVERSATIONS}${u.URL.JOIN}`};try{return(await this.client.sendJSON(t)).data}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.NO_CONVERSATION_CODE:throw new a.ConversationCodeNotFoundError(t.message);case s.BackendErrorLabel.TOO_MANY_MEMBERS:throw new a.ConversationFullError(t.message)}throw e}}async getJoinByCode(e){const t={params:e,method:"get",url:`${u.URL.CONVERSATIONS}${u.URL.JOIN}`};try{return(await this.client.sendJSON(t)).data}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.NO_CONVERSATION_CODE:throw new a.ConversationCodeNotFoundError(t.message)}throw e}}async postJoin(e){const t={method:"post",url:`${u.URL.CONVERSATIONS}/${e}`};return(await this.client.sendJSON(t)).data}async postOTRMessage(e,t,n,r){if(!e)throw new i.ValidationError("Unable to send OTR message without client ID.");n||(n={recipients:{},sender:e});const o={data:n,method:"post",url:`${u.URL.CONVERSATIONS}/${t}/${u.URL.OTR}/${u.URL.MESSAGES}`};if(void 0!==r){const e=Array.isArray(r)?r.join(","):r;o.params={ignore_missing:e},delete n.report_missing}else void 0!==n.report_missing&&n.report_missing.length||(o.params={ignore_missing:!!n.data});return(await this.client.sendJSON(o,!0)).data}async postOTRMessageV2(e,t,n){const i={data:r.proteus.QualifiedNewOtrMessage.encode(n).finish().slice(),method:"post",url:`${u.URL.CONVERSATIONS}/${t}/${e}/${u.URL.PROTEUS}/${u.URL.MESSAGES}`};return(await this.client.sendProtocolBuffer(i,!0)).data}async postOTRProtobufMessage(e,t,n,o){if(!e)throw new i.ValidationError("Unable to send OTR message without client ID.");const s={data:r.proteus.NewOtrMessage.encode(n).finish().slice(),method:"post",url:`${u.URL.CONVERSATIONS}/${t}/${u.URL.OTR}/${u.URL.MESSAGES}`};if(void 0!==o){const e=Array.isArray(o)?o.join(","):o;s.params={ignore_missing:e},n.reportMissing=[]}else void 0!==n.reportMissing&&n.reportMissing.length||(s.params={ignore_missing:!!n.blob});return(await this.client.sendProtocolBuffer(s,!0)).data}async postMlsMessage(e){const t={data:e,method:"post",url:`${u.URL.MLS}/${u.URL.MESSAGES}`};return(await this.client.sendProtocolMls(t,!0)).data}async postMlsWelcomeMessage(e){const t={data:e,method:"post",url:u.URL.MLS+"/welcome"};await this.client.sendProtocolMls(t,!0)}async postForClients(e,t){try{throw await this.postOTRMessage(e,t),new Error("Expected backend to throw error.")}catch(e){return e.response.data}}async postSelf(){const e={method:"post",url:`${u.URL.CONVERSATIONS}/${u.URL.SELF}`};return(await this.client.sendJSON(e)).data}async postTyping(e,t){const n={data:t,method:"post",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.TYPING}`};await this.client.sendJSON(n)}async putAccess(e,t){const n={data:t,method:"put",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.ACCESS}`};return(await this.client.sendJSON(n)).data}async putConversation(e,t){const n={data:t,method:"put",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.NAME}`};return(await this.client.sendJSON(n)).data}async putConversationMessageTimer(e,t){const n={data:t,method:"put",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.MESSAGE_TIMER}`};return(await this.client.sendJSON(n)).data}async putConversationReceiptMode(e,t){const n={data:t,method:"put",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.RECEIPT_MODE}`};return(await this.client.sendJSON(n)).data}async postMembersV0(e,t){const n={data:{conversation_role:o.DefaultConversationRoleName.WIRE_MEMBER,users:t},method:"post",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.MEMBERS}`};try{return(await this.client.sendJSON(n)).data}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT:throw new a.ConversationLegalholdMissingConsentError(t.message)}throw e}}async postMembers(e,t){if(!this.backendFeatures.federationEndpoints)return this.postMembersV0(e.id,t.map(e=>e.id));const n={data:{conversation_role:o.DefaultConversationRoleName.WIRE_MEMBER,qualified_users:t},method:"post",url:this.backendFeatures.version>=2?`${u.URL.CONVERSATIONS}/${e.domain}/${e.id}/${u.URL.MEMBERS}`:`${u.URL.CONVERSATIONS}/${e.id}/${u.URL.MEMBERS}/${u.URL.V2}`};try{return(await this.client.sendJSON(n)).data}catch(e){const t=e;switch(t.label){case s.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT:throw new a.ConversationLegalholdMissingConsentError(t.message)}throw e}}async putOtherMember(e,t,n){const r={data:n,method:"put",url:`${u.URL.CONVERSATIONS}/${t}/${u.URL.MEMBERS}/${e}`};await this.client.sendJSON(r)}async putMembershipProperties(e,t){const n={data:t,method:"put",url:`${u.URL.CONVERSATIONS}/${e}/${u.URL.SELF}`};await this.client.sendJSON(n)}}t.ConversationAPI=u,u.MAX_CHUNK_SIZE=500,u.URL={ACCESS:"access",BOTS:"bots",CLIENTS:"/clients",CODE:"code",CODE_CHECK:"/code-check",CONVERSATIONS:"/conversations",MLS:"/mls",IDS:"ids",JOIN:"/join",LIST:"list",LIST_IDS:"list-ids",MEMBERS:"members",MESSAGE_TIMER:"message-timer",MESSAGES:"messages",NAME:"name",OTR:"otr",PROTEUS:"proteus",RECEIPT_MODE:"receipt-mode",ROLES:"roles",SELF:"self",TYPING:"typing",V2:"v2"}},function(e,t,n){"use strict";e.exports=n(65)},function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(19),r.BufferWriter=n(74),r.Reader=n(20),r.BufferReader=n(75),r.util=n(2),r.rpc=n(76),r.roots=n(78),r.configure=i,i()},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,c=0;t<n;){var u=e[t++];switch(c){case 0:s[a++]=i[u>>2],r=(3&u)<<4,c=1;break;case 1:s[a++]=i[r|u>>4],r=(15&u)<<2,c=2;break;case 2:s[a++]=i[r|u>>6],s[a++]=i[63&u],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){"use strict";e.exports=i;var r=n(2);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=o;var r=n(19);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(2);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},function(e,t,n){"use strict";e.exports=o;var r=n(20);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(2);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){"use strict";t.Service=n(77)},function(e,t,n){"use strict";e.exports=i;var r=n(2);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationError=void 0;class r extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype)}}t.ValidationError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutedStatus=void 0,function(e){e[e.ALL_NOTIFICATIONS=0]="ALL_NOTIFICATIONS",e[e.ONLY_MENTIONS=1]="ONLY_MENTIONS",e[e.NO_NOTIFICATIONS=3]="NO_NOTIFICATIONS"}(t.MutedStatus||(t.MutedStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationProtocol=void 0,function(e){e.MLS="mls",e.PROTEUS="proteus"}(t.ConversationProtocol||(t.ConversationProtocol={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SERVICE_MEMBER_STATUS=void 0,function(e){e[e.REGULAR_MEMBER=0]="REGULAR_MEMBER"}(t.SERVICE_MEMBER_STATUS||(t.SERVICE_MEMBER_STATUS={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(99),t),i(n(100),t),i(n(37),t),i(n(167),t),i(n(168),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamInvitationAPI=void 0;const r=n(10),i=n(0),o=n(53),s=n(37);class a{constructor(e){this.client=e}async getInvitation(e,t){const n={method:"get",url:`${r.TeamAPI.URL.TEAMS}/${e}/${a.URL.INVITATIONS}/${t}`};return(await this.client.sendJSON(n)).data}async getAllInvitations(e){let t=[],n=await this.getInvitations(e,void 0);for(t=t.concat(n.invitations);n.has_more;){const r=n.invitations,i=(r[r.length-1]||{}).id;n=await this.getInvitations(e,i),t=t.concat(n.invitations)}return t}async getInvitations(e,t,n=a.MAX_CHUNK_SIZE){const i={method:"get",params:{size:n,start:t},url:`${r.TeamAPI.URL.TEAMS}/${e}/${a.URL.INVITATIONS}`};return(await this.client.sendJSON(i)).data}async deleteInvitation(e,t){const n={method:"delete",url:`${r.TeamAPI.URL.TEAMS}/${e}/${a.URL.INVITATIONS}/${t}`};await this.client.sendJSON(n)}async headInvitation(e){var t;const n={method:"head",params:{email:e},url:`${r.TeamAPI.URL.TEAMS}/${a.URL.INVITATIONS}/${a.URL.EMAIL}`};try{await this.client.sendJSON(n)}catch(e){switch(null===(t=e.response)||void 0===t?void 0:t.status){case o.StatusCodes.NOT_FOUND:throw new s.InvitationNotFoundError("Invitation not found");case o.StatusCodes.CONFLICT:throw new s.InvitationMultipleError("Multiple invitations found")}throw e}}async postInvitation(e,t){const n={data:t,method:"post",url:`${r.TeamAPI.URL.TEAMS}/${e}/${a.URL.INVITATIONS}`};try{return(await this.client.sendJSON(n)).data}catch(e){const t=e;switch(t.label){case i.BackendErrorLabel.INVITE_EMAIL_EXISTS:throw new s.InvitationEmailExistsError(t.message);case i.BackendErrorLabel.BAD_REQUEST:throw new s.InvitationInvalidPhoneError(t.message);case i.BackendErrorLabel.INVALID_EMAIL:throw new s.InvitationInvalidEmailError(t.message);case i.BackendErrorLabel.PHONE_EXISTS:throw new s.InvitationPhoneExistsError(t.message)}throw e}}async getInvitationFromCode(e){const t={method:"get",params:{code:e},url:`${r.TeamAPI.URL.TEAMS}/${a.URL.INVITATIONS}/${a.URL.INFO}`};return(await this.client.sendJSON(t)).data}}t.TeamInvitationAPI=a,a.MAX_CHUNK_SIZE=100,a.URL={INFO:"info",INVITATIONS:"invitations",EMAIL:"by-email"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=n(1),i=n(26),o=n(103),s=n(32);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=a(n(12));c.Axios=o,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(33),c.CancelToken=n(117),c.isCancel=n(31),c.all=function(e){return Promise.all(e)},c.spread=n(118),c.isAxiosError=n(119),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(1),i=n(27),o=n(104),s=n(105),a=n(32),c=n(115),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var l=[s,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(o),i=Promise.resolve(e);l.length;)i=i.then(l.shift(),l.shift());return i}for(var d=e;n.length;){var f=n.shift(),p=n.shift();try{d=f(d)}catch(e){p(e);break}}try{i=s(d)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(1);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(106),o=n(31),s=n(12);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(1),i=n(12);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(30);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(111),i=n(112);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(1),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(116),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},s=r.version.split(".");function a(e,t){for(var n=t?t.split("."):s,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&a(t);function s(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(s(r," has been removed in "+t));return i&&!o[r]&&(o[r]=!0,console.warn(s(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={isOlderVersion:a,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,n){"use strict";var r=n(33);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedSource=void 0,function(e){e.SCIM="scim",e.WIRE="wire"}(t.ManagedSource||(t.ManagedSource={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserAPI=void 0;const i=r(n(4)),o=n(7),s=n(0),a=n(36);class c{constructor(e,t){this.client=e,this.backendFeatures=t}async deleteProperties(){const e={method:"delete",url:c.URL.PROPERTIES};await this.client.sendJSON(e)}async deleteProperty(e){const t={method:"delete",url:`${c.URL.PROPERTIES}/${e}`};await this.client.sendJSON(t)}async getActivation(e,t){const n={method:"get",params:{code:e,key:t},url:c.URL.ACTIVATE};return(await this.client.sendJSON(n)).data}async getCallsConfiguration(){const e={method:"get",url:`${c.URL.CALLS}/${c.URL.CONFIG}`};return(await this.client.sendJSON(e)).data}async getClient(e,t){const n="string"==typeof e?e:e.id,r={method:"get",url:this.backendFeatures.federationEndpoints&&"string"!=typeof e?`${c.URL.USERS}/${e.domain}/${e.id}/${c.URL.CLIENTS}/${t}`:`${c.URL.USERS}/${n}/${c.URL.CLIENTS}/${t}`};return(await this.client.sendJSON(r)).data}async getClientPreKey(e,t){if(this.backendFeatures.federationEndpoints&&"string"!=typeof e)return this.getClientPreKey_v2(e,t);const n="string"==typeof e?e:e.id;return this.getClientPreKey_v1(n,t)}async getClientPreKey_v1(e,t){const n={method:"get",url:`${c.URL.USERS}/${e}/${c.URL.PRE_KEYS}/${t}`};return(await this.client.sendJSON(n)).data}async getClientPreKey_v2(e,t){const{id:n,domain:r}=e,i={method:"get",url:`${c.URL.USERS}/${r}/${n}/${c.URL.PRE_KEYS}/${t}`};return(await this.client.sendJSON(i)).data}async getClients(e){const t="string"==typeof e?e:e.id,n={method:"get",url:this.backendFeatures.federationEndpoints&&"string"!=typeof e?`${c.URL.USERS}/${e.domain}/${e.id}/${c.URL.CLIENTS}`:`${c.URL.USERS}/${t}/${c.URL.CLIENTS}`};return(await this.client.sendJSON(n)).data}async getHandle(e){const t={method:"get",url:`${c.URL.USERS}/${c.URL.HANDLES}/${e}`};return(await this.client.sendJSON(t)).data}async getProperties(){const e={method:"get",url:c.URL.PROPERTIES};return(await this.client.sendJSON(e)).data}async getProperty(e){const t={method:"get",url:`${c.URL.PROPERTIES}/${e}`};return(await this.client.sendJSON(t)).data}async getSearchContacts(e,t,n){const r=i.default.CancelToken.source(),o={cancelToken:r.token,method:"get",params:{q:e},url:`${c.URL.SEARCH}/${c.URL.CONTACTS}`};n&&(o.params.domain=n),t&&(o.params.size=t);return{cancel:()=>r.cancel(s.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{return(await this.client.sendJSON(o)).data}catch(e){if(e.message===s.SyntheticErrorLabel.REQUEST_CANCELLED)throw new a.RequestCancellationError("Search request got cancelled");throw e}})()}}async getUser(e){const t={method:"get",url:"string"==typeof e?`${c.URL.USERS}/${e}`:`${c.URL.USERS}/${e.domain}/${e.id}`};return(await this.client.sendJSON(t)).data}async getUserPreKeys(e){const t={method:"get",url:"string"==typeof e?`${c.URL.USERS}/${e}/${c.URL.PRE_KEYS}`:`${c.URL.USERS}/${e.domain}/${e.id}/${c.URL.PRE_KEYS}`};return(await this.client.sendJSON(t,!0)).data}async getUsers(e,t=c.DEFAULT_USERS_CHUNK_SIZE){const n=async e=>{const t={method:"get",params:{},url:c.URL.USERS};"handles"in e?t.params.handles=e.handles.join(","):"ids"in e&&(t.params.ids=e.ids.join(","));return(await this.client.sendJSON(t)).data};if("handles"in e&&e.handles.length){const r=o.ArrayUtil.removeDuplicates(e.handles),i=o.ArrayUtil.chunk(r,t),s=await Promise.all(i.map(e=>n({handles:e})));return o.ArrayUtil.flatten(s)}if("ids"in e&&e.ids.length){const r=o.ArrayUtil.removeDuplicates(e.ids),i=o.ArrayUtil.chunk(r,t),s=await Promise.all(i.map(e=>n({ids:e})));return o.ArrayUtil.flatten(s)}return[]}async getUsersByIds(e){return this.getUsers({ids:e},100)}async headUsers(e){const t={method:"head",url:"string"==typeof e?`${c.URL.USERS}/${e}`:`${c.URL.USERS}/${e.domain}/${e.id}`};await this.client.sendJSON(t)}async postActivation(e){const t={data:e,method:"post",url:c.URL.ACTIVATE};return(await this.client.sendJSON(t)).data}async postActivationCode(e){const t={data:e,method:"post",url:`${c.URL.ACTIVATE}/${c.URL.SEND}`};await this.client.sendJSON(t)}async postVerificationCode(e,t){const n={data:{email:e,action:t},method:"post",url:`${c.URL.VERIFICATION}/${c.URL.SEND}`};await this.client.sendJSON(n)}async postDelete(e){const t={data:e,method:"post",url:c.URL.DELETE};await this.client.sendJSON(t)}async postHandles(e){const t={data:e,method:"post",url:`${c.URL.USERS}/${c.URL.HANDLES}`};return(await this.client.sendJSON(t)).data}async headHandle(e){const t={method:"head",url:`${c.URL.USERS}/${c.URL.HANDLES}/${e}`};await this.client.sendJSON(t)}async getUserByHandle(e){const t={method:"get",url:`${c.URL.USERS}/${c.URL.BY_HANDLE}/${e.domain}/${e.handle}`};return(await this.client.sendJSON(t)).data}async postMultiPreKeyBundlesChunk(e){const t={data:e,method:"post",url:`${c.URL.USERS}/${c.URL.PRE_KEYS}`};return(await this.client.sendJSON(t,!0)).data}async postMultiQualifiedPreKeyBundlesChunk(e){const t={data:e,method:"post",url:`${c.URL.USERS}/${c.URL.LIST_PREKEYS}`};return(await this.client.sendJSON(t,!0)).data}async postListUsers(e){const t={data:e,method:"post",url:c.URL.LIST_USERS};return(await this.client.sendJSON(t)).data}async postListClients(e){const t={data:e,method:"post",url:this.backendFeatures.version>=2?`${c.URL.USERS}/${c.URL.LIST_CLIENTS}`:`${c.URL.USERS}/${c.URL.LIST_CLIENTS}/${c.URL.V2}`};return(await this.client.sendJSON(t)).data}async postMultiPreKeyBundles(e,t=c.DEFAULT_USERS_PREKEY_BUNDLE_CHUNK_SIZE){const n=o.ArrayUtil.chunk(Object.keys(e),t).map(t=>{const n=t.reduce((t,n)=>(t[n]=e[n],t),{});return this.postMultiPreKeyBundlesChunk(n)});return(await Promise.all(n)).reduce((e,t)=>Object.assign(Object.assign({},e),t),{})}async postQualifiedMultiPreKeyBundles(e,t=c.DEFAULT_USERS_PREKEY_BUNDLE_CHUNK_SIZE){const n=Object.entries(e).reduce((e,[t,n])=>{const r=Object.entries(n).map(([e,n])=>({userId:{id:e,domain:t},clients:n}));return e.concat(r)},[]),r=o.ArrayUtil.chunk(n,t).map(e=>e.reduce((e,{userId:t,clients:n})=>Object.assign(Object.assign({},e),{[t.domain]:Object.assign(Object.assign({},e[t.domain]),{[t.id]:n})}),{})).map(e=>this.postMultiQualifiedPreKeyBundlesChunk(e));return(await Promise.all(r)).reduce((e,t)=>(Object.entries(t).forEach(([t,n])=>{e[t]=Object.assign(Object.assign({},e[t]),n)}),e),{})}async postPasswordReset(e){const t={data:e,method:"post",url:c.URL.PASSWORD_RESET};await this.client.sendJSON(t)}async putProperty(e,t){const n={data:t,method:"put",url:`${c.URL.PROPERTIES}/${e}`};await this.client.sendJSON(n)}async getRichInfo(e){const t={method:"get",url:`${c.URL.USERS}/${e}/${c.URL.RICH_INFO}`};return(await this.client.sendJSON(t)).data}async putRevalidateEmail(e,t){const n={data:{email:t},method:"put",url:`${c.URL.USERS}/${e}/${c.URL.EMAIL}`};await this.client.sendJSON(n)}}t.UserAPI=c,c.DEFAULT_USERS_CHUNK_SIZE=50,c.DEFAULT_USERS_PREKEY_BUNDLE_CHUNK_SIZE=128,c.URL={ACTIVATE:"/activate",BY_HANDLE:"by-handle",CALLS:"/calls",CLIENTS:"clients",CONFIG:"config",CONTACTS:"contacts",DELETE:"/delete",EMAIL:"email",HANDLES:"handles",LIST_CLIENTS:"list-clients",LIST_PREKEYS:"list-prekeys",LIST_USERS:"/list-users",PASSWORD_RESET:"/password-reset",PRE_KEYS:"prekeys",PROPERTIES:"/properties",RICH_INFO:"rich-info",SEARCH:"/search",SEND:"send",USERS:"/users",V2:"v2",VERIFICATION:"/verification-code"}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogFactory=void 0;const a=s(n(138)),c=o(n(139)),u=s(n(3)),l=o(n(140)),d=o(n(141));class f{static getColor(){f.COLOR_CODE.R=(f.COLOR_CODE.R+f.COLOR_STEP.R)%256,f.COLOR_CODE.G=(f.COLOR_CODE.G+f.COLOR_STEP.G)%256,f.COLOR_CODE.B=(f.COLOR_CODE.B+f.COLOR_STEP.B)%256;return`#${Number(f.COLOR_CODE.R).toString(16).padStart(2,"0")}${f.COLOR_CODE.G.toString(16).padStart(2,"0")}${f.COLOR_CODE.B.toString(16).padStart(2,"0")}`}static addTimestamp(e){const t=(new Date).toISOString().split(".")[0].replace("T"," ");e.args.unshift(`[${t}]`)}static async writeTransport(e){const[t]=e.args,n=`${t} ${e.msg}`;this.logFilePath&&await f.writeMessage(n,this.logFilePath)}static async writeMessage(e,t){const n=e.replace((0,a.default)(),"");await c.outputFile(t,`${n}${l.EOL}`,{flag:"a"})}static createLoggerName(e,t,n){return"undefined"==typeof window&&(e=d.basename(e,d.extname(e))),[t,e].filter(Boolean).join(n)}static getLogger(e,t){const n={color:f.getColor(),forceEnable:!1,logFilePath:"",namespace:"",separator:"::"},r=Object.assign(Object.assign({},n),t);0===u.default.transports.length&&(u.default.transports.push(f.addTimestamp.bind({namespace:r.namespace})),u.default.transports.push(f.writeTransport.bind({logFilePath:r.logFilePath})));const i=this.createLoggerName(e,r.namespace,r.separator),o=(0,u.default)(i,{logger:console,markdown:!1,prefixColor:r.color});return r.forceEnable&&(o.state.isEnabled=!0),o}}t.LogFactory=f,f.logFilePath=void 0,f.COLOR_STEP={B:97,G:79,R:31},f.COLOR_CODE={B:0,G:0,R:0}},function(e,t,n){"use strict";e.exports=({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}},function(e,t){e.exports={}},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(13))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationUtil=t.UrlUtil=t.TypeUtil=t.TimeUtil=t.StringUtil=t.RandomUtil=t.DateUtil=t.ArrayUtil=t.AccentColor=void 0,t.AccentColor=o(n(143)),t.ArrayUtil=o(n(24)),t.DateUtil=o(n(144)),t.RandomUtil=o(n(35)),t.StringUtil=o(n(145)),t.TimeUtil=o(n(150)),t.TypeUtil=o(n(151)),t.UrlUtil=o(n(152)),t.ValidationUtil=o(n(154)),s(n(155),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DEPRECATED_getById=t.DEPRECATED_ACCENT_COLORS=t.getRandom=t.getById=t.ACCENT_COLORS=t.VIOLET=t.SOFT_PINK=t.BRIGHT_ORANGE=t.VIVID_RED=t.DEPRECATED_YELLOW=t.STRONG_LIME_GREEN=t.STRONG_BLUE=t.AccentColorID=void 0;const s=o(n(35));var a;!function(e){e[e.BRIGHT_ORANGE=5]="BRIGHT_ORANGE",e[e.SOFT_PINK=6]="SOFT_PINK",e[e.STRONG_BLUE=1]="STRONG_BLUE",e[e.STRONG_LIME_GREEN=2]="STRONG_LIME_GREEN",e[e.VIOLET=7]="VIOLET",e[e.VIVID_RED=4]="VIVID_RED",e[e.YELLOW=3]="YELLOW"}(a=t.AccentColorID||(t.AccentColorID={})),t.STRONG_BLUE={color:"#2391d3",id:a.STRONG_BLUE,name:"StrongBlue"},t.STRONG_LIME_GREEN={color:"#00c800",id:a.STRONG_LIME_GREEN,name:"StrongLimeGreen"},t.DEPRECATED_YELLOW={color:"#febf02",id:a.YELLOW,name:"Yellow"},t.VIVID_RED={color:"#fb0807",id:a.VIVID_RED,name:"VividRed"},t.BRIGHT_ORANGE={color:"#ff8900",id:a.BRIGHT_ORANGE,name:"BrightOrange"},t.SOFT_PINK={color:"#fe5ebd",id:a.SOFT_PINK,name:"SoftPink"},t.VIOLET={color:"#9c00fe",id:a.VIOLET,name:"Violet"},t.ACCENT_COLORS=[t.BRIGHT_ORANGE,t.SOFT_PINK,t.STRONG_BLUE,t.STRONG_LIME_GREEN,t.VIOLET,t.VIVID_RED];t.getById=e=>t.ACCENT_COLORS.find(t=>t.id===e);t.getRandom=()=>s.randomArrayElement(t.ACCENT_COLORS),t.DEPRECATED_ACCENT_COLORS=[t.BRIGHT_ORANGE,t.DEPRECATED_YELLOW,t.SOFT_PINK,t.STRONG_BLUE,t.STRONG_LIME_GREEN,t.VIOLET,t.VIVID_RED];t.DEPRECATED_getById=e=>t.DEPRECATED_ACCENT_COLORS.find(t=>t.id===e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isoFormat=void 0,t.isoFormat=function(e){const t=e.toISOString(),[,n,r]=/(.+)T(.+)\./.exec(t);return{date:n,time:r}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToUUID=t.uuidToBytes=t.pluralize=t.capitalize=void 0,t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.pluralize=function(e,t,n){const r=(null==n?void 0:n.postfix)||"s";return`${e}${1===t?"":r}`},t.uuidToBytes=function(t){return e.from(t.replace(/-/g,""),"hex")},t.bytesToUUID=function(e){const t=e.toString("hex");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`}}).call(this,n(146).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(147),i=n(148),o=n(149);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return x(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return x(e).length;t=(""+t).toLowerCase(),r=!0}}function E(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function O(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function S(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function g(e,t,n,r){return G(x(t,e.length-n),e,n,r)}function b(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function R(e,t,n,r){return b(e,t,n,r)}function m(e,t,n,r){return G(F(t),e,n,r)}function v(e,t,n,r){return G(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)O(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)O(this,t,t+3),O(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)O(this,t,t+7),O(this,t+1,t+6),O(this,t+2,t+5),O(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):E.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),d=0;d<a;++d)if(u[d]!==l[d]){o=u[d],s=l[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return g(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return R(this,e,t,n);case"base64":return m(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function C(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function w(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function k(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||w(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||w(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);w(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);w(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:x(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var $=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function x(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(9))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,E=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=255&s,p+=h,s/=256,u-=8);e[n+p-h]|=128*E}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeInMillis=void 0,function(e){e[e.SECOND=1e3]="SECOND",e[e.MINUTE=6e4]="MINUTE",e[e.HOUR=36e5]="HOUR",e[e.DAY=864e5]="DAY",e[e.WEEK=6048e5]="WEEK",e[e.YEAR=31536e6]="YEAR"}(t.TimeInMillis||(t.TimeInMillis={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";function r(e){const t={};return new URLSearchParams(e).forEach((e,n)=>{t[n]=e}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.hasURLParameter=t.getURLParameter=t.paramsToRecord=t.pathWithParams=void 0,n(153),t.pathWithParams=function(e,t,n,i=window.location.search){const o=r(i);t&&Object.assign(o,t),n&&Object.keys(o).forEach(e=>{n.includes(e)||delete o[e]});const s=new URLSearchParams(o).toString();return`${e}${s?"?"+s:""}`},t.paramsToRecord=r,t.getURLParameter=function(e,t=window.location.search){return new URLSearchParams(t).get(e)||""},t.hasURLParameter=function(e,t=window.location.search){return!!new URLSearchParams(t).has(e)}},function(e,t,n){(function(e){!function(e){"use strict";var t,n=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),r=n&&"a=1"===new n({a:1}).toString(),i=n&&"+"===new n("s=%2B").get("s"),o=!n||((t=new n).append("s"," &"),"s=+%26"===t.toString()),s=l.prototype,a=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&r&&i&&o)){var c;s.append=function(e,t){E(this.__URLSearchParams__,e,t)},s.delete=function(e){delete this.__URLSearchParams__[e]},s.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},s.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},s.has=function(e){return y(this.__URLSearchParams__,e)},s.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},s.toString=function(){var e,t,n,r,i=this.__URLSearchParams__,o=[];for(t in i)for(n=d(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+d(r[e]));return o.join("&")},!!i&&n&&!r&&e.Proxy?(c=new Proxy(n,{construct:function(e,t){return new e(new l(t[0]).toString())}})).toString=Function.prototype.toString.bind(l):c=l,Object.defineProperty(e,"URLSearchParams",{value:c});var u=e.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(e,t){var n=h(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},u.sort=u.sort||function(){var e,t,n,r=h(this.toString()),i=[];for(e in r)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var o=i[t],s=r[o];for(n=0;n<s.length;n++)this.append(o,s[n])}},u.keys=u.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},u.values=u.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},u.entries=u.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},a&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries)}function l(e){((e=e||"")instanceof URLSearchParams||e instanceof l)&&(e=e.toString()),this.__URLSearchParams__=h(e)}function d(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function f(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function p(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(n[e.Symbol.iterator]=function(){return n}),n}function h(e){var t={};if("object"==typeof e)if(O(e))for(var n=0;n<e.length;n++){var r=e[n];if(!O(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");E(t,r[0],r[1])}else for(var i in e)e.hasOwnProperty(i)&&E(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var o=e.split("&"),s=0;s<o.length;s++){var a=o[s],c=a.indexOf("=");-1<c?E(t,f(a.slice(0,c)),f(a.slice(c+1))):a&&E(t,f(a),"")}}return t}function E(e,t,n){var r="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);y(e,t)?e[t].push(r):e[t]=[r]}function O(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==e?e:"undefined"!=typeof window?window:this)}).call(this,n(9))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewPasswordPattern=t.DEFAULT_PASSWORD_MAX_LENGTH=t.DEFAULT_PASSWORD_MIN_LENGTH=t.isValidHandle=t.isValidEmail=t.isUUIDv4=t.PATTERN=void 0,t.PATTERN={EMAIL:'(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',UUID_V4:"[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}"},t.isUUIDv4=function(e){return new RegExp(`^${t.PATTERN.UUID_V4}$`,"i").test(e)},t.isValidEmail=function(e){return new RegExp(`^${t.PATTERN.EMAIL}$`,"i").test(e)},t.isValidHandle=function(e){return/^[a-z_0-9.-]{2,256}$/.test(e)},t.DEFAULT_PASSWORD_MIN_LENGTH=8,t.DEFAULT_PASSWORD_MAX_LENGTH=120,t.getNewPasswordPattern=function(e=t.DEFAULT_PASSWORD_MIN_LENGTH,n=t.DEFAULT_PASSWORD_MAX_LENGTH){return`(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[^0-9a-zA-Z]).{${e},${n}}$`}},function(e,t,n){"use strict";(function(e){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Runtime=t.OperatingSystem=void 0;const s=o(n(156)),a=n(34);var c;!function(e){e.ANDROID="OperatingSystem.ANDROID",e.IOS="OperatingSystem.IOS",e.LINUX="OperatingSystem.LINUX",e.MAC="OperatingSystem.MAC",e.WINDOWS="OperatingSystem.WINDOWS"}(c=t.OperatingSystem||(t.OperatingSystem={}));class u{static getPlatform(){return s||{}}static getOSFamily(){var e;const t=(null===(e=u.getOS().family)||void 0===e?void 0:e.toLowerCase())||"";return t.includes("windows")?c.WINDOWS:t.includes("android")?c.ANDROID:t.includes("ios")?c.IOS:["os x","mac os"].includes(t)?c.MAC:c.LINUX}static getBrowserName(){return(u.getPlatform().name||"unknown").toLowerCase()}static getBrowserVersion(){const[e,t]=(u.getPlatform().version||"unknown").split(".");return{major:parseInt(e,10),minor:parseInt(t,10)}}static getUserAgent(){return(u.getPlatform().ua||"unknown").toLowerCase()}static isWebappSupportedBrowser(){return!u.isFranz()&&Object.entries(a.WEBAPP_SUPPORTED_BROWSERS).some(([e,t])=>{const n=u.getBrowserName()===e,r=u.getBrowserVersion(),i=r.major>=t.major,o=r.major>t.major||r.minor>=t.minor;return n&&i&&o})}static getOS(){return Object.assign({architecture:"unknown",family:"unknown",version:"unknown"},s.os)}static isChrome(){return u.getBrowserName()===a.BROWSER.CHROME}static isEdge(){return u.getBrowserName()===a.BROWSER.MS_EDGE}static isFirefox(){return u.getBrowserName()===a.BROWSER.FIREFOX}static isInternetExplorer(){return u.getBrowserName()===a.BROWSER.IE}static isOpera(){return u.getBrowserName()===a.BROWSER.OPERA}static isSafari(){return u.getBrowserName()===a.BROWSER.SAFARI}static isDesktopOS(){return u.isMacOS()||u.isWindows()||u.isLinux()}static isElectron(){return u.getBrowserName()===a.BROWSER.ELECTRON}static isNode(){return"object"==typeof e}static isDesktopApp(){return u.isElectron()&&u.getUserAgent().includes("wire")}static isFranz(){return u.isElectron()&&u.getUserAgent().includes("franz")}static isMacOS(){return u.getOSFamily()===c.MAC}static isWindows(){return u.getOSFamily()===c.WINDOWS}static isLinux(){return u.getOSFamily()===c.LINUX}static isMobileOS(){return u.isAndroid()||u.isIOS()}static isAndroid(){return u.getOSFamily()===c.ANDROID}static isIOS(){return u.getOSFamily()===c.IOS}}t.Runtime=u,u.isSupportingWebSockets=()=>{try{return"WebSocket"in window}catch(e){return!1}},u.isSupportingClipboard=()=>!!navigator.clipboard,u.isSupportingIndexedDb=()=>{try{return!!window.indexedDB}catch(e){return!1}},u.isSupportingLegacyCalling=()=>u.isSupportingRTCPeerConnection()&&u.isSupportingRTCDataChannel()&&u.isSupportingUserMedia()&&u.isSupportingWebSockets(),u.isSupportingConferenceCalling=()=>{const e=RTCRtpSender.prototype.hasOwnProperty("createEncodedVideoStreams");return RTCRtpSender.prototype.hasOwnProperty("createEncodedStreams")||e},u.isSupportingRTCPeerConnection=()=>"RTCPeerConnection"in window,u.isSupportingRTCDataChannel=()=>{if(!u.isSupportingRTCPeerConnection())return!1;return"createDataChannel"in new RTCPeerConnection(void 0)},u.isSupportingUserMedia=()=>"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices,u.isSupportingDisplayMedia=()=>"mediaDevices"in navigator&&"getDisplayMedia"in navigator.mediaDevices,u.isSupportingScreensharing=()=>!!window.desktopCapturer||u.isSupportingUserMedia()&&u.isSupportingDisplayMedia()||u.isFirefox(),u.isSupportingPermissions=()=>!!navigator.permissions,u.isSupportingNotifications=()=>{if(void 0===window.Notification)return!1;return!(void 0===window.Notification.requestPermission)&&void 0!==document.visibilityState}}).call(this,n(13))},function(e,t,n){(function(e,r){var i;
/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */(function(){"use strict";var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof t]&&t,c=o[typeof e]&&e&&!e.nodeType&&e,u=a&&c&&"object"==typeof r&&r;!u||u.global!==u&&u.window!==u&&u.self!==u||(s=u);var l=Math.pow(2,53)-1,d=/\bOpera/,f=Object.prototype,p=f.hasOwnProperty,h=f.toString;function E(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function O(e){return e=b(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:E(e)}function y(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function _(e){return null==e?E(e):h.call(e).slice(8,-1)}function S(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function g(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=l)for(;++n<r;)t(e[n],n,e);else y(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function b(e){return String(e).replace(/^ +| +$/g,"")}var R=function e(t){var n=s,r=t&&"object"==typeof t&&"String"!=_(t);r&&(n=t,t=null);var i=n.navigator||{},o=i.userAgent||"";t||(t=o);var a,c,u,l,f,p=r?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(h.toString()),E=r?"Object":"ScriptBridgingProxyObject",R=r?"Object":"Environment",m=r&&n.java?"JavaPackage":_(n.java),v=r?"Object":"RuntimeObject",T=/\bJava/.test(m)&&n.java,I=T&&_(n.environment)==R,A=T?"a":"",N=T?"b":"",L=n.document||{},C=n.operamini||n.opera,P=d.test(P=r&&C?C["[[Class]]"]:_(C))?P:C=null,w=t,U=[],M=null,D=t==o,j=D&&C&&"function"==typeof C.version&&C.version(),k=g([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||S(n))+"\\b","i").exec(t)&&(n.label||n)})),$=function(e){return g(e,(function(e,n){return e||RegExp("\\b"+(n.pattern||S(n))+"\\b","i").exec(t)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),B=G([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),x=function(e){return g(e,(function(e,n,r){return e||(n[B]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(B)]||RegExp("\\b"+S(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),F=function(e){return g(e,(function(e,n){var r=n.pattern||S(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=O(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function G(e){return g(e,(function(e,n){var r=n.pattern||S(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=O(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function V(e){return g(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(k&&(k=[k]),/\bAndroid\b/.test(F)&&!B&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(B=b(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),x&&!B?B=G([x]):x&&B&&(B=B.replace(RegExp("^("+S(x)+")[-_.\\s]","i"),x+" ").replace(RegExp("^("+S(x)+")[-_.]?(\\w)","i"),x+" $2")),(a=/\bGoogle TV\b/.exec(B))&&(B=a[0]),/\bSimulator\b/i.test(t)&&(B=(B?B+" ":"")+"Simulator"),"Opera Mini"==$&&/\bOPiOS\b/.test(t)&&U.push("running in Turbo/Uncompressed mode"),"IE"==$&&/\blike iPhone OS\b/.test(t)?(x=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,B=a.product):/^iP/.test(B)?($||($="Safari"),F="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==$&&/^Linux\b/i.test(F)?F="Kubuntu":x&&"Google"!=x&&(/Chrome/.test($)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(B))||/\bAndroid\b/.test(F)&&/^Chrome/.test($)&&/\bVersion\//i.test(t)?($="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==$?(/\bMobi/i.test(t)||(F="Android",U.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&U.unshift("accelerated")):"UC Browser"==$&&/\bUCWEB\b/.test(t)?U.push("speed mode"):"PaleMoon"==$&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?U.push("identifying as Firefox "+a[1]):"Firefox"==$&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(F||(F="Firefox OS"),B||(B=a[1])):!$||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec($))?($&&!B&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&($=null),(a=B||x||F)&&(B||x||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&($=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:a)+" Browser")):"Electron"==$&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&U.push("Chromium "+a),j||(j=V(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",S($),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==k&&parseFloat(j)>3?"WebKit":/\bOpera\b/.test($)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(k)&&"WebKit"||!k&&/\bMSIE\b/i.test(t)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==k&&/\bPlayStation\b(?! Vita\b)/i.test($)&&"NetFront")&&(k=[a]),"IE"==$&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?($+=" Mobile",F="Windows Phone "+(/\+$/.test(a)?a:a+".x"),U.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?($="IE Mobile",F="Windows Phone 8.x",U.unshift("desktop mode"),j||(j=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=$&&"Trident"==k&&(a=/\brv:([\d.]+)/.exec(t))&&($&&U.push("identifying as "+$+(j?" "+j:"")),$="IE",j=a[1]),D){if(l="global",f=null!=(u=n)?typeof u[l]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!u[l])_(a=n.runtime)==E?($="Adobe AIR",F=a.flash.system.Capabilities.os):_(a=n.phantom)==v?($="PhantomJS",j=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof L.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?(j=[j,L.documentMode],(a=+a[1]+4)!=j[1]&&(U.push("IE "+j[1]+" mode"),k&&(k[1]=""),j[1]=a),j="IE"==$?String(j[1].toFixed(1)):j[0]):"number"==typeof L.documentMode&&/^(?:Chrome|Firefox)\b/.test($)&&(U.push("masking as "+$+" "+j),$="IE",j="11.0",k=["Trident"],F="Windows");else if(T&&(w=(a=T.lang.System).getProperty("os.arch"),F=F||a.getProperty("os.name")+" "+a.getProperty("os.version")),I){try{j=n.require("ringo/engine").version.join("."),$="RingoJS"}catch(e){(a=n.system)&&a.global.system==n.system&&($="Narwhal",F||(F=a[0].os||null))}$||($="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(U.push("Node "+a.versions.node),$="Electron",j=a.versions.electron):"string"==typeof a.versions.nw&&(U.push("Chromium "+j,"Node "+a.versions.node),$="NW.js",j=a.versions.nw)),$||($="Node.js",w=a.arch,F=a.platform,j=(j=/[\d.]+/.exec(a.version))?j[0]:null));F=F&&O(F)}if(j&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(j)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(D&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(M=/b/i.test(a)?"beta":"alpha",j=j.replace(RegExp(a+"\\+?$"),"")+("beta"==M?N:A)+(/\d+\+?/.exec(a)||"")),"Fennec"==$||"Firefox"==$&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(F))$="Firefox Mobile";else if("Maxthon"==$&&j)j=j.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(B))"Xbox 360"==B&&(F=null),"Xbox 360"==B&&/\bIEMobile\b/.test(t)&&U.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test($)&&(!$||B||/Browser|Mobi/.test($))||"Windows CE"!=F&&!/Mobi/i.test(t))if("IE"==$&&D)try{null===n.external&&U.unshift("platform preview")}catch(e){U.unshift("embedded")}else(/\bBlackBerry\b/.test(B)||/\bBB10\b/.test(t))&&(a=(RegExp(B.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||j)?(F=((a=[a,/BB10/.test(t)])[1]?(B=null,x="BlackBerry"):"Device Software")+" "+a[0],j=null):this!=y&&"Wii"!=B&&(D&&C||/Opera/.test($)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==$&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==$&&(F&&!/^Win/.test(F)&&j>5.5||/\bWindows XP\b/.test(F)&&j>8||8==j&&!/\bTrident\b/.test(t)))&&!d.test(a=e.call(y,t.replace(d,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),d.test($)?(/\bIE\b/.test(a)&&"Mac OS"==F&&(F=null),a="identify"+a):(a="mask"+a,$=P?O(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(F=null),D||(j=null)),k=["Presto"],U.push(a));else $+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==$&&"+"==a[1].slice(-1)?($="WebKit Nightly",M="alpha",j=a[1].slice(0,-1)):j!=a[1]&&j!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(j=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==k&&(k=["Blink"]),D&&(p||a[1])?(k&&(k[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=k?"27":"28")):(k&&(k[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),k&&(k[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==$&&(!j||parseInt(j)>45)?j=a:"Chrome"==$&&/\bHeadlessChrome/i.test(t)&&U.unshift("headless")),"Opera"==$&&(a=/\bzbov|zvav$/.exec(F))?($+=" ",U.unshift("desktop mode"),"zvav"==a?($+="Mini",j=null):$+="Mobile",F=F.replace(RegExp(" *"+a+"$"),"")):"Safari"==$&&/\bChrome\b/.exec(k&&k[1])?(U.unshift("desktop mode"),$="Chrome Mobile",j=null,/\bOS X\b/.test(F)?(x="Apple",F="iOS 4.3+"):F=null):/\bSRWare Iron\b/.test($)&&!j&&(j=V("Chrome")),j&&0==j.indexOf(a=/[\d.]+$/.exec(F))&&t.indexOf("/"+a+"-")>-1&&(F=b(F.replace(a,""))),F&&-1!=F.indexOf($)&&!RegExp($+" OS").test(F)&&(F=F.replace(RegExp(" *"+S($)+" *"),"")),k&&!/\b(?:Avant|Nook)\b/.test($)&&(/Browser|Lunascape|Maxthon/.test($)||"Safari"!=$&&/^iOS/.test(F)&&/\bSafari\b/.test(k[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test($)&&k[1])&&(a=k[k.length-1])&&U.push(a),U.length&&(U=["("+U.join("; ")+")"]),x&&B&&B.indexOf(x)<0&&U.push("on "+x),B&&U.push((/^on /.test(U[U.length-1])?"":"on ")+B),F&&(a=/ ([\d.+]+)$/.exec(F),c=a&&"/"==F.charAt(F.length-a[0].length-1),F={architecture:32,family:a&&!c?F.replace(a[0],""):F,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(w))&&!/\bi686\b/i.test(w)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+a),"")),$&&(/\bWOW64\b/i.test(t)||D&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&U.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==$&&parseFloat(j)>=39&&(F.architecture=64),t||(t=null);var H={};return H.description=t,H.layout=k&&k[0],H.manufacturer=x,H.name=$,H.prerelease=M,H.product=B,H.ua=t,H.version=$&&j,H.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=e,H.toString=function(){return this.description||""},H.version&&U.unshift(j),H.name&&U.unshift($),F&&$&&(F!=String(F).split(" ")[0]||F!=$.split(" ")[0]&&!B)&&U.push(B?"("+F+")":"on "+F),U.length&&(H.description=U.join(" ")),H}();s.platform=R,void 0===(i=function(){return R}.call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n(157)(e),n(9))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserAssetType=void 0,function(e){e.COMPLETE="complete",e.PREVIEW="preview"}(t.UserAssetType||(t.UserAssetType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(170),t),i(n(171),t),i(n(172),t),i(n(173),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegalHoldAPI=void 0;const r=n(11);class i{constructor(e){this.client=e}async getMemberLegalHold(e,t){const n={method:"get",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${t}`};return(await this.client.sendJSON(n)).data}async deleteMemberLegalHold(e,t,n){const o={data:{password:n},method:"delete",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${t}`};await this.client.sendJSON(o)}async postMemberLegalHold(e,t){const n={method:"post",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${t}`};await this.client.sendJSON(n)}async putMemberApproveLegalHold(e,t,n){const o={data:{password:n},method:"put",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${t}/${i.URL.APPROVE_LEGAL_HOLD}`};await this.client.sendJSON(o)}async getSettings(e){const t={method:"get",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${i.URL.SETTINGS_LEGAL_HOLD}`};return(await this.client.sendJSON(t)).data}async deleteSettings(e,t){const n={data:{password:t},method:"delete",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${i.URL.SETTINGS_LEGAL_HOLD}`};await this.client.sendJSON(n)}async postSettings(e,t){const n={data:t,method:"post",url:`${r.TeamAPI.URL.TEAMS}/${e}/${i.URL.LEGAL_HOLD}/${i.URL.SETTINGS_LEGAL_HOLD}`};return(await this.client.sendJSON(n)).data}}t.LegalHoldAPI=i,i.URL={APPROVE_LEGAL_HOLD:"approve",LEGAL_HOLD:"legalhold",SETTINGS_LEGAL_HOLD:"settings"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegalHoldStatus=void 0,function(e){e.DISABLED="disabled",e.ENABLED_CONFIGURED="configured",e.ENABLED_NOT_CONFIGURED="not_configured"}(t.LegalHoldStatus||(t.LegalHoldStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegalHoldMemberStatus=void 0,function(e){e.DISABLED="disabled",e.ENABLED="enabled",e.PENDING="pending",e.NO_CONSENT="no_consent"}(t.LegalHoldMemberStatus||(t.LegalHoldMemberStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(175),t),i(n(176),t),i(n(177),t),i(n(178),t),i(n(38),t),i(n(179),t),i(n(180),t)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MemberAPI=void 0;const i=r(n(4)),o=n(7),s=n(11),a=n(0),c=n(5);class u{constructor(e){this.client=e}async getMember(e,t){const n={method:"get",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS}/${t}`};return(await this.client.sendJSON(n)).data}async deleteMember(e,t,n){const r={data:{password:n},method:"delete",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS}/${t}`};await this.client.sendJSON(r)}async postMembers(e,t){const n={data:{member:t},method:"post",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS}`};await this.client.sendJSON(n)}async putMembers(e,t){const n={data:{member:t},method:"put",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS}`};await this.client.sendJSON(n)}async getAllMembers(e){const t={method:"get",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS}`};return(await this.client.sendJSON(t)).data}async getMembers(e,t,n=u.DEFAULT_MEMBERS_CHUNK_SIZE){const{ids:r}=t;if(r.length){const t=o.ArrayUtil.removeDuplicates(r),i=o.ArrayUtil.chunk(t,n),s=await Promise.all(i.map(async t=>(await this._getMembers(e,{ids:t})).members));return o.ArrayUtil.flatten(s)}return[]}async _getMembers(e,t){const n={data:{user_ids:t.ids},method:"post",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS_BY_ID_LIST}`};return(await this.client.sendJSON(n)).data}async getMemberListCSV(e,t){const n=i.default.CancelToken.source(),r={cancelToken:n.token,method:"get",onDownloadProgress:(0,a.handleProgressEvent)(t),responseType:"arraybuffer",url:`${s.TeamAPI.URL.TEAMS}/${e}/${u.URL.MEMBERS}/${u.URL.CSV}`};return{cancel:()=>n.cancel(a.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{const e=await this.client.sendRequest(r,!0);return{buffer:e.data,mimeType:e.headers["content-type"]}}catch(e){if(e.message===a.SyntheticErrorLabel.REQUEST_CANCELLED)throw new c.RequestCancellationError("Member CSV download got cancelled.");throw e}})()}}}t.MemberAPI=u,u.DEFAULT_MEMBERS_CHUNK_SIZE=1600,u.URL={MEMBERS:"members",CSV:"csv",MEMBERS_BY_ID_LIST:"get-members-by-ids-using-post"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAtLeastEqual=t.isAtLeastAdmin=t.isAtLeastMember=t.isAtLeastPartner=t.isOwner=t.isAdmin=t.isMember=t.isPartner=t.permissionsToRole=t.roleToPermissions=t.Role=void 0;const r=n(38);var i;!function(e){e.ADMIN="admin",e.EXTERNAL="partner",e.MEMBER="member",e.OWNER="owner"}(i=t.Role||(t.Role={}));t.roleToPermissions=e=>{switch(e.toLowerCase()){case i.OWNER:return(0,r.combinePermissions)([(0,t.roleToPermissions)(i.ADMIN),r.Permissions.DELETE_TEAM,r.Permissions.GET_BILLING,r.Permissions.SET_BILLING]);case i.ADMIN:return(0,r.combinePermissions)([(0,t.roleToPermissions)(i.MEMBER),r.Permissions.ADD_TEAM_MEMBER,r.Permissions.REMOVE_TEAM_MEMBER,r.Permissions.SET_MEMBER_PERMISSIONS,r.Permissions.SET_TEAM_DATA]);case i.MEMBER:return(0,r.combinePermissions)([(0,t.roleToPermissions)(i.EXTERNAL),r.Permissions.ADD_CONVERSATION_MEMBER,r.Permissions.DELETE_CONVERSATION,r.Permissions.GET_MEMBER_PERMISSIONS,r.Permissions.REMOVE_CONVERSATION_MEMBER]);case i.EXTERNAL:return(0,r.combinePermissions)([r.Permissions.CREATE_CONVERSATION,r.Permissions.GET_TEAM_CONVERSATIONS]);default:return 0}};t.permissionsToRole=e=>(0,r.hasPermissions)(e.self,(0,t.roleToPermissions)(i.OWNER))?i.OWNER:(0,r.hasPermissions)(e.self,(0,t.roleToPermissions)(i.ADMIN))?i.ADMIN:(0,r.hasPermissions)(e.self,(0,t.roleToPermissions)(i.MEMBER))?i.MEMBER:(0,r.hasPermissions)(e.self,(0,t.roleToPermissions)(i.EXTERNAL))?i.EXTERNAL:void 0;t.isPartner=e=>!(!e||(0,t.permissionsToRole)(e)!==i.EXTERNAL);t.isMember=e=>!(!e||(0,t.permissionsToRole)(e)!==i.MEMBER);t.isAdmin=e=>!(!e||(0,t.permissionsToRole)(e)!==i.ADMIN);t.isOwner=e=>!(!e||(0,t.permissionsToRole)(e)!==i.OWNER);t.isAtLeastPartner=e=>(0,t.isPartner)(e)||(0,t.isMember)(e)||(0,t.isAdmin)(e)||(0,t.isOwner)(e);t.isAtLeastMember=e=>(0,t.isMember)(e)||(0,t.isAdmin)(e)||(0,t.isOwner)(e);t.isAtLeastAdmin=e=>(0,t.isAdmin)(e)||(0,t.isOwner)(e);t.isAtLeastEqual=(e,n)=>(0,t.isOwner)(e)&&(0,t.isOwner)(n)||(0,t.isAtLeastAdmin)(e)&&(0,t.isAdmin)(n)||(0,t.isAtLeastMember)(e)&&(0,t.isMember)(n)||(0,t.isAtLeastPartner)(e)&&(0,t.isPartner)(n)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(182),t),i(n(183),t),i(n(184),t),i(n(185),t),i(n(186),t),i(n(187),t),i(n(188),t),i(n(189),t),i(n(190),t),i(n(191),t),i(n(192),t),i(n(193),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentAPI=void 0;class r{constructor(e){this.client=e}async putPaymentData(e,t){const n={data:t,method:"put",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}`};return(await this.client.sendJSON(n)).data}async getPaymentData(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}`};return(await this.client.sendJSON(t)).data}async deletePaymentData(e,t){const n={data:t,method:"delete",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}`};return(await this.client.sendJSON(n)).data}async putPaymentBilling(e,t){const n={data:t,method:"put",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INFO}`};return(await this.client.sendJSON(n)).data}async getPaymentBilling(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INFO}`};return(await this.client.sendJSON(t)).data}async putPaymentPlan(e,t){const n={data:t,method:"put",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.PLAN}/${t.id}`};await this.client.sendJSON(n)}async getPlans(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.PLANS}`};return(await this.client.sendJSON(t)).data}async getCharges(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.CHARGES}`};return(await this.client.sendJSON(t)).data}async getInvoices(e,t=r.DEFAULT_INVOICES_CHUNK_SIZE,n){const i={method:"get",params:{size:t,start:n},url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INVOICES}`};return(await this.client.sendJSON(i)).data}async getSupportedCurrencies(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.CURRENCIES}`};return(await this.client.sendJSON(t)).data}}t.PaymentAPI=r,r.DEFAULT_INVOICES_CHUNK_SIZE=10,r.URL={BILLING:"billing",CHARGES:"charges",CURRENCIES:"currencies",INFO:"info",INVOICES:"invoices",PLAN:"plan",PLANS:"plans",TEAMS:"/teams"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentStatus=void 0,function(e){e.ACTIVE="active",e.CANCELED="canceled",e.PAST_DUE="past_due",e.TRIALING="trialing",e.UNPAID="unpaid"}(t.PaymentStatus||(t.PaymentStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentInterval=void 0,function(e){e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year"}(t.PaymentInterval||(t.PaymentInterval={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentPlanID=void 0,function(e){e.ANNUAL="wire_annual_plan",e.MONTHLY="wire_monthly_plan"}(t.PaymentPlanID||(t.PaymentPlanID={}))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FAILED="failed",e.PENDING="pending",e.SUCCEEDED="succeeded"}(r||(r={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedCurrency=void 0,function(e){e.CHF="CHF",e.EUR="EUR",e.USD="USD"}(t.SupportedCurrency||(t.SupportedCurrency={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(195),t),i(n(196),t),i(n(197),t),i(n(198),t),i(n(199),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceAPI=void 0;class r{constructor(e){this.client=e}async getServices(e=100,t,n){const i={method:"get",params:{size:e,start:t,tags:n},url:"/"+r.URL.SERVICES};return(await this.client.sendJSON(i)).data}async getTeamServices(e,t=100){const n={method:"get",params:{prefix:void 0,size:t,start:void 0},url:`${r.URL.TEAMS}/${e}/${r.URL.SERVICES}/${r.URL.WHITELISTED}`};return(await this.client.sendJSON(n)).data}async getProvider(e){const t={method:"get",url:`${r.URL.PROVIDERS}/${e}`};return(await this.client.sendJSON(t)).data}async getProviderServices(e){const t={method:"get",url:`${r.URL.PROVIDERS}/${e}/${r.URL.SERVICES}`};return(await this.client.sendJSON(t)).data}async getService(e,t){const n={method:"get",url:`${r.URL.PROVIDERS}/${e}/${r.URL.SERVICES}/${t}`};return(await this.client.sendJSON(n)).data}async postServiceWhitelist(e,t){const n={data:t,method:"post",url:`${r.URL.TEAMS}/${e}/${r.URL.SERVICES}/${r.URL.WHITELIST}`};return(await this.client.sendJSON(n)).data}}t.ServiceAPI=r,r.URL={PROVIDERS:"/providers",SERVICES:"services",TEAMS:"/teams",WHITELIST:"whitelist",WHITELISTED:"whitelisted"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceNotFoundError=t.InvalidInvitationCodeError=t.InviteEmailInUseError=t.TeamError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ConversationError"}}t.TeamError=i;t.InviteEmailInUseError=class extends i{constructor(e,t=r.BackendErrorLabel.INVITE_EMAIL_EXISTS,n=r.StatusCode.CONFLICT){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InviteEmailInUseError"}};t.InvalidInvitationCodeError=class extends i{constructor(e,t=r.BackendErrorLabel.INVALID_INVITATION_CODE,n=r.StatusCode.BAD_REQUEST){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="InvalidInvitationCodeError"}};t.ServiceNotFoundError=class extends i{constructor(e,t=r.SyntheticErrorLabel.SERVICE_NOT_FOUND,n=r.StatusCode.NOT_FOUND){super(e,t,n),Object.setPrototypeOf(this,new.target.prototype),this.name="ServiceNotFoundError"}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(202),t),i(n(203),t),i(n(204),t),i(n(205),t),i(n(206),t),i(n(207),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingAPI=void 0;class r{constructor(e){this.client=e}async getBillingTeam(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.TEAM}`};return(await this.client.sendJSON(t)).data}async putBillingInfo(e,t){const n={data:t,method:"put",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INFO}`};return(await this.client.sendJSON(n)).data}async getBillingInfo(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INFO}`};return(await this.client.sendJSON(t)).data}async putCard(e,t){const n={data:{stripeToken:t},method:"put",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.CARD}`};return(await this.client.sendJSON(n)).data}async getCard(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.CARD}`};return(await this.client.sendJSON(t)).data}async postCoupon(e,t){const n={data:{coupon:t},method:"post",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.COUPON}`};return(await this.client.sendJSON(n)).data}async deleteCoupon(e,t){const n={data:{coupon:t},method:"delete",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.COUPON}`};await this.client.sendJSON(n)}async getCurrentPlan(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.PLAN}`};return(await this.client.sendJSON(t)).data}async putPlan(e,t){const n={data:{planId:t},method:"put",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.PLAN}`};return(await this.client.sendJSON(n)).data}async getAvailablePlans(e,t){const n={params:t,method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.PLAN}/${r.URL.LIST}`};return(await this.client.sendJSON(n)).data}async getSupportedCurrencies(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.CURRENCIES}`};return(await this.client.sendJSON(t)).data}async getUpcomingInvoice(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INVOICES}/${r.URL.UPCOMING}`};return(await this.client.sendJSON(t)).data}async getInvoices(e,t=r.DEFAULT_INVOICES_CHUNK_SIZE,n){const i={method:"get",params:{size:t,start:n},url:`${r.URL.TEAMS}/${e}/${r.URL.BILLING}/${r.URL.INVOICES}`};return(await this.client.sendJSON(i)).data}}t.BillingAPI=r,r.DEFAULT_INVOICES_CHUNK_SIZE=10,r.URL={BILLING:"billing",CURRENCIES:"currencies",INFO:"info",CARD:"card",COUPON:"coupon",INVOICES:"invoices",PLAN:"plan",LIST:"list",TEAMS:"/teams",TEAM:"team",UPCOMING:"upcoming"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedCurrency=void 0,function(e){e.CHF="CHF",e.EUR="EUR",e.USD="USD"}(t.SupportedCurrency||(t.SupportedCurrency={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(209),t),i(n(210),t),i(n(211),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityProviderAPI=void 0;class r{constructor(e){this.client=e}async getIdentityProvider(e){const t={method:"get",url:`${r.URL.PROVIDER}/${e}`};return(await this.client.sendJSON(t)).data}async getIdentityProviders(){const e={method:"get",url:""+r.URL.PROVIDER};return(await this.client.sendJSON(e)).data}async deleteIdentityProvider(e,t){const n={method:"delete",url:`${r.URL.PROVIDER}/${e}`};t&&(n.params={purge:t}),await this.client.sendJSON(n)}async postIdentityProvider(e,t){const n={data:e,method:"post",url:""+r.URL.PROVIDER};t&&(n.params={replaces:t});return(await this.client.sendXML(n)).data}async putIdentityProvider(e,t){const n={data:t,method:"put",url:`${r.URL.PROVIDER}/${e}`};return(await this.client.sendXML(n)).data}async getMetadata(){const e={method:"get",url:`${r.URL.SSO}/${r.URL.METADATA}`};return(await this.client.sendJSON(e)).data}}t.IdentityProviderAPI=r,r.URL={METADATA:"metadata",PROVIDER:"/identity-providers",SSO:"/sso"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(39),t),i(n(213),t),i(n(39),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureAPI=void 0;const r=n(0),i=n(41),o=n(40);class s{constructor(e){this.client=e}async getAllFeatures(){const e={method:"get",url:s.URL.FEATURE_CONFIGS};return(await this.client.sendJSON(e)).data}async getAllTeamFeatures(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}`};return(await this.client.sendJSON(t)).data}async getLegalholdFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.LEGAL_HOLD}`};return(await this.client.sendJSON(t)).data}async getConversationGuestLinkFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.CONVERSATION_GUEST_LINKS}`};return(await this.client.sendJSON(t)).data}async putConversationGuestLinkFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.CONVERSATION_GUEST_LINKS}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.FEATURE_LOCKED:throw new o.FeatureLockedError(e.message)}throw e}}async getConferenceCallingFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.CALLING_CONFERENCE}`};return(await this.client.sendJSON(t)).data}async putConferenceCallingFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.CALLING_CONFERENCE}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.FEATURE_LOCKED:throw new o.FeatureLockedError(e.message)}throw e}}async getVideoCallingFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.CALLING_VIDEO}`};return(await this.client.sendJSON(t)).data}async putVideoCallingFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.CALLING_VIDEO}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.FEATURE_LOCKED:throw new o.FeatureLockedError(e.message)}throw e}}async getSelfDeletingMessagesFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.SELF_DELETING_MESSAGES}`};return(await this.client.sendJSON(t)).data}async putSelfDeletingMessagesFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.SELF_DELETING_MESSAGES}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.FEATURE_LOCKED:throw new o.FeatureLockedError(e.message)}throw e}}async getFileSharingFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.FILE_SHARING}`};return(await this.client.sendJSON(t)).data}async putFileSharingFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.FILE_SHARING}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.FEATURE_LOCKED:throw new o.FeatureLockedError(e.message)}throw e}}async getSndFactorPasswordFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.SND_FACTOR_PASSWORD}`};return(await this.client.sendJSON(t)).data}async getSSOFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.SSO}`};return(await this.client.sendJSON(t)).data}async getMLSFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.MLS}`};return(await this.client.sendJSON(t)).data}async putMLSFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}${s.URL.MLS}`};return(await this.client.sendJSON(n)).data}async getDigitalSignatureFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.DIGITAL_SIGNATURES}`};return(await this.client.sendJSON(t)).data}async getAppLockFeature(e){const t={method:"get",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.APPLOCK}`};return(await this.client.sendJSON(t)).data}async putAppLockFeature(e,t){const n={data:t,method:"put",url:`${s.URL.TEAMS}/${e}/${s.URL.FEATURES}/${s.URL.APPLOCK}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.APP_LOCK_INVALID_TIMEOUT:throw new i.InvalidAppLockTimeoutError(e.message);case r.BackendErrorLabel.FEATURE_LOCKED:throw new o.FeatureLockedError(e.message)}throw e}}}t.FeatureAPI=s,s.URL={APPLOCK:"appLock",CALLING_CONFERENCE:"conferenceCalling",CALLING_VIDEO:"videoCalling",SELF_DELETING_MESSAGES:"selfDeletingMessages",DIGITAL_SIGNATURES:"digitalSignatures",CONVERSATION_GUEST_LINKS:"conversationGuestLinks",FEATURE_CONFIGS:"/feature-configs",FEATURES:"features",FILE_SHARING:"fileSharing",LEGAL_HOLD:"legalhold",SND_FACTOR_PASSWORD:"sndFactorPasswordChallenge",SSO:"sso",MLS:"mls",TEAMS:"/teams"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelfDeletingTimeout=t.FeatureLockStatus=t.FeatureStatus=void 0,function(e){e.DISABLED="disabled",e.ENABLED="enabled"}(t.FeatureStatus||(t.FeatureStatus={})),function(e){e.LOCKED="locked",e.UNLOCKED="unlocked"}(t.FeatureLockStatus||(t.FeatureLockStatus={})),function(e){e[e.OFF=0]="OFF",e[e.SECONDS_10=10]="SECONDS_10",e[e.MINUTES_5=300]="MINUTES_5",e[e.HOURS_1=3600]="HOURS_1",e[e.DAYS_1=86400]="DAYS_1",e[e.WEEKS_1=604800]="WEEKS_1",e[e.WEEKS_4=2419200]="WEEKS_4"}(t.SelfDeletingTimeout||(t.SelfDeletingTimeout={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURE_KEY=void 0,function(e){e.APPLOCK="appLock",e.CLASSIFIED_DOMAINS="classifiedDomains",e.CONFERENCE_CALLING="conferenceCalling",e.CONVERSATION_GUEST_LINKS="conversationGuestLinks",e.DIGITAL_SIGNATURES="digitalSignatures",e.FILE_SHARING="fileSharing",e.LEGALHOLD="legalhold",e.MLS="MLS",e.SEARCH_VISIBILITY="searchVisibility",e.SELF_DELETING_MESSAGES="selfDeletingMessages",e.SND_FACTOR_PASSWORD="sndFactorPasswordChallenge",e.SSO="sso",e.VALIDATE_SAML_EMAILS="validateSAMLemails",e.VIDEO_CALLING="videoCalling"}(t.FEATURE_KEY||(t.FEATURE_KEY={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(218),t),i(n(219),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamConversationAPI=void 0;class r{constructor(e){this.client=e}async deleteConversation(e,t){const n={method:"delete",url:`${r.URL.TEAMS}/${e}/${r.URL.CONVERSATIONS}/${t}`};await this.client.sendJSON(n)}async getConversation(e,t){const n={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.CONVERSATIONS}/${t}`};return(await this.client.sendJSON(n)).data}async getConversations(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.CONVERSATIONS}`};return(await this.client.sendJSON(t)).data}async getRoles(e){const t={method:"get",url:`${r.URL.TEAMS}/${e}/${r.URL.CONVERSATIONS}/${r.URL.ROLES}`};return(await this.client.sendJSON(t)).data}}t.TeamConversationAPI=r,r.URL={CONVERSATIONS:"conversations",ROLES:"roles",TEAMS:"/teams"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e.CONNECTED="NetworkState.CONNECTED",e.CONNECTING="NetworkState.CONNECTING",e.DISCONNECTED="NetworkState.DISCONNECTED",e.UNDEFINED="NetworkState.UNDEFINED"}(t.ConnectionState||(t.ConnectionState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentType=void 0,function(e){e.APPLICATION_JSON="application/json;charset=UTF-8",e.APPLICATION_PROTOBUF="application/x-protobuf",e.APPLICATION_XML="application/xml",e.MESSAGES_MLS="message/mls"}(t.ContentType||(t.ContentType={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const a=n(6),c=n(223),u=n(7),l=s(n(4)),d=s(n(3)),f=n(8),p=n(0),h=n(43),E=n(44),O=o(n(226));var y;!function(e){e.ON_CONNECTION_STATE_CHANGE="HttpClient.TOPIC.ON_CONNECTION_STATE_CHANGE",e.ON_INVALID_TOKEN="HttpClient.TOPIC.ON_INVALID_TOKEN"}(y||(y={}));class _ extends a.EventEmitter{constructor(e,t){super(),this.config=e,this.accessTokenStore=t,this.versionPrefix="",this.client=l.default.create({baseURL:this.config.urls.rest}),(0,O.default)(this.client,{retries:1/0,retryDelay:O.default.exponentialDelay,retryCondition:e=>{const{response:t,request:n}=e;return!t&&n&&!Object.keys(n).length?(this.logger.warn("Disconnected from backend"),this.updateConnectionState(p.ConnectionState.DISCONNECTED),!0):(401===(null==t?void 0:t.status)||403===(null==t?void 0:t.status))&&(0,O.isNetworkOrIdempotentRequestError)(e)},shouldResetTimeout:!0}),this.connectionState=p.ConnectionState.UNDEFINED,this.logger=(0,d.default)("@wireapp/api-client/http/HttpClient",{logger:console,markdown:!1}),this.requestQueue=new c.PriorityQueue({maxRetries:0,retryDelay:u.TimeUtil.TimeInMillis.SECOND})}useVersion(e){this.versionPrefix=e>0?"/v"+e:""}updateConnectionState(e){this.connectionState!==e&&(this.connectionState=e,this.emit(_.TOPIC.ON_CONNECTION_STATE_CHANGE,this.connectionState))}async _sendRequest(e,t=!1,n=!0){var r,i;if(this.accessTokenStore.accessToken){const{token_type:n,access_token:r}=this.accessTokenStore.accessToken;t?e.params=Object.assign(Object.assign({},e.params),{access_token:r}):e.headers=Object.assign(Object.assign({},e.headers),{Authorization:`${n} ${r}`})}try{const t=await this.client.request(Object.assign(Object.assign({},e),{url:e.withCredentials?e.url:`${this.versionPrefix}${e.url}`,maxBodyLength:104857600,maxContentLength:104857600}));return this.updateConnectionState(p.ConnectionState.CONNECTED),t}catch(o){const s=async()=>(this.logger.warn(`Access token refresh triggered for "${e.method}" request to "${e.url}".`),await this.refreshAccessToken(),e["axios-retry"]={retries:0},this._sendRequest(e,t,!1)),a=!!(null===(r=this.accessTokenStore)||void 0===r?void 0:r.accessToken);if(_.isAxiosError(o)&&(null===(i=o.response)||void 0===i?void 0:i.status)===p.StatusCode.UNAUTHORIZED)return s();if(_.isBackendError(o)){const t=p.BackendErrorMapper.map(new p.BackendError(o.response.data.message,o.response.data.label,o.response.data.code)),r=t.code===p.StatusCode.UNAUTHORIZED;if((t instanceof f.TokenExpiredError||r)&&a&&n)return s();throw(t instanceof f.InvalidTokenError||t instanceof f.MissingCookieError)&&(this.logger.warn(`Cannot renew access token for "${e.method}" request to "${e.url}" because cookie/token is invalid: ${t.message}`,t),this.emit(_.TOPIC.ON_INVALID_TOKEN,t)),t}throw o}}static isAxiosError(e){return!0===e.isAxiosError}static isBackendError(e){if(e.response){const{data:t}=e.response;return!!(null==t?void 0:t.code)&&!!(null==t?void 0:t.label)&&!!(null==t?void 0:t.message)}return!1}hasValidAccessToken(e=1e4){if(this.accessTokenStore.tokenExpirationDate){const t=Date.now();return this.accessTokenStore.tokenExpirationDate-e>=t}return!1}async refreshAccessToken(){var e;let t;(null===(e=this.accessTokenStore.accessToken)||void 0===e?void 0:e.access_token)&&(t=this.accessTokenStore.accessToken);const n=await this.postAccess(t);return this.logger.info(`Received updated access token. It will expire in "${n.expires_in}" seconds.`,h.ObfuscationUtil.obfuscateAccessToken(n)),this.accessTokenStore.updateToken(n)}async postAccess(e){const t={headers:{},method:"post",url:""+f.AuthAPI.URL.ACCESS,withCredentials:!0};(null==e?void 0:e.access_token)&&(t.headers.Authorization=`${e.token_type} ${decodeURIComponent(e.access_token)}`);return(await(0,E.sendRequestWithCookie)(this,t)).data}async sendRequest(e,t=!1,n=!1){return n?this.requestQueue.add(()=>this._sendRequest(e,t)):this._sendRequest(e,t)}sendJSON(e,t=!1){return e.headers=Object.assign(Object.assign({},e.headers),{"Content-Type":p.ContentType.APPLICATION_JSON}),this.sendRequest(e,!1,t)}sendXML(e){return e.headers=Object.assign(Object.assign({},e.headers),{"Content-Type":p.ContentType.APPLICATION_XML}),this.sendRequest(e,!1,!1)}sendProtocolBuffer(e,t=!1){return e.headers=Object.assign(Object.assign({},e.headers),{"Content-Type":p.ContentType.APPLICATION_PROTOBUF}),this.sendRequest(e,!1,t)}sendProtocolMls(e,t=!1){return e.headers=Object.assign(Object.assign({},e.headers),{"Content-Type":p.ContentType.MESSAGES_MLS}),this.sendRequest(e,!1,t)}}t.HttpClient=_,_.TOPIC=y},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(42),t),i(n(14),t),i(n(224),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PriorityQueue=void 0;const r=n(42),i=n(14);t.PriorityQueue=class{constructor(e){this.config={comparator:(e,t)=>e.priority===t.priority?e.timestamp-t.timestamp:t.priority-e.priority,maxRetries:0,maxRetryDelay:Number.MAX_SAFE_INTEGER,retryDelay:1e3,retryGrowthFactor:1.3},this.isRunning=!1,this.queue=[],this.config=Object.assign(Object.assign({},this.config),e)}add(e,t=i.Priority.MEDIUM,n){return new Promise((i,o)=>{const s=new r.Item;s.fn=e,s.label=n,s.priority=t,s.reject=o,s.resolve=i,s.retry=0,s.timestamp=Date.now()+this.size,this.enqueue(s),this.isRunning||(this.isRunning=!0,this.processList())})}enqueue(e){this.queue.push(e),this.queue.sort(this.config.comparator)}delete(e){this.queue=this.queue.filter(t=>t.label!==e)}deleteAll(){this.queue=[]}get all(){return this.queue}get first(){return this.queue[0]}get last(){return this.queue[this.queue.length-1]}get size(){return this.queue.length}async processList(){const e=this.queue.shift();if(e)try{e.resolve(await e.fn()),this.processList()}catch(t){e.retry>=this.config.maxRetries?(e.reject(t),this.processList()):(this.enqueue(e),setTimeout(()=>this.processList(),this.getGrowingDelay(e.retry)),e.retry++)}else this.isRunning=!1}getGrowingDelay(e){const t=e<1?this.config.retryDelay:this.config.retryDelay*e*this.config.retryGrowthFactor;return Math.min(t,this.config.maxRetryDelay)}toString(){return this.queue.map((e,t)=>`"${t}": ${e.toString()}`).join("\r\n")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObfuscationUtil=void 0;t.ObfuscationUtil={obfuscateAccessToken:(e,t=!0)=>t?Object.assign(Object.assign({},e),{access_token:e.access_token.substr(0,20)+"..."}):e,obfuscateCookie:(e,t=!0)=>{if(t){const t=e.clone();return t.value=e.value.substr(0,20)+"...",t}return e}}},function(e,t,n){e.exports=n(227).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkError=s,t.isRetryableError=u,t.isSafeRequestError=l,t.isIdempotentRequestError=d,t.isNetworkOrIdempotentRequestError=f,t.exponentialDelay=h,t.default=O;var r,i=n(228),o=(r=i)&&r.__esModule?r:{default:r};function s(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,o.default)(e)}var a=["get","head","options"],c=a.concat(["put","delete"]);function u(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function l(e){return!!e.config&&(u(e)&&-1!==a.indexOf(e.config.method))}function d(e){return!!e.config&&(u(e)&&-1!==c.indexOf(e.config.method))}function f(e){return s(e)||d(e)}function p(){return 0}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e),n=.2*t*Math.random();return t+n}function E(e){var t=e["axios-retry"]||{};return t.retryCount=t.retryCount||0,e["axios-retry"]=t,t}function O(e,t){e.interceptors.request.use((function(e){return E(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(function(n){var r=n.config;if(!r)return Promise.reject(n);var i=function(e,t){return Object.assign({},t,e["axios-retry"])}(r,t),o=i.retries,s=void 0===o?3:o,a=i.retryCondition,c=void 0===a?f:a,u=i.retryDelay,l=void 0===u?p:u,d=i.shouldResetTimeout,h=void 0!==d&&d,O=E(r);if(c(n)&&O.retryCount<s){O.retryCount+=1;var y=l(O.retryCount,n);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,r),!h&&r.timeout&&O.lastRequestTime){var _=Date.now()-O.lastRequestTime;r.timeout=Math.max(r.timeout-_-y,1)}return r.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(r))}),y)}))}return Promise.reject(n)}))}O.isNetworkError=s,O.isSafeRequestError=l,O.isIdempotentRequestError=d,O.isNetworkOrIdempotentRequestError=f,O.exponentialDelay=h,O.isRetryableError=u},function(e,t,n){"use strict";var r=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],i=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];e.exports=function(e){return!e||!e.code||(-1!==r.indexOf(e.code)||-1===i.indexOf(e.code))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkError=void 0;class r extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype),this.name="NetworkError",this.stack=(new Error).stack}}t.NetworkError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleProgressEvent=void 0;t.handleProgressEvent=e=>e&&(t=>{e(t.loaded/t.total)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientAPI=void 0;const r=n(46),i=n(0);class o{constructor(e){this.client=e}async postClient(e){const t={data:e,method:"post",url:o.URL.CLIENTS};return(await this.client.sendJSON(t)).data}async putClient(e,t){const n={data:t,method:"put",url:`${o.URL.CLIENTS}/${e}`};try{await this.client.sendJSON(n)}catch(e){switch(e.label){case i.BackendErrorLabel.CLIENT_CAPABILITY_REMOVED:throw new r.ClientCapabilityRemovedError(e.message)}throw e}}async getClientCapabilities(e){const t={method:"get",url:`${o.URL.CLIENTS}/${e}/${o.URL.CAPABILITIES}`};return(await this.client.sendJSON(t)).data}async deleteClient(e,t){const n={data:{password:t},method:"delete",url:`${o.URL.CLIENTS}/${e}`};await this.client.sendJSON(n)}async getClient(e){const t={method:"get",url:`${o.URL.CLIENTS}/${e}`};return(await this.client.sendJSON(t)).data}async getClients(){const e={method:"get",url:o.URL.CLIENTS};return(await this.client.sendJSON(e)).data}async getClientPreKeys(e){const t={method:"get",url:`${o.URL.CLIENTS}/${e}/${o.URL.PREKEYS}`};return(await this.client.sendJSON(t,!0)).data}async uploadMLSKeyPackages(e,t){const n={data:{key_packages:t},method:"POST",url:`/${o.URL.MLS_CLIENTS}/${o.URL.MLS_KEY_PACKAGES}/self/${e}`};await this.client.sendJSON(n,!0)}async claimMLSKeyPackages(e,t,n){const r={method:"POST",url:`/${o.URL.MLS_CLIENTS}/${o.URL.MLS_KEY_PACKAGES}/claim/${t}/${e}${n?"?skip_own="+n:""}`};return(await this.client.sendJSON(r,!0)).data}async getMLSKeyPackageCount(e){const t={method:"GET",url:`/${o.URL.MLS_CLIENTS}/${o.URL.MLS_KEY_PACKAGES}/self/${e}/count`};return(await this.client.sendJSON(t,!0)).data.count}}t.ClientAPI=o,o.URL={CLIENTS:"/clients",MLS_CLIENTS:"mls",MLS_KEY_PACKAGES:"key-packages",CAPABILITIES:"capabilities",PREKEYS:"prekeys"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCapability=void 0,function(e){e.LEGAL_HOLD_IMPLICIT_CONSENT="legalhold-implicit-consent"}(t.ClientCapability||(t.ClientCapability={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientClassification=void 0,function(e){e.DESKTOP="desktop",e.LEGAL_HOLD="legalhold",e.PHONE="phone",e.TABLET="tablet"}(t.ClientClassification||(t.ClientClassification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientType=void 0,function(e){e.NONE="none",e.PERMANENT="permanent",e.TEMPORARY="temporary"}(t.ClientType||(t.ClientType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookie=void 0;t.Cookie=class{constructor(e,t){this.expiration="0",this.zuid="",this.expiration=t,this.zuid=e}get isExpired(){return new Date>new Date(this.expiration)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountAPI=void 0;const r=n(253),i=n(0);class o{constructor(e){this.client=e}async postDeleteAccount(e,t){const n={data:{code:t,key:e},method:"post",url:o.URL.DELETE};await this.client.sendJSON(n)}async postPasswordReset(e){const t={data:{email:e},method:"post",url:o.URL.PASSWORD_RESET};await this.client.sendJSON(t)}async postBotPasswordReset(e){const t={data:{email:e},method:"post",url:`${o.URL.PROVIDER}${o.URL.PASSWORD_RESET}`};await this.client.sendJSON(t)}async postPasswordResetComplete(e,t,n){const r={data:{code:n,key:t,password:e},method:"post",url:`${o.URL.PASSWORD_RESET}/${o.URL.PASSWORD_RESET_COMPLETE}`};await this.client.sendJSON(r)}async postBotPasswordResetComplete(e,t,n){const r={data:{code:n,key:t,password:e},method:"post",url:`${o.URL.PROVIDER}${o.URL.PASSWORD_RESET}/${o.URL.PASSWORD_RESET_COMPLETE}`};await this.client.sendJSON(r)}async getVerifyEmail(e,t){const n={method:"get",params:{code:t,key:e},url:o.URL.ACTIVATE};await this.client.sendJSON(n)}async getVerifyBot(e,t){const n={method:"get",params:{code:t,key:e},url:`${o.URL.PROVIDER}${o.URL.ACTIVATE}`};await this.client.sendJSON(n)}async getDomain(e){const t={method:"get",url:`${o.URL.CUSTOM_BACKEND}/${o.URL.BY_DOMAIN}/${e}`};try{return(await this.client.sendJSON(t)).data}catch(e){const t=e;switch(t.label){case i.BackendErrorLabel.CUSTOM_BACKEND_NOT_FOUND:throw new r.CustomBackendNotFoundError(t.message)}throw e}}async getSSOSettings(){const e={method:"get",url:`${o.URL.SSO}/${o.URL.SETTINGS}`};return(await this.client.sendJSON(e)).data}async getCallConfig(e){const t={method:"get",params:{limit:e},url:`${o.URL.CALLS}/${o.URL.CALLS_CONFIG}/${o.URL.CALLS_CONFIG_V2}`};return(await this.client.sendJSON(t)).data}async getConfig(){const e={method:"get",url:""+o.URL.BACKEND_CONFIG};return(await this.client.sendJSON(e)).data}}t.AccountAPI=o,o.URL={ACTIVATE:"/activate",BACKEND_CONFIG:"/config.json",BY_DOMAIN:"by-domain",CALLS:"/calls",CALLS_CONFIG:"config",CALLS_CONFIG_V2:"v2",CUSTOM_BACKEND:"/custom-backend",DELETE:"/delete",PASSWORD_RESET:"/password-reset",PASSWORD_RESET_COMPLETE:"complete",PROVIDER:"/provider",SETTINGS:"settings",SSO:"/sso"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomBackendNotFoundError=t.AccountError=void 0;const r=n(0);class i extends r.BackendError{constructor(e,t,n){super(e,t,n),Object.setPrototypeOf(this,i.prototype),this.name="AccountError"}}t.AccountError=i;class o extends i{constructor(e,t=r.BackendErrorLabel.CUSTOM_BACKEND_NOT_FOUND,n=r.StatusCode.NOT_FOUND){super(e,t,n),Object.setPrototypeOf(this,o.prototype),this.name="CustomBackendNotFoundError"}}t.CustomBackendNotFoundError=o},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(255),t),i(n(49),t),i(n(258),t),i(n(51),t)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AssetAPI=void 0;const i=r(n(4)),o=n(49),s=n(50),a=n(0),c=n(51),u=n(5),l=n(257),d="/assets/v3",f="/assets/v4",p="/bot/assets",h="/otr/assets",E="/conversations",O="/assets",y="/assets";t.AssetAPI=class{constructor(e,t){this.client=e,this.backendFeatures=t}getAssetShared(e,t,n=!1,r){if(t&&!(0,c.isValidToken)(t))throw new TypeError(`Expected token "${t.substr(0,5)}..." (redacted) to be base64 encoded string.`);const o=i.default.CancelToken.source(),s={cancelToken:o.token,method:"get",onDownloadProgress:(0,a.handleProgressEvent)(r),onUploadProgress:(0,a.handleProgressEvent)(r),params:{},responseType:"arraybuffer",url:e};t&&(s.params.asset_token=t),n&&(s.params.forceCaching=n);return{cancel:()=>o.cancel(a.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{const e=await this.client.sendRequest(s,!0);return{buffer:e.data,mimeType:e.headers["content-type"]}}catch(e){if(e.message===a.SyntheticErrorLabel.REQUEST_CANCELLED)throw new u.RequestCancellationError("Asset download got cancelled.");throw e}})()}}postAssetShared(e,t,n,r){var c;const d="Frontier"+(0,l.unsafeAlphanumeric)(),f=JSON.stringify({public:null===(c=null==n?void 0:n.public)||void 0===c||c,retention:(null==n?void 0:n.retention)||o.AssetRetentionPolicy.PERSISTENT,domain:null==n?void 0:n.domain}),p=`--${d}\r\nContent-Type: application/json;charset=utf-8\r\nContent-length: ${f.length}\r\n\r\n`+f+"\r\n"+`--${d}\r\nContent-Type: application/octet-stream\r\n`+`Content-length: ${t.length}\r\n`+`Content-MD5: ${(0,s.base64MD5FromBuffer)(t.buffer)}\r\n\r\n`,h=`\r\n--${d}--\r\n`,E=i.default.CancelToken.source(),O={cancelToken:E.token,data:(0,s.concatToBuffer)(p,t,h),headers:{"Content-Type":"multipart/mixed; boundary="+d},method:"post",onDownloadProgress:(0,a.handleProgressEvent)(r),onUploadProgress:(0,a.handleProgressEvent)(r),url:e};return{cancel:()=>E.cancel(a.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{return(await this.client.sendRequest(O)).data}catch(e){if(e.message===a.SyntheticErrorLabel.REQUEST_CANCELLED)throw new u.RequestCancellationError("Asset upload got cancelled.");throw e}})()}}getAssetV1(e,t,n=!1,r){if(!(0,c.isValidUUID)(e))throw new TypeError(`Expected asset ID "${e}" to only contain alphanumeric values and dashes.`);if(!(0,c.isValidUUID)(t))throw new TypeError(`Expected conversation ID "${t}" to only contain alphanumeric values and dashes.`);const o=i.default.CancelToken.source(),s={cancelToken:o.token,method:"get",onDownloadProgress:(0,a.handleProgressEvent)(r),onUploadProgress:(0,a.handleProgressEvent)(r),params:{conv_id:t},responseType:"arraybuffer",url:`${O}/${e}`};n&&(s.params.forceCaching=n);return{cancel:()=>o.cancel(a.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{const e=await this.client.sendRequest(s,!0);return{buffer:e.data,mimeType:e.headers["content-type"]}}catch(e){if(e.message===a.SyntheticErrorLabel.REQUEST_CANCELLED)throw new u.RequestCancellationError("Asset download got cancelled.");throw e}})()}}getAssetV2(e,t,n=!1,r){if(!(0,c.isValidUUID)(e))throw new TypeError(`Expected asset ID "${e}" to only contain alphanumeric values and dashes.`);if(!(0,c.isValidUUID)(t))throw new TypeError(`Expected conversation ID "${t}" to only contain alphanumeric values and dashes.`);const o=i.default.CancelToken.source(),s={cancelToken:o.token,method:"get",onDownloadProgress:(0,a.handleProgressEvent)(r),onUploadProgress:(0,a.handleProgressEvent)(r),params:{},responseType:"arraybuffer",url:`${E}/${t}${h}/${e}`};n&&(s.params.forceCaching=n);return{cancel:()=>o.cancel(a.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{const e=await this.client.sendRequest(s,!0);return{buffer:e.data,mimeType:e.headers["content-type"]}}catch(e){if(e.message===a.SyntheticErrorLabel.REQUEST_CANCELLED)throw new u.RequestCancellationError("Asset download got cancelled.");throw e}})()}}getAssetV3(e,t,n=!1,r){if(!(0,c.isValidUUID)(e))throw new TypeError(`Expected asset ID "${e}" to only contain alphanumeric values and dashes.`);const i=this.backendFeatures.version>=2?y:d;return this.getAssetShared(`${i}/${e}`,t,n,r)}getAssetV4(e,t,n,r=!1,i){if(!(0,c.isValidUUID)(e))throw new TypeError(`Expected asset ID "${e}" to only contain alphanumeric values and dashes.`);const o=this.backendFeatures.version>=2?y:f;return this.getAssetShared(`${o}/${t}/${e}`,n,r,i)}getServiceAsset(e,t,n=!1,r){if(!(0,c.isValidUUID)(e))throw new TypeError(`Expected asset ID "${e}" to only contain alphanumeric values and dashes.`);const i=`${p}/${e}`;return this.getAssetShared(i,t,n,r)}postAsset(e,t,n){const r=this.backendFeatures.version>=2?y:d;return this.postAssetShared(r,e,t,n)}postServiceAsset(e,t,n){const r=p;return this.postAssetShared(r,e,t,n)}}},function(e,t,n){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,i,o,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=a,o[15]=c,n(l,o),l}function s(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return a(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,s,a,c=this.byteLength,u=t(n,c),l=c;return r!==e&&(l=t(r,c)),u>l?new ArrayBuffer(0):(i=l-u,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,u,i),s.set(a),o)}}(),l.prototype.append=function(e){return this.appendBinary(c(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var r,i,o,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,n(this._hash,e)},l.hash=function(e,t){return l.hashBinary(c(e),t)},l.hashBinary=function(e,t){var n=a(o(e));return t?u(n):n},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,r,o,s,a,c=(r=this._buff.buffer,o=e,s=!0,(a=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),a.set(new Uint8Array(o),r.byteLength),s?a:a.buffer),u=c.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)n(this._hash,i(c.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var r=a(function(e){var t,r,o,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,i(e.subarray(t-64,t)));for(e=t-64<u?e.subarray(t-64):new Uint8Array(0),r=e.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=a,o[15]=c,n(l,o),l}(new Uint8Array(e)));return t?u(r):r},l}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeAlphanumeric=void 0;t.unsafeAlphanumeric=(e=32)=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from(Array(e).keys()).reduce((e,n)=>e+t[Math.floor(Math.random()*t.length)],"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(260),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backend=void 0;t.Backend={PRODUCTION:{name:"production",rest:"https://prod-nginz-https.wire.com",ws:"wss://prod-nginz-ssl.wire.com"},STAGING:{name:"staging",rest:"https://staging-nginz-https.zinfra.io",ws:"wss://staging-nginz-ssl.zinfra.io"}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(262),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastAPI=void 0;const r=n(18),i=n(21);class o{constructor(e){this.client=e}async postBroadcastMessage(e,t,n){if(!e)throw new i.ValidationError("Unable to send OTR message without client ID.");const r={data:t,method:"post",url:o.URL.BROADCAST};if(void 0!==n){const e=Array.isArray(n)?n.join(","):n;r.params={ignore_missing:e},delete t.report_missing}else void 0===t.report_missing&&(r.params={ignore_missing:!!t.data});return(await this.client.sendJSON(r)).data}async postBroadcastProtobufMessage(e,t,n){if(!e)throw new i.ValidationError("Unable to send OTR message without client ID.");const s={data:r.proteus.NewOtrMessage.encode(t).finish(),method:"post",url:o.URL.BROADCAST};if(void 0!==n){const e=Array.isArray(n)?n.join(","):n;s.params={ignore_missing:e},t.reportMissing=[]}else void 0!==t.reportMissing&&t.reportMissing.length||(s.params={ignore_missing:!!t.blob});return(await this.client.sendProtocolBuffer(s)).data}async postBroadcastFederatedMessage(e,t){if(!e)throw new i.ValidationError("Unable to send OTR message without client ID.");const n={data:r.proteus.QualifiedNewOtrMessage.encode(t).finish().slice(),method:"post",url:o.URL.BROADCAST_FEDERATED};return(await this.client.sendProtocolBuffer(n)).data}}t.BroadcastAPI=o,o.URL={BROADCAST:"/broadcast/otr/messages",BROADCAST_FEDERATED:"/broadcast/proteus/messages"}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(264),t),i(n(265),t),i(n(266),t),i(n(267),t),i(n(268),t),i(n(269),t),i(n(52),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionAPI=void 0;const r=n(0),i=n(52);class o{constructor(e,t){this.client=e,this.backendFeatures=t}async getConnection(e){const t="string"==typeof e?e:e.id,n={method:"get",url:"string"!=typeof e&&this.backendFeatures.federationEndpoints?`${o.URL.CONNECTIONS}/${e.domain}/${e}`:`${o.URL.CONNECTIONS}/${t}`};return(await this.client.sendJSON(n)).data}async getConnections(e,t=100){const n={method:"get",params:{size:t,start:e},url:o.URL.CONNECTIONS};return(await this.client.sendJSON(n)).data}getConnectionList(){if(!this.backendFeatures.federationEndpoints)return this.getAllConnections();let e=[];const t=async n=>{const r={method:"POST",data:{size:500,paging_state:n},url:"/list-connections"},{data:i}=await this.client.sendJSON(r),{connections:o,has_more:s,paging_state:a}=i;return o.length&&(e=e.concat(o)),s?t(a):e};return t()}getAllConnections(){let e=[];const t=async n=>{const{connections:r,has_more:i}=await this.getConnections(n,500);if(r.length&&(e=e.concat(r)),i){const e=r.pop();if(e)return t(e.to)}return e};return t()}async postConnection(e,t){return this.backendFeatures.federationEndpoints?this.postConnection_v2(e):this.postConnection_v1({user:e.id,name:t})}async postConnection_v1(e){const t={data:e,method:"post",url:o.URL.CONNECTIONS};try{return(await this.client.sendJSON(t)).data}catch(e){switch(e.label){case r.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT:throw new i.ConnectionLegalholdMissingConsentError(e.message)}throw e}}async postConnection_v2({id:e,domain:t}){const n={method:"post",url:`${o.URL.CONNECTIONS}/${t}/${e}`};try{return(await this.client.sendJSON(n)).data}catch(e){switch(e.label){case r.BackendErrorLabel.LEGAL_HOLD_MISSING_CONSENT:throw new i.ConnectionLegalholdMissingConsentError(e.message)}throw e}}async putConnection(e,t){const n="string"==typeof e?e:e.id,r={data:t,method:"put",url:this.backendFeatures.federationEndpoints&&"string"!=typeof e?`${o.URL.CONNECTIONS}/${e.domain}/${e.id}`:`${o.URL.CONNECTIONS}/${n}`};return(await this.client.sendJSON(r)).data}}t.ConnectionAPI=o,o.URL={CONNECTIONS:"/connections"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=void 0,function(e){e.ACCEPTED="accepted",e.BLOCKED="blocked",e.CANCELLED="cancelled",e.IGNORED="ignored",e.MISSING_LEGAL_HOLD_CONSENT="missing-legalhold-consent",e.PENDING="pending",e.SENT="sent",e.UNKNOWN="unknown"}(t.ConnectionStatus||(t.ConnectionStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(271),t),i(n(272),t),i(n(273),t),i(n(274),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GiphyAPI=void 0;class r{constructor(e){this.client=e}async getGiphyByIds(e){const t=e.ids.join(","),n={method:"get",params:{random_id:e.random_id,rating:e.rating},url:`${r.URL.PROXY}/${r.URL.GIPHY}/${t}`};return(await this.client.sendJSON(n)).data}async getGiphyById(e){const t={method:"get",url:`${r.URL.PROXY}/${r.URL.GIPHY}/${e}`};return(await this.client.sendJSON(t)).data}async getGiphyRandom(e){const t={method:"get",params:e,url:`${r.URL.PROXY}/${r.URL.GIPHY}/${r.URL.RANDOM}`};return(await this.client.sendJSON(t)).data}async getGiphySearch(e){const t={method:"get",params:e,url:`${r.URL.PROXY}/${r.URL.GIPHY}/${r.URL.SEARCH}`};return(await this.client.sendJSON(t)).data}async getGiphyTrending(e){const t={method:"get",params:e,url:`${r.URL.PROXY}/${r.URL.GIPHY}/${r.URL.TRENDING}`};return(await this.client.sendJSON(t)).data}}t.GiphyAPI=r,r.URL={GIPHY:"giphy/v1/gifs",PROXY:"/proxy",RANDOM:"random",SEARCH:"search",TRENDING:"trending"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GIPHY_RATING=void 0,function(e){e.ALL_AGES_AND_PEOPLE="g",e.MILD_SUBSTANCE="pg-13",e.REQUIRE_PARENTAL_PREVIEW="pg",e.STRONG_LANGUAGE="r"}(t.GIPHY_RATING||(t.GIPHY_RATING={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(276),t),i(n(277),t),i(n(278),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationAPI=t.NOTIFICATION_SIZE_MAXIMUM=void 0;const r=n(0);t.NOTIFICATION_SIZE_MAXIMUM=1e4;class i{constructor(e){this.client=e}async getLastNotification(e){const t={method:"get",params:{client:e},url:`${i.URL.NOTIFICATION}/${i.URL.LAST}`};return(await this.client.sendJSON(t)).data}async getNotifications(e,n=t.NOTIFICATION_SIZE_MAXIMUM,r){const o={method:"get",params:{client:e,since:r,size:n},url:i.URL.NOTIFICATION};return(await this.client.sendJSON(o)).data}async getAllNotifications(e,n){let i=[];const o=async(e,n)=>{var s,a;let c={notifications:[],time:"0",has_more:!1},u=!1;try{c=await this.getNotifications(e,t.NOTIFICATION_SIZE_MAXIMUM,n)}catch(e){if(!r.HttpClient.isAxiosError(e))throw e;c=(null===(a=null===(s=e.response)||void 0===s?void 0:s.data)||void 0===a?void 0:a.notifications)?e.response.data:c,u=!0}const{notifications:l,has_more:d}=c;if(l.length&&(i=i.concat(l)),d){const t=l[l.length-1];if(t)return o(e,t.id)}return{notifications:i,missedNotification:u?n:void 0}};return o(e,n)}async getNotification(e,t){const n={method:"get",params:{client:t},url:`${i.URL.NOTIFICATION}/${e}`};return(await this.client.sendJSON(n)).data}}t.NotificationAPI=i,i.URL={LAST:"last",NOTIFICATION:"/notifications"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketClient=t.AbortHandler=void 0;const i=n(6),o=r(n(3)),s=n(0),a=n(8),c=n(280);var u;!function(e){e.ON_ERROR="WebSocketClient.TOPIC.ON_ERROR",e.ON_INVALID_TOKEN="WebSocketClient.TOPIC.ON_INVALID_TOKEN",e.ON_MESSAGE="WebSocketClient.TOPIC.ON_MESSAGE",e.ON_STATE_CHANGE="WebSocketClient.TOPIC.ON_STATE_CHANGE"}(u||(u={}));class l{constructor(){this.aborted=!1,this.abort=()=>{this.aborted=!0},this.isAborted=()=>this.aborted}}t.AbortHandler=l;class d extends i.EventEmitter{constructor(e,t){super(),this.onConnect=()=>Promise.resolve(),this.onMessage=e=>{if(this.isLocked())this.bufferedMessages.push(e);else{const t=JSON.parse(e);this.emit(d.TOPIC.ON_MESSAGE,t)}},this.onError=async e=>{this.onStateChange(this.socket.getState()),this.emit(d.TOPIC.ON_ERROR,e),await this.refreshAccessToken()},this.onReconnect=async()=>(this.client.hasValidAccessToken()||await this.refreshAccessToken(),this.onConnect(),this.buildWebSocketUrl()),this.onOpen=e=>{this.onStateChange(this.socket.getState())},this.onClose=e=>{var t;null===(t=this.abortHandler)||void 0===t||t.abort(),this.bufferedMessages=[],this.onStateChange(this.socket.getState())},this.unlock=()=>{this.logger.info(`Unlocking WebSocket - Emitting "${this.bufferedMessages.length}" unprocessed messages`),this.isSocketLocked=!1;for(const e of this.bufferedMessages)this.onMessage(e);this.bufferedMessages=[]},this.lock=()=>{this.logger.info("Locking WebSocket"),this.isSocketLocked=!0},this.bufferedMessages=[],this.isSocketLocked=!1,this.baseUrl=e,this.client=t,this.isRefreshingAccessToken=!1,this.socket=new c.ReconnectingWebsocket(this.onReconnect),this.websocketState=this.socket.getState(),this.logger=(0,o.default)("@wireapp/api-client/tcp/WebSocketClient",{logger:console,markdown:!1})}onStateChange(e){e!==this.websocketState&&(this.websocketState=e,this.emit(d.TOPIC.ON_STATE_CHANGE,this.websocketState))}async connect(e,t){return t&&(this.onConnect=async()=>{this.abortHandler=new l;try{this.logger.info('Calling "onConnect"'),await t(this.abortHandler)}catch(e){this.logger.warn('Error during execution of "onConnect"',e),this.emit(d.TOPIC.ON_ERROR,e)}this.onStateChange(this.socket.getState())}),this.clientId=e,this.socket.setOnMessage(this.onMessage),this.socket.setOnError(this.onError),this.socket.setOnOpen(this.onOpen),this.socket.setOnClose(this.onClose),this.socket.connect(),this}async refreshAccessToken(){if(!this.isRefreshingAccessToken){this.isRefreshingAccessToken=!0;try{await this.client.refreshAccessToken()}catch(e){e instanceof s.NetworkError?this.logger.warn(e):e instanceof a.InvalidTokenError||e instanceof a.MissingCookieError?(this.logger.warn("[WebSocket] Cannot renew access token because cookie/token is invalid: "+e.message,e),this.emit(d.TOPIC.ON_INVALID_TOKEN,e)):this.emit(d.TOPIC.ON_ERROR,e)}finally{this.isRefreshingAccessToken=!1}}}disconnect(e,t=!0){this.socket&&this.socket.disconnect(e,t)}isLocked(){return this.isSocketLocked}buildWebSocketUrl(){const e=this.client.accessTokenStore.accessToken,t=e&&e.access_token?e.access_token:"";t||this.logger.warn("Reconnecting WebSocket with unset token");let n=`${this.baseUrl}/await?access_token=${t}`;return this.clientId&&(n+="&client="+this.clientId),n}}t.WebSocketClient=d,d.TOPIC=u},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReconnectingWebsocket=t.PingMessage=t.WEBSOCKET_STATE=t.CloseEventCode=void 0;const a=n(7),c=s(n(3)),u=s(n(281)),l=n(282),d=o(n(50));var f,p,h;!function(e){e[e.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",e[e.GOING_AWAY=1001]="GOING_AWAY",e[e.PROTOCOL_ERROR=1002]="PROTOCOL_ERROR",e[e.UNSUPPORTED_DATA=1003]="UNSUPPORTED_DATA"}(f=t.CloseEventCode||(t.CloseEventCode={})),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(p=t.WEBSOCKET_STATE||(t.WEBSOCKET_STATE={})),function(e){e.PING="ping",e.PONG="pong"}(h=t.PingMessage||(t.PingMessage={}));class E{constructor(e,t={}){this.onReconnect=e,this.PING_INTERVAL=20*a.TimeUtil.TimeInMillis.SECOND,this.internalOnError=e=>{this.logger.warn("WebSocket connection error",e),this.onError&&this.onError(e)},this.internalOnMessage=e=>{this.logger.debug("Incoming message");const t=d.bufferToString(e.data);t===h.PONG?(this.logger.debug("Received pong from WebSocket"),this.hasUnansweredPing=!1):this.onMessage&&this.onMessage(t)},this.internalOnOpen=e=>{this.logger.debug("WebSocket opened"),this.socket&&(this.socket.binaryType="arraybuffer"),this.onOpen&&this.onOpen(e)},this.internalOnReconnect=async()=>(this.logger.debug("Connecting to WebSocket"),this.startPinging(),this.onReconnect()),this.internalOnClose=e=>{this.logger.debug("WebSocket closed"),this.stopPinging(),this.onClose&&this.onClose(e)},this.sendPing=()=>{if(this.socket){if(this.hasUnansweredPing)return this.logger.warn("Ping interval check failed"),void this.stopPinging();this.hasUnansweredPing=!0,this.send(h.PING)}},this.logger=(0,c.default)("@wireapp/api-client/tcp/ReconnectingWebsocket",{logger:console,markdown:!1}),t.pingInterval&&(this.PING_INTERVAL=t.pingInterval),this.hasUnansweredPing=!1}connect(){this.socket=this.getReconnectingWebsocket(),this.socket.onmessage=this.internalOnMessage,this.socket.onerror=this.internalOnError,this.socket.onopen=this.internalOnOpen,this.socket.onclose=this.internalOnClose}send(e){this.socket&&this.socket.send(e)}startPinging(){this.stopPinging(),this.hasUnansweredPing=!1,this.pingerId=setInterval(this.sendPing,this.PING_INTERVAL)}stopPinging(){this.pingerId&&clearInterval(this.pingerId)}getState(){return this.socket?this.socket.readyState:p.CLOSED}disconnect(e="Closed by client",t=!0){this.socket&&(this.logger.info(`Disconnecting from WebSocket (reason: "${e}")`),this.socket.close(f.NORMAL_CLOSURE,e,{delay:0,fastClose:!0,keepClosed:t}))}getReconnectingWebsocket(){return new u.default(this.internalOnReconnect,void 0,E.RECONNECTING_OPTIONS)}setOnOpen(e){this.onOpen=e}setOnMessage(e){this.onMessage=e}setOnError(e){this.onError=e}setOnClose(e){this.onClose=e}}t.ReconnectingWebsocket=E,E.RECONNECTING_OPTIONS={WebSocket:"undefined"!=typeof window?WebSocket:l,connectionTimeout:4*a.TimeUtil.TimeInMillis.SECOND,debug:!1,maxReconnectionDelay:10*a.TimeUtil.TimeInMillis.SECOND,maxRetries:1/0,minReconnectionDelay:4*a.TimeUtil.TimeInMillis.SECOND,reconnectionDelayGrowFactor:1.3}},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}var a=function(e,t){this.target=t,this.type=e},c=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return i(t,e),t}(a),u=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var i=e.call(this,"close",r)||this;return i.wasClean=!0,i.code=t,i.reason=n,i}return i(t,e),t}(a),l=function(){if("undefined"!=typeof WebSocket)return WebSocket},d={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},f=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?d.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?d.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var i=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),o=i.next();!o.done;o=i.next()){var s=o.value;this._callEventListener(e,s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,s(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?d.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,i=void 0===r?d.minReconnectionDelay:r,o=e.maxReconnectionDelay,s=void 0===o?d.maxReconnectionDelay:o,a=0;return this._retryCount>0&&(a=i*Math.pow(n,this._retryCount-1))>s&&(a=s),this._debug("next delay",a),a},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?d.maxRetries:n,i=t.connectionTimeout,o=void 0===i?d.connectionTimeout:i,s=t.WebSocket,a=void 0===s?l():s;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(c=a)||!c||2!==c.CLOSING)throw Error("No valid WebSocket class provided");var c;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new a(t,e._protocols):new a(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),o))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new c(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new u(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.default=f},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(284),t),i(n(285),t),i(n(286),t),i(n(287),t),i(n(288),t),i(n(289),t),i(n(290),t),i(n(291),t),i(n(292),t),i(n(293),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsentType=void 0,function(e){e[e.TERMS_OF_USE=1]="TERMS_OF_USE",e[e.MARKETING=2]="MARKETING"}(t.ConsentType||(t.ConsentType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelfAPI=void 0;class r{constructor(e){this.client=e}async deleteEmail(){const e={method:"delete",url:`${r.URL.SELF}/${r.URL.EMAIL}`};await this.client.sendJSON(e)}async deletePhone(){const e={method:"delete",url:`${r.URL.SELF}/${r.URL.PHONE}`};await this.client.sendJSON(e)}async deleteSelf(e){const t={data:e,method:"delete",url:r.URL.SELF};await this.client.sendJSON(t)}async getName(){const e={method:"get",url:`${r.URL.SELF}/${r.URL.NAME}`};return(await this.client.sendJSON(e)).data}async getConsents(){const e={method:"get",url:`${r.URL.SELF}/${r.URL.CONSENT}`};return(await this.client.sendJSON(e)).data}async putConsent(e){const t={data:e,method:"put",url:`${r.URL.SELF}/${r.URL.CONSENT}`};await this.client.sendJSON(t)}async getSelf(e=[]){e.push({position:"SelfAPI.getSelf",vendor:"api-client"});const t={headers:{tracestate:e.map(e=>`${e.vendor}=${e.position}`).join(",")},method:"get",url:r.URL.SELF};return(await this.client.sendJSON(t)).data}async putHandle(e){const t={data:e,method:"put",url:`${r.URL.SELF}/${r.URL.HANDLE}`};await this.client.sendJSON(t)}async putLocale(e){const t={data:e,method:"put",url:`${r.URL.SELF}/${r.URL.LOCALE}`};await this.client.sendJSON(t)}async putPassword(e){const t={data:e,method:"put",url:`${r.URL.SELF}/${r.URL.PASSWORD}`};await this.client.sendJSON(t)}async putPhone(e){const t={data:e,method:"put",url:`${r.URL.SELF}/${r.URL.PHONE}`};await this.client.sendJSON(t)}async putSelf(e){const t={data:e,method:"put",url:r.URL.SELF};await this.client.sendJSON(t)}headPassword(){const e={method:"head",url:`${r.URL.SELF}/${r.URL.PASSWORD}`};return this.client.sendJSON(e)}}t.SelfAPI=r,r.URL={CONSENT:"consent",EMAIL:"email",HANDLE:"handle",LOCALE:"locale",NAME:"name",PASSWORD:"password",PHONE:"phone",SELF:"/self"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(295),t),i(n(296),t),i(n(297),t),i(n(298),t),i(n(299),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceProviderAPI=void 0;class r{constructor(e){this.client=e}async deleteServiceProvider(e){const t={data:e,method:"delete",url:""+r.URL.PROVIDER};await this.client.sendJSON(t)}async getServiceProvider(){const e={method:"get",url:""+r.URL.PROVIDER};return(await this.client.sendJSON(e)).data}async postLoginServiceProvider(e){const t={data:e,method:"post",url:`${r.URL.PROVIDER}/${r.URL.LOGIN}`};return(await this.client.sendJSON(t)).data}async postPasswordReset(e){const t={data:e,method:"post",url:`${r.URL.PROVIDER}/${r.URL.PASSWORD_RESET}`};await this.client.sendJSON(t)}async postPasswordResetComplete(e){const t={data:e,method:"post",url:`${r.URL.PROVIDER}/${r.URL.PASSWORD_RESET}/${r.URL.COMPLETE}`};await this.client.sendJSON(t)}async postRegisterServiceProvider(e){const t={data:e,method:"post",url:`${r.URL.PROVIDER}/${r.URL.REGISTER}`};return(await this.client.sendJSON(t)).data}async putProvider(e){const t={data:e,method:"put",url:""+r.URL.PROVIDER};await this.client.sendJSON(t)}}t.ServiceProviderAPI=r,r.URL={COMPLETE:"complete",LOGIN:"login",PASSWORD_RESET:"password-reset",PROVIDER:"/provider",REGISTER:"register"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(301),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServicesAPI=void 0;class r{constructor(e,t){this.client=e,this.assetAPI=t}async deleteSelf(){const e={method:"delete",url:`${r.URL.BOT}/${r.URL.SELF}`};await this.client.sendJSON(e)}async getClient(){const e={method:"get",url:`${r.URL.BOT}/${r.URL.CLIENT}`};return(await this.client.sendJSON(e)).data}async getClientPreKeys(){const e={method:"get",url:`${r.URL.BOT}/${r.URL.CLIENT}/${r.URL.PREKEYS}`};return(await this.client.sendJSON(e)).data}async getClientsByUserId(e){const t={method:"get",url:`${r.URL.BOT}/${r.URL.USERS}/${e}${r.URL.CLIENTS}`};return(await this.client.sendJSON(t)).data}async getConversation(e){const t={method:"get",url:`${r.URL.BOT}/${r.URL.USERS}/${e}${r.URL.CLIENTS}`};return(await this.client.sendJSON(t)).data}async getSelf(){const e={method:"get",url:`${r.URL.BOT}/${r.URL.SELF}`};return(await this.client.sendJSON(e)).data}async postUserPreKeysList(e){const t={data:e,method:"post",url:`${r.URL.BOT}/${r.URL.CLIENT}/${r.URL.PREKEYS}`};return(await this.client.sendJSON(t)).data}async getUsers(e){const t={method:"get",params:{ids:e},url:`${r.URL.BOT}/${r.URL.USERS}`};return(await this.client.sendJSON(t)).data}async postClientPreKeys(e){const t={data:{prekeys:e},method:"post",url:`${r.URL.BOT}/${r.URL.CLIENT}/${r.URL.PREKEYS}`};await this.client.sendJSON(t)}postAsset(e,t,n){return this.assetAPI.postServiceAsset(e,t,n)}getAsset(e,t,n=!1,r){return this.assetAPI.getServiceAsset(e,t,n,r)}async deleteAsset(e){const t={method:"delete",url:`${r.URL.BOT}/${r.URL.ASSETS}/${e}`};await this.client.sendJSON(t)}async postMessage(e){const t={data:e,method:"post",url:`${r.URL.BOT}/${r.URL.MESSAGES}`};await this.client.sendJSON(t)}}t.ServicesAPI=r,r.URL={ASSETS:"assets",BOT:"/bot",CLIENT:"client",CLIENTS:"clients",CONVERSATION:"conversation",MESSAGES:"messages",PREKEYS:"prekeys",SELF:"self",USERS:"users"}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(303),t),i(n(304),t),i(n(305),t),i(n(306),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TeamSearchAPI=void 0;const i=r(n(4)),o=n(0),s=n(5),a=n(10);class c{constructor(e){this.client=e}async getSearchMembers(e,t,n={}){var r;const u=i.default.CancelToken.source(),l={cancelToken:u.token,method:"get",params:Object.assign(Object.assign({q:t},n),{frole:null===(r=n.frole)||void 0===r?void 0:r.join(",")}),url:`${a.TeamAPI.URL.TEAMS}/${e}/${c.URL.SEARCH}`};return{cancel:()=>u.cancel(o.SyntheticErrorLabel.REQUEST_CANCELLED),response:(async()=>{try{return(await this.client.sendJSON(l)).data}catch(e){if(e.message===o.SyntheticErrorLabel.REQUEST_CANCELLED)throw new s.RequestCancellationError("Search request got cancelled");throw e}})()}}}t.TeamSearchAPI=c,c.URL={SEARCH:"search"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchOrder=void 0,function(e){e.ASCENDING="asc",e.DESCENDING="desc"}(t.SearchOrder||(t.SearchOrder={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r;function i(e,t){const n=t+"=",r=e.indexOf(n);if(-1===r)return"";const i=e.substr(r+n.length),o=-1===i.indexOf(".")?i.length:i.indexOf(".");return i.substr(0,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseAccessToken=t.parseValue=t.AccessTokenType=void 0,function(e){e.ACCESS_DATA="access-data",e.USER_DATA="user-data"}(r=t.AccessTokenType||(t.AccessTokenType={})),t.parseValue=i,t.parseAccessToken=function(e){const t=i(e,"v");if("1"!==t)throw new Error(`Unsupported access token version "${t}".`);const n=1e3*Number(i(e,"d"));return{clientId:i(e,"c"),expirationDate:new Date(n),keyIndex:Number(i(e,"k")),tag:i(e,"l"),token:e.split(".")[0],type:"a"===i(e,"t")?r.ACCESS_DATA:r.USER_DATA,userData:i(e,"r"),userId:i(e,"u"),version:Number(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScimAPI=void 0;class r{constructor(e){this.client=e}async getTokens(){const e={method:"get",url:`${r.URL.SCIM}/${r.URL.AUTH_TOKENS}`};return(await this.client.sendJSON(e)).data}async deleteToken(e){const t={method:"delete",params:{id:e},url:`${r.URL.SCIM}/${r.URL.AUTH_TOKENS}`};await this.client.sendJSON(t)}async postToken(e,t,n){const i={data:Object.assign({description:e,password:t},n&&{verification_code:n}),method:"post",url:`${r.URL.SCIM}/${r.URL.AUTH_TOKENS}`};return(await this.client.sendJSON(i)).data}}t.ScimAPI=r,r.URL={AUTH_TOKENS:"auth-tokens",SCIM:"/scim"}},function(e){e.exports=JSON.parse('{"browser":{"./src/shims/node/buffer":"./src/shims/browser/buffer.js","./src/shims/node/cookie":"./src/shims/browser/cookie.js"},"dependencies":{"@types/node":"~14","@types/spark-md5":"3.0.2","@types/tough-cookie":"4.0.1","@wireapp/commons":"4.3.0","@wireapp/priority-queue":"1.6.39","@wireapp/protocol-messaging":"1.37.0","axios":"0.21.4","axios-retry":"3.1.9","http-status-codes":"2.1.4","logdown":"3.3.1","reconnecting-websocket":"4.4.0","spark-md5":"3.0.1","tough-cookie":"4.0.0","ws":"7.5.3"},"devDependencies":{"@babel/core":"7.14.8","@babel/plugin-proposal-class-properties":"7.14.5","@babel/plugin-proposal-object-rest-spread":"7.14.7","@babel/plugin-proposal-optional-chaining":"7.14.5","@babel/preset-react":"7.14.5","@babel/preset-typescript":"7.14.5","@types/jasmine":"3.8.2","@types/karma":"6.3.1","@types/ws":"7.4.7","@wireapp/react-ui-kit":"8.7.2","@wireapp/store-engine":"4.9.9","@wireapp/store-engine-fs":"2.4.9","babel-loader":"8.2.2","browser-sync":"2.27.5","concurrently":"6.2.0","cross-env":"7.0.3","dotenv":"10.0.0","istanbul":"1.1.0-alpha.1","jasmine":"3.8.0","karma":"6.3.16","karma-chrome-launcher":"3.1.0","karma-jasmine":"4.0.1","karma-jasmine-diff-reporter":"2.0.1","karma-sourcemap-loader":"0.3.8","karma-spec-reporter":"0.0.32","karma-webpack":"4.0.2","nock":"13.1.1","nyc":"15.1.0","react":"18.1.0","react-dom":"18.1.0","react-hot-loader":"4.13.0","rimraf":"3.0.2","sinon":"11.1.2","sinon-har-server":"0.3.0","ts-node":"9.1.1","typescript":"4.4.2","webpack":"4.46.0","webpack-cli":"4.7.2","webpack-dev-server":"3.11.2","ws":"7.5.3"},"description":"Wire API Client to send and receive data.","files":["src","!src/demo","!src/**/*.test.*","!src/**/!(*.d).ts"],"license":"GPL-3.0","main":"src/APIClient","name":"@wireapp/api-client","repository":"https://github.com/wireapp/wire-web-packages/tree/main/packages/api-client","scripts":{"build":"yarn build:node && yarn build:browser","build:browser":"webpack --config ./webpack.browser.js","build:node":"tsc","clean":"rimraf \\"src/**/*.{js?(.map),d.ts}\\"","coverage":"istanbul cover --report html ./node_modules/jasmine/bin/jasmine.js","demo:http401":"cross-env NODE_DEBUG=@wireapp/api-client* ts-node src/demo/http401.ts","demo:self":"cross-env NODE_DEBUG=@wireapp/api-client* ts-node src/demo/self.ts","dist":"yarn clean && yarn build","start":"yarn build:node && concurrently \\"tsc -w\\" \\"webpack -w\\" \\"browser-sync start -c bs-config.js\\"","start:node":"cross-env NODE_DEBUG=@wireapp* node --inspect -r ts-node/register demo.ts","test":"yarn test:node && yarn test:browser","test:browser":"karma start","test:node":"cross-env NODE_DEBUG=@wireapp/api-client* nyc jasmine --config=jasmine.json","test:project":"yarn dist && yarn test","test:types":"tsc --noEmit","watch":"webpack serve --config webpack.browser.js"},"version":"19.12.0"}')}]);
//# sourceMappingURL=api-client.bundle.js.map